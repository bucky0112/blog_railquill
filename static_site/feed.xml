<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Railquill</title>
    <link>https://railquill.vercel.app</link>
    <description>Thoughts on Ruby, Rails, and building beautiful web applications. Join me on this journey of continuous learning and clean code.</description>
    <language>en-us</language>
    <atom:link href="https://railquill.vercel.app/feed.xml" rel="self" type="application/rss+xml" />
    <lastBuildDate>Fri, 19 Sep 2025 18:54:59 +0000</lastBuildDate>
    <generator>Railquill - Rails Blog Generator</generator>
    
    <item>
      <title>ç”¨ Rust + Bevy æ‰“é€ ä¸€å€‹ç°¡åŒ–ç‰ˆã€Œé›·é›»ã€å°„æ“ŠéŠæˆ²</title>
      <link>https://railquill.vercel.app/rust-bevy-Raiden.html</link>
      <description>å°æ™‚å€™åœ¨å¤§å‹æ©Ÿå°ç©ã€Šé›·é›»ã€‹æ™‚ï¼Œç¸½è¦ºå¾—èƒ½è‡ªå·±åšå‡ºä¸€å€‹å°„æ“ŠéŠæˆ²ä¸€å®šå¾ˆé…·ã€‚

ç¾åœ¨ç®—æ˜¯å¯¦ç¾äº†ï¼Œè€Œä¸”é‚„æ˜¯ç”¨ Rust
...</description>
      <content:encoded><![CDATA[
          <img src="https://github.com/bucky0112/blog-images/blob/main/images/ferris_plane.webp?raw=true" alt="Bevy version Raiden" style="max-width: 100%; height: auto; margin-bottom: 1rem;" />
        &lt;p&gt;å°æ™‚å€™åœ¨å¤§å‹æ©Ÿå°ç©ã€Šé›·é›»ã€‹æ™‚ï¼Œç¸½è¦ºå¾—èƒ½è‡ªå·±åšå‡ºä¸€å€‹å°„æ“ŠéŠæˆ²ä¸€å®šå¾ˆé…·ã€‚æœ€è¿‘æˆ‘æ­£å¥½åœ¨ç ”ç©¶ Rust çš„éŠæˆ²å¼•æ“ &lt;a href=&quot;https://bevy.org/&quot;&gt;Bevy&lt;/a&gt;ï¼ŒæŒ‘æˆ°åšå‡ºä¸€å€‹ç°¡åŒ–ç‰ˆçš„ç¶“å…¸å°„æ“ŠéŠæˆ² &lt;strong&gt;é›·é›» (Raiden)&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;é€™å€‹ Demo åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ç©å®¶å¯ä»¥ç”¨ WASD / æ–¹å‘éµ ç§»å‹•é£›æ©Ÿ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æŒ‰ ç©ºç™½éµ ç™¼å°„å­å½ˆ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ•µäººæœƒè‡ªå‹•ç”Ÿæˆä¸¦å¾ä¸Šæ–¹å¾€ä¸‹ç§»å‹•&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å­å½ˆæ“Šä¸­æ•µäºº â†’ æ•µäººèˆ‡å­å½ˆåŒæ™‚æ¶ˆå¤±&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è¶…å‡ºç•«é¢çš„ç‰©ä»¶æœƒè‡ªå‹•æ¸…ç†&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€çµ‚æ•ˆæœå¤§æ¦‚æ˜¯é€™æ¨£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/bucky0112/blog-images/main/images/img_20250919_000255.gif&quot; alt=&quot;demo&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;bevy&quot;&gt;Bevy ç‚ºä»€éº¼é©åˆé€™å€‹é¡Œæï¼Ÿ&lt;/h2&gt;

&lt;p&gt;Bevy æ¡ç”¨ ECSï¼ˆEntity Component Systemï¼‰ æ¶æ§‹ï¼ŒæŠŠéŠæˆ²ç‰©ä»¶æ‹†æˆä¸‰å€‹å…ƒç´ ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Entityï¼ˆå¯¦é«”ï¼‰ï¼šç©å®¶ã€æ•µäººã€å­å½ˆ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Componentï¼ˆå…ƒä»¶ï¼‰ï¼šä½ç½®ã€é€Ÿåº¦ã€è§’è‰²é¡å‹&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Systemï¼ˆç³»çµ±ï¼‰ï¼šç§»å‹•ã€ç”Ÿæˆã€ç¢°æ’ã€æ¸…ç†&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å°ã€Œå°„æ“ŠéŠæˆ²ã€ä¾†èªªï¼Œé€™å€‹æ¶æ§‹è¶…ç›´è§€ï¼šæ•µäººå°±æ˜¯ä¸€å€‹ entityï¼Œå­å½ˆä¹Ÿæ˜¯ï¼Œçµ¦å®ƒä¸€å€‹ velocity componentï¼Œå®ƒå€‘å°±æœƒè‡ªå·±å‹•èµ·ä¾†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2d1a51ebcd84e3ca&quot;&gt;ç©å®¶æ§åˆ¶&lt;/h2&gt;

&lt;p&gt;ç©å®¶é£›æ©Ÿçš„æ“ä½œå°±æ˜¯ æ–¹å‘éµ / WASDã€‚é€™è£¡æˆ‘åŠ äº†ä¸€å€‹å°ç´°ç¯€ï¼šç©å®¶ä¸èƒ½é£›å‡ºè¢å¹•é‚Šç•Œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;transform.translation.x = transform.translation.x
    .clamp(-WINDOW_WIDTH / 2.0 + 25.0, WINDOW_WIDTH / 2.0 - 25.0);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™è¡Œç¨‹å¼ç¢¼å°±æ˜¯ç”¨ä¾†ã€ŒæŠŠä½ æ“‹åœ¨ç•«é¢è£¡ã€ã€‚æˆ‘ä¸€é–‹å§‹é‚„å¿˜äº†åŠ ï¼Œçµæœé£›æ©Ÿç›´æ¥é£›å‡ºè¦–çª—æ¶ˆå¤±XD&lt;/p&gt;

&lt;h2 id=&quot;part-6542ac97d61&quot;&gt;å°„æ“Š&lt;/h2&gt;

&lt;p&gt;åªè¦æŒ‰ç©ºç™½éµï¼Œç©å®¶å°±èƒ½ç™¼å°„ä¸€é¡†é»ƒè‰²å°å­å½ˆå¾€ä¸Šé£›ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;commands.spawn((
    Sprite {
        color: Color::srgb(1.0, 1.0, 0.0),
        custom_size: Some(Vec2::new(5.0, 10.0)),
        ..default()
    },
    Transform::from_xyz(player_x, player_y + 30.0, 0.0),
    Bullet,
    Velocity(Vec3::new(0.0, BULLET_SPEED, 0.0)),
));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å­å½ˆå°±æ˜¯ä¸€å€‹çŸ©å½¢ç²¾éˆï¼ŒåŠ ä¸Š Velocityï¼Œå‰©ä¸‹äº¤çµ¦ç§»å‹•ç³»çµ±å°±å¥½ã€‚
ç¬¬ä¸€æ¬¡æŒ‰ä¸‹ç©ºç™½éµï¼Œçœ‹åˆ°ç•«é¢è£¡é£›å‡ºé»ƒè‰²å­å½ˆçš„ç¬é–“ï¼Œå½·å½¿å¤¢å›ç«¥å¹´ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2d39d1bed1bb5444&quot;&gt;ç”¢ç”Ÿæ•µäºº&lt;/h2&gt;

&lt;p&gt;æ•µäººæ¯éš”å…©ç§’æœƒåœ¨éš¨æ©Ÿä½ç½®ç”Ÿæˆï¼Œç„¶å¾Œæ…¢æ…¢å¾€ä¸‹ç§»å‹•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;let x = (rand::random::&amp;lt;f32&amp;gt;() - 0.5) * (WINDOW_WIDTH - 100.0);
commands.spawn((
    Sprite::from_image(asset_server.load(&quot;player2.png&quot;)),
    Transform::from_xyz(x, WINDOW_HEIGHT / 2.0 + 50.0, 0.0),
    Enemy,
    Velocity(Vec3::new(0.0, -ENEMY_SPEED, 0.0)),
));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç•¶æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°æ•µäººçœŸçš„ã€Œä¸€æ¶ä¸€æ¶æ‰ä¸‹ä¾†ã€æ™‚ï¼Œç¬é–“è¦ºå¾—å¥½åƒçœŸçš„å¯ä»¥ç©äº† ğŸ˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2d884cd2bcd875b0&quot;&gt;ç¢°æ’æª¢æ¸¬&lt;/h2&gt;

&lt;p&gt;å­å½ˆè·Ÿæ•µäººç¢°åˆ°å°±åŒæ­¸æ–¼ç›¡ï¼Œé€™è£¡æˆ‘ç”¨äº†æœ€ç›´ç™½çš„å¯«æ³•ï¼šç®—è·é›¢ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;if bullet_transform.translation.distance(enemy_transform.translation) &amp;lt; 30.0 {
    commands.entity(bullet_entity).despawn();
    commands.entity(enemy_entity).despawn();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Œå…¨æ²’æœ‰ç‰©ç†å¼•æ“ï¼Œå–®ç´”è·é›¢å°æ–¼ 30 å°±æ¶ˆå¤±ã€‚ä½†å°±ç®—é€™éº¼é™½æ˜¥ï¼Œæ‰“æ‰ç¬¬ä¸€æ¶æ•µæ©Ÿçš„ç¬é–“é‚„æ˜¯å¾ˆè®šã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2da7f3c6269d5783&quot;&gt;è‡ªå‹•æ¸…ç†&lt;/h2&gt;

&lt;p&gt;æœ€å¾Œä¸€ä»¶å¿…é ˆè¦è™•ç†çš„æ˜¯ï¼Œå­å½ˆé£›å‡ºç•«é¢ã€æ•µäººæ‰ä¸‹å»ï¼Œéƒ½è¦åˆªæ‰ã€‚ä¸ç„¶éŠæˆ²è·‘ä¹…äº†æœƒ lagã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;if transform.translation.y &amp;gt; WINDOW_HEIGHT / 2.0 + 100.0
    || transform.translation.y &amp;lt; -WINDOW_HEIGHT / 2.0 - 100.0 {
    commands.entity(entity).despawn();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¨˜å¾—æŠŠé€™æ®µåŠ ä¸Šå»ï¼Œä¸ç„¶æœ€å¾Œæœƒå¡QQ&lt;/p&gt;

&lt;h2 id=&quot;part-6542acf8e35&quot;&gt;å°çµ&lt;/h2&gt;

&lt;p&gt;ç¸½ä¹‹ï¼Œé€™æ˜¯ä¸€å€‹é‹ç”¨ Bevy å°±èƒ½å¯«å‡ºä¾†çš„ä¸€å€‹éŠæˆ²ï¼Œé›–ç„¶å¾ˆç°¡å–®ï¼Œä½†æ˜¯æ‡‰è©²å¯ä»¥æœ‰å¾ˆå¤šå¯èƒ½æ€§ï¼Œä¾‹å¦‚å¯ä»¥å†åŠ ä¸Šç‰¹æ•ˆã€è²éŸ³ï¼Œå¯èƒ½é‚„å¯ä»¥åŠ ä¸Šè¨ˆåˆ†ç³»çµ±ã€‚&lt;/p&gt;

&lt;p&gt;é€™ç¯‡æ–‡ç« åªæ˜¯æˆ‘ç”¨ Bevy å¯«éŠæˆ²çš„ä¸€å€‹å°å¯¦é©—ã€‚å…¶å¯¦æˆ‘é‚„åœ¨å¯«ä¸€å€‹å®Œæ•´çš„ Bevy ç³»åˆ—æ–‡ï¼Œæœƒä¸€æ­¥ä¸€æ­¥å¸¶å¤§å®¶å¾ ECS å…¥é–€ï¼Œåˆ°åšå‡ºä¸€å€‹ Rogue-lite å°éŠæˆ²ã€‚
å¦‚æœä½ å° Rust éŠæˆ²é–‹ç™¼æœ‰èˆˆè¶£ï¼Œæ­¡è¿çœ‹ä¸€ä¸‹&lt;a href=&quot;https://ithelp.ithome.com.tw/users/20120293/ironman/8770&quot;&gt;éµäººè³½ç³»åˆ—&lt;/a&gt;&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sat, 20 Sep 2025 02:24:24 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-bevy-Raiden.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 1 minutes</category>
    </item>
    <item>
      <title>Drizzle v.s Prisma</title>
      <link>https://railquill.vercel.app/drizzle-v-s-prisma.html</link>
      <description>æ¯”è¼ƒ Prisma è·Ÿ Drizzle å…©å€‹ ORM çš„ä¸€äº›å·®ç•°ã€‚</description>
      <content:encoded><![CDATA[
        &lt;p&gt;ç›®å‰çš„ JavaScript çš„ç”Ÿæ…‹åœˆä¸­ï¼Œæœ‰å¾ˆå¤šå‡ºè‰²çš„ SQL ORMï¼Œé€™äº› ORM éƒ½æ˜¯ç‚ºäº†å¹«åŠ©é–‹ç™¼è€…èƒ½å¤ æœ‰æ›´å¥½çš„é–‹ç™¼é«”é©—ï¼Œè€Œæ–°çš„ &lt;a href=&quot;https://risingstars.js.org/2024/en&quot;&gt;2024 JavaScript Rising Stars&lt;/a&gt; æ¦œå–®å‡ºçˆäº†ï¼Œé€™ç¯‡æ–‡ç« å°‡æœƒä¾†ä»‹ç´¹ Prisma è·Ÿ Drizzle é€™å…©å€‹ç†±é–€çš„ ORMï¼Œä¸¦ä¸”æ¯”è¼ƒå…©è€…æœ‰ä»€éº¼å·®ç•°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2c5c0dcf4a5ebc39&quot;&gt;å®‰è£æ¯”è¼ƒ&lt;/h2&gt;

&lt;p&gt;é€™ç¯‡æ–‡ç« å°‡æœƒä»¥ Express ä¾†åšå®‰è£ ORM çš„æ¯”è¼ƒï¼Œä¸¦ä¸”åªä»¥ JavaScript è€Œä¸æ˜¯ TypeScriptã€‚&lt;/p&gt;

&lt;p&gt;ä¸€é–‹å§‹çš„ Express å°ˆæ¡ˆæ˜¯ä»¥æœ€ç°¡æ˜“çš„æ¶æ§‹ä¾†å®‰è£ï¼Œç¾åœ¨ Express çš„æ¶æ§‹å¤§æ¦‚æ˜¯é€™æ¨£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;â”œâ”€â”€ ğŸ“œ package-lock.json
â”œâ”€â”€ ğŸ“œ package.json
â””â”€â”€ ğŸ“‚ src
    â””â”€â”€ ğŸ“œ index.js
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¾åœ¨çš„ &lt;code&gt;index.js&lt;/code&gt; é€™æ¨£å¯ä»¥æ‹¿åˆ° Hello Worldï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;const express = require(&quot;express&quot;);
const app = express();

app.get(&quot;/&quot;, (req, res) =&amp;gt; {
  res.send(&quot;Hello World&quot;);
});

app.listen(3000, () =&amp;gt; {
  console.log(&quot;Server is running on port 3000&quot;);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;drizzle&quot;&gt;Drizzle&lt;/h3&gt;

&lt;p&gt;å…ˆå¾ Drizzle çš„å®‰è£é–‹å§‹ï¼Œdrizzle æ”¯æ´è¨±å¤šè³‡æ–™åº«ï¼Œåƒæ˜¯ PostgreSQL å’Œ MySQL éƒ½æœ‰ï¼Œé€™æ¬¡æœƒä½¿ç”¨ PostgreSQL çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;h4 id=&quot;1-drizzle-pg&quot;&gt;1. å®‰è£ drizzle å’Œ pg&lt;/h4&gt;

&lt;p&gt;é€™è£¡å¯ä»¥ç›´æ¥æŒ‰ç…§å®˜ç¶²çš„æ–¹å¼ä¾†å®‰è£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npm i drizzle-orm pg
npm i -D drizzle-kit @types/pg
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;2&quot;&gt;2. é€£æ¥è³‡æ–™åº«&lt;/h4&gt;

&lt;p&gt;æ¥ä¸‹ä¾†åœ¨å°ˆæ¡ˆä¸­æ–°å¢ä¸€å€‹ &lt;code&gt;.env&lt;/code&gt; çš„ç’°å¢ƒè®Šæ•¸ï¼Œè£¡é¢å¯ä»¥é€£æ¥ PG çš„ databaseï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DATABASE_URL=postgresql://postgres:postgres@localhost:5432/drizzle_database
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®‰è£ dotenv ä¾†è™•ç†ç’°å¢ƒè®Šæ•¸ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npm i dotenv
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œä½¿ç”¨ drizzle é€£æ¥ PGï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const express = require(&quot;express&quot;);
const app = express();
const dotenv = require(&quot;dotenv&quot;);
const { drizzle } = require(&quot;drizzle-orm/node-postgres&quot;);
const { Pool } = require(&quot;pg&quot;);
dotenv.config();

const pool = new Pool({
  connectionString: process.env.DATABASE_URL
});

const db = drizzle(pool);
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;3-table&quot;&gt;3. æ–°å¢ table&lt;/h4&gt;

&lt;p&gt;é€™è£¡çš„ä¾‹å­æ˜¯å¾é›¶é–‹å§‹ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦è‡ªå·±å»ºç«‹ä¸€å€‹ schemaï¼Œå»ºè­°åœ¨ src è³‡æ–™å¤¾åº•ä¸‹æ–°å¢ä¸€å€‹è³‡æ–™å¤¾ï¼Œå‘½åç‚º &lt;code&gt;db&lt;/code&gt;ï¼Œä¸¦æ–°å¢ä¸€å€‹æª”æ¡ˆ &lt;code&gt;schema.ts&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const { integer, pgTable, varchar, text, timestamp } = require(&#39;drizzle-orm/pg-core&#39;);

const usersTable = pgTable(&#39;users&#39;, {
  id: integer().primaryKey().generatedAlwaysAsIdentity(),
  name: varchar({ length: 50 }).notNull(),
  age: integer().notNull(),
  email: varchar({ length: 255 }).notNull().unique(),
  created_at: timestamp().defaultNow(),
  address: varchar({ length: 255 }).notNull()
});

const postsTable = pgTable(&#39;posts&#39;, {
  id: integer().primaryKey().generatedAlwaysAsIdentity(),
  title: varchar({ length: 100 }).notNull(),
  content: text().notNull(),
  user_id: integer().references(() =&amp;gt; usersTable.id),
  created_at: timestamp().defaultNow(),
})

module.exports = {
  usersTable,
  postsTable
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™è£¡æˆ‘å€‘è©¦è‘—å»ºç«‹ users å’Œ posts çš„è³‡æ–™è¡¨ï¼Œå¦‚æœè¦ä½¿ç”¨å„ç¨®è³‡æ–™åº«çš„å‹åˆ¥ï¼Œå¿…é ˆå¾ drizzle è£¡é¢å–å¾—ç›¸é—œçš„ functionï¼Œä¾‹å¦‚ integerï¼Œå°±è¦ä½¿ç”¨ &lt;code&gt;integer()&lt;/code&gt;ã€‚ç„¶å¾Œè¦è¨­å®šé—œè¯çš„è©±ï¼Œä¾‹å¦‚ posts è·Ÿ users æœ‰é—œè¯ï¼Œå¯ä»¥åœ¨ postsTable çš„ user_id è¨­å®š &lt;code&gt;integer()&lt;/code&gt;ï¼Œä¸¦ä½¿ç”¨å®ƒè£¡é¢çš„ `references()&lt;/p&gt;

&lt;h4 id=&quot;4-drizzle-config&quot;&gt;4. è¨­å®š Drizzle config&lt;/h4&gt;

&lt;p&gt;è¨­å®šå®Œè³‡æ–™çš„ schema ä¹‹å¾Œï¼Œé‚„éœ€è¦è®“ Drizzle çŸ¥é“é€™å€‹å°ˆæ¡ˆæœ‰å“ªäº› schemaï¼Œé‚„æœ‰é€£çµä»€éº¼è³‡æ–™åº«ï¼Œä¸¦ä¸”è¨­å®šä¹‹å¾Œ migration ç”¢ç”Ÿçš„æª”æ¡ˆæœƒç”¢ç”Ÿåœ¨å“ªè£¡ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘å€‘éœ€è¦åœ¨æ ¹ç›®éŒ„æ–°å¢ä¸€å€‹ &lt;code&gt;drizzle.config.js&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const dotenv = require(&quot;dotenv&quot;);
const { defineConfig } = require(&#39;drizzle-kit&#39;);

dotenv.config();

module.exports = defineConfig({
  out: &#39;./drizzle&#39;,
  schema: &#39;./src/db/schema.js&#39;,
  dialect: &#39;postgresql&#39;,
  dbCredentials: {
    url: process.env.DATABASE_URL
  }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;5&quot;&gt;5. æ›´æ–°è³‡æ–™åº«&lt;/h4&gt;

&lt;p&gt;åŸ·è¡Œ generate ä¹‹å¾Œï¼Œå°±æœƒåœ¨å°ˆæ¡ˆä¸­å»ºç«‹ä¸€å€‹ &lt;code&gt;drizzle&lt;/code&gt; çš„è³‡æ–™å¤¾ï¼Œä¸¦ä¸”è‡ªå‹•æ–°å¢ä¸€äº› sql çš„æª”æ¡ˆã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npx drizzle-kit generate
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹ä¾†éœ€è¦é€é ORM å»æ›´æ–° PG è³‡æ–™åº«ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npx drizzle-kit migrate
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å¯ä»¥æª¢æŸ¥ PG è³‡æ–™åº«ï¼Œæ‡‰è©²å°±å¯ä»¥çœ‹åˆ°è³‡æ–™åº«æ–°å¢ users å’Œ posts çš„ tableã€‚&lt;/p&gt;

&lt;h3 id=&quot;prisma&quot;&gt;Prisma&lt;/h3&gt;

&lt;p&gt;Prisma çš„éƒ¨åˆ†ï¼Œä¸€æ¨£æ˜¯æ²¿ç”¨ Drizzle æ‰€ä½¿ç”¨çš„ Express æ¶æ§‹ï¼Œæˆ–è€…æ˜¯è¦é‡æ–°å»ºç«‹ä¸€å€‹ä¹Ÿå¯ä»¥ã€‚&lt;/p&gt;

&lt;h4 id=&quot;1-prisma&quot;&gt;1. å®‰è£ Prisma&lt;/h4&gt;

&lt;p&gt;é¦–å…ˆç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯å®‰è£ Prisma ORMï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npm install prisma @prisma/client
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™ä¸€æ­¥å®‰è£ï¼Œè·Ÿ Drizzle ä¸ä¸€æ¨£çš„æ˜¯ï¼Œå®ƒæœƒå¹«å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿ &lt;code&gt;.env&lt;/code&gt; å’Œ prisma çš„è³‡æ–™å¤¾ï¼Œè€Œä¸”è£¡é¢è‡ªå‹•ç”¢ç”Ÿä¸€å€‹ &lt;code&gt;schema.prisma&lt;/code&gt; çš„ç‰¹æ®Šæª”æ¡ˆï¼Œä¸¦ä¸”é è¨­æ˜¯é€£çµ postgresql çš„è¨­å®šï¼Œç•¶ç„¶ Prisma ä¹Ÿæä¾›äº†å¾ˆå¤šä¸åŒè³‡æ–™åº«ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥å†è€ƒæ…®åˆ‡æ›ã€‚&lt;/p&gt;

&lt;h4 id=&quot;2&quot;&gt;2. é€£æ¥è³‡æ–™åº«&lt;/h4&gt;

&lt;p&gt;æ¥ä¸‹ä¾†è¦é€£æ¥è³‡æ–™åº«ï¼Œå°±åœ¨ Prisma å¹«æˆ‘å€‘ç”¢ç”Ÿçš„ &lt;code&gt;.env&lt;/code&gt; ç’°å¢ƒè®Šæ•¸ä¸­æ¥ä¸Šè³‡æ–™åº«ä½ç½®ã€‚&lt;/p&gt;

&lt;h4 id=&quot;3-table&quot;&gt;3. æ–°å¢ table&lt;/h4&gt;

&lt;p&gt;å‰é¢çš„æ­¥é©Ÿåœ¨ prisma çš„è³‡æ–™å¤¾ä¸­ï¼Œç”¢ç”Ÿäº†ä¸€å€‹ &lt;code&gt;schema.prisma&lt;/code&gt; çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆå¦‚åç¨±æ‰€ç¤ºï¼Œå°±æ˜¯æ‹¿ä¾†æ”¾è³‡æ–™åº«çš„ schemaï¼Œå¦‚æœæ˜¯æŒ‰ç…§å‰é¢çš„ users å’Œ posts å…©å€‹ table æ¶æ§‹çš„è©±ï¼Œæœƒæ˜¯é€™æ¨£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;model posts {
  id         Int       @id @default(autoincrement())
  title      String    @db.VarChar(100)
  content    String
  user_id    Int?
  created_at DateTime? @default(now()) @db.Timestamp(6)
  users      users?    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: &quot;posts_user_id_users_id_fk&quot;)
}

model users {
  id         Int       @id @default(autoincrement())
  name       String    @db.VarChar(50)
  age        Int
  email      String    @unique(map: &quot;users_email_unique&quot;) @db.VarChar(255)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  address    String    @db.VarChar(255)
  posts      posts[]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;4&quot;&gt;4. æ›´æ–°è³‡æ–™åº«&lt;/h4&gt;

&lt;p&gt;å»ºç«‹å®Œ table çš„æ¶æ§‹ä¹‹å¾Œï¼Œè¦åŸ·è¡Œ migrate è®“æœ¬åœ°çš„è³‡æ–™åº«åšæ›´æ–°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npx prisma migrate dev --name &quot;init&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŸ·è¡Œå®Œä¹‹å¾Œï¼Œå°±æœƒåœ¨ prisma è³‡æ–™å¤¾è£¡é¢ç”¢ç”Ÿ migrations çš„ç´€éŒ„ï¼Œä¸¦ä¸” postgresql çš„è³‡æ–™åº«ä¹Ÿæœƒæ–°å¢ç›¸å°æ‡‰çš„ tableã€‚&lt;/p&gt;

&lt;h2 id=&quot;api&quot;&gt;å¯¦ä½œ API&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸Šæ˜¯å®‰è£å…©ç¨® ORM çš„å·®åˆ¥ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘ä¾†è©¦è‘—åœ¨ Express ä¸Šå¯¦ä½œ APIï¼Œåšæ–°å¢è·Ÿè®€å– USER çš„åŠŸèƒ½ã€‚
é¦–å…ˆæˆ‘å€‘å…ˆçœ‹ Drizzle çš„åšæ³•ï¼š&lt;/p&gt;

&lt;h3 id=&quot;drizzle&quot;&gt;Drizzle&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;// index.js

const { usersTable, postsTable } = require(&quot;./db/schema&quot;);

app.use(express.json());

app.get(&quot;/users&quot;, async (req, res) =&amp;gt; {
  const users = await db.select().from(usersTable);
  res.json(users);
});

app.post(&quot;/users&quot;, async (req, res) =&amp;gt; {
  const user = await db.insert(usersTable).values({
    name: req.body.name,
    age: req.body.age,
    email: req.body.email,
    address: req.body.address
  });
  res.status(201).json({ message: &quot;æ–°å¢æˆåŠŸ&quot; });
});

app.post(&quot;/posts&quot;, async (req, res) =&amp;gt; {
  const post = await db.insert(postsTable).values({
    title: req.body.title,
    content: req.body.content,
    user_id: req.body.user_id
  });
  res.status(201).json({ message: &quot;æ–°å¢æˆåŠŸ&quot; });
});

app.get(&quot;/posts&quot;, async (req, res) =&amp;gt; {
  const posts = await db.select().from(postsTable);
  res.json(posts);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¨˜å¾—è¦ä½¿ç”¨ &lt;code&gt;express.json()&lt;/code&gt; ä¸ç„¶æœƒæ²’è¾¦æ³•æ­£ç¢ºæ–°å¢ JSON çš„æ ¼å¼ã€‚
æ¥ä¸‹ä¾†æ²’æ„å¤–çš„è©±æ‡‰è©²å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ user å’Œ posts çš„æ–°å¢å’Œè®€å– API äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;prisma&quot;&gt;Prisma&lt;/h3&gt;

&lt;p&gt;Prisma ORM çš„æ–¹å¼ï¼Œæœƒéœ€è¦é€é PrismaClient ä¾†å»ºç«‹ä¸€å€‹å¯¦ä¾‹ï¼Œä¸¦ä¸”é€éå®ƒåœ¨æˆ‘å€‘è¨­å®šçš„æ¶æ§‹ä¸‹ï¼Œåˆ†åˆ¥å»åšè³‡æ–™åº«çš„æ“ä½œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const express = require(&quot;express&quot;);
const app = express();
const dotenv = require(&quot;dotenv&quot;);
dotenv.config();
const { PrismaClient } = require(&quot;@prisma/client&quot;);

const prisma = new PrismaClient();

app.use(express.json());

app.get(&quot;/users&quot;, async (req, res) =&amp;gt; {
  const users = await prisma.users.findMany();
  res.json(users);
});

app.post(&quot;/users&quot;, async (req, res) =&amp;gt; {
  const user = await prisma.users.create({
    data: {
      name: req.body.name,
      age: req.body.age,
      email: req.body.email,
      address: req.body.address
    }
  });
  res.status(201).json({ message: &quot;User created&quot; });
});

app.get(&quot;/posts&quot;, async (req, res) =&amp;gt; {
  const posts = await prisma.posts.findMany();
  res.json(posts);
});

app.post(&quot;/posts&quot;, async (req, res) =&amp;gt; {
  const post = await prisma.posts.create({
    data: {
      title: req.body.title,
      content: req.body.content,
      user_id: req.body.user_id
    }
  });
  res.status(201).json({ message: &quot;Post created&quot; });
});

app.listen(3000, () =&amp;gt; {
  console.log(&quot;Server is running on port 3000&quot;);
});
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;part-6542d156155&quot;&gt;æ¯”è¼ƒ&lt;/h2&gt;

&lt;h3 id=&quot;part-6542aa814e9&quot;&gt;å®‰è£&lt;/h3&gt;

&lt;p&gt;å®‰è£ä»¥åŠè¨­å®šçš„éƒ¨åˆ†ï¼Œåœ¨ Prisma æ¯”è¼ƒç°¡å–®ï¼Œåªè¦ä¸‹ä¸€å€‹æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•åœ¨å°ˆæ¡ˆä¸­è‡ªå‹•å»ºç«‹ä¸€äº›æª”æ¡ˆï¼Œä¾‹å¦‚ schema ä»¥åŠç›¸é—œçš„è¨­å®šæª”ï¼›ç›¸å Drizzle å°±ç¨å¾®æ¯”è¼ƒéº»ç…©ä¸€é»ã€‚&lt;/p&gt;

&lt;h3 id=&quot;schema&quot;&gt;schema&lt;/h3&gt;

&lt;p&gt;å…©é‚Šåœ¨ schema çš„ä½¿ç”¨å„æœ‰å„ªç¼ºé»ï¼š&lt;/p&gt;

&lt;h4 id=&quot;prisma&quot;&gt;Prisma&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;å„ªé»ï¼šæœ‰ä¸€å€‹ç¨æœ‰çš„æª”æ¡ˆä¾†ç®¡ç†ï¼Œè¦–è¦ºä¸Šæ–¹ä¾¿é–±è®€ï¼Œå°æ–¼ table çš„æ¶æ§‹ä¸€ç›®äº†ç„¶ï¼Œå‹åˆ¥ä»¥åŠæ˜¯å¦å¿…å¡«ä¹Ÿè »æ¸…æ¥šã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/P5c3cHr.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç¼ºé»ï¼šä¸å¤ªå¥½æ’°å¯«ï¼Œå¦‚æœæ˜¯æƒ³è¦åœ¨ &lt;code&gt;schema.prisma&lt;/code&gt; æ‰‹å¯«çš„è©±æœ‰é»å­¸ç¿’æˆæœ¬ï¼Œéœ€è¦æŒ‰ç…§ Prisma ç‰¹æœ‰çš„èªæ³•å»å¯«ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;drizzle&quot;&gt;Drizzle&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;å„ªé»ï¼šå¯«æ³•å°±æ˜¯ä¸€èˆ¬çš„ JSï¼Œè€Œä¸”è·ŸåŸæœ¬çš„ SQL éå¸¸ç›¸ä¼¼ï¼Œå­¸ç¿’æˆæœ¬æ¯”è¼ƒä½ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/boVP7JB.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç¼ºé»ï¼š æ¶æ§‹ä¸Šè·Ÿ Prisma ç›¸æ¯”ï¼Œæ¯”è¼ƒæ²’é€™éº¼å¥½é–±è®€ï¼Œä½†ç†Ÿæ‚‰ JS çš„é–‹ç™¼è€…æ‡‰è©²ä¹Ÿèƒ½å¾ˆå¿«ä¸Šæ‰‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;part-6542b16cbc8&quot;&gt;æ“ä½œ&lt;/h3&gt;

&lt;p&gt;åœ¨æ“ä½œä¸Šï¼ŒDrizzle è·ŸåŸæœ¬ SQL èªæ³•éå¸¸é¡ä¼¼ï¼Œé€™å°æ–¼ç†Ÿæ‚‰ SQL çš„é–‹ç™¼è€…ä¾†èªªï¼Œæ˜¯ä¸€å€‹å·¨å¤§çš„å„ªå‹¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/dOXHmhL.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;Prisma æœ‰è‡ªå·±çš„æ–¹æ³•ï¼Œæ‰€ä»¥å‹¢å¿…è¦å­¸ç¿’ä¸€ä¸‹ï¼Œå¯èƒ½æœƒæœ‰ä¸€äº›é™£ç—›æœŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/q2sayGl.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;part-6542fd4e95a&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;ä»¥ç›®å‰çš„ JS ç”Ÿæ…‹ä¾†èªªï¼Œå…©å€‹ ORM éƒ½æ˜¯å¾ˆæ£’çš„å·¥å…·ã€‚Prisma ç›®å‰åœ¨ GitHub æ“æœ‰ 40.7k çš„æ˜Ÿæ˜Ÿæ•¸ï¼Œè€Œ Drizzle å‰‡æ˜¯æ“æœ‰ 25.7k çš„æ˜Ÿæ˜Ÿæ•¸ã€‚
è€Œä¸”ç›®å‰å…©è€…çš„ä¸‹è¼‰é‡æ˜é¡¯æœ‰ä¸€äº›å·®è·ï¼Œä»£è¡¨è‘— Prisma æ˜¯æ¯”è¼ƒç†±é–€çš„é¸é …ã€‚
&lt;img src=&quot;https://i.imgur.com/Lf95O0R.png&quot; alt=&quot;npm trends&quot;&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº npm trends&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½† Drizzle å…¶å¯¦æ˜¯éå¸¸å¹´è¼•çš„ ORMï¼Œæ ¹æ“š &lt;a href=&quot;https://orm.drizzle.team/docs/latest-releases&quot;&gt;Drizzle å®˜ç¶²&lt;/a&gt;é é¢é¡¯ç¤ºï¼Œæœ€æ—©æ˜¯åœ¨ 2022 å¹´ 7 æœˆæ¨å‡ºã€‚åœ¨é€™ä¹‹å‰çš„ &lt;a href=&quot;https://risingstars.js.org/2024/en&quot;&gt;JavaScript Rising Stars&lt;/a&gt; å ±å‘Šä¸­ï¼Œéƒ½æ˜¯ Prisma åœ¨é€™å€‹æ¦œå–®ä¸Šï¼ŒDrizzle å‡ºç¾ä¹‹å¾Œå°±çœ‹ä¼¼å–ä»£äº† Prisma äº†ï¼Œæ˜¯ä¸€å€‹å¯ä»¥è§€å¯Ÿä¸¦ä¸”åƒè€ƒçš„éƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨é–‹ç™¼é¸æ“‡çš„æƒ…å¢ƒä¸Šï¼Œå¦‚æœåœ˜éšŠæ¯”è¼ƒç†Ÿæ‚‰ SQL çš„è©±ï¼Œé‚£éº¼é¸æ“‡ Drizzle æ˜¯ä¸€å€‹æ¯”è¼ƒå¥½çš„é¸æ“‡ï¼Œå¦‚æœèªªæƒ³è¦æœ‰æ¯”è¼ƒå®Œæ•´çš„å·¥å…·éˆï¼Œé‚£éº¼å¯ä»¥è€ƒæ…®é¸æ“‡ Prismaã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Thu, 19 Dec 2024 10:55:45 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/drizzle-v-s-prisma.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 5 minutes</category>
    </item>
    <item>
      <title>å¾æ‰‹æŠŠæ‰‹ç’°å¢ƒè¨­å®šåˆ°å»ºç«‹ç¬¬ä¸€å€‹ Flutter å°ˆæ¡ˆ</title>
      <link>https://railquill.vercel.app/flutter.html</link>
      <description>å¸¶ä½ æ‰‹æŠŠæ‰‹æŠŠ Flutter çš„ç’°å¢ƒè¨­å®šå¼„å¥½ï¼</description>
      <content:encoded><![CDATA[
        &lt;p&gt;ç’°å¢ƒè¨­å®šæ°¸é æ˜¯é–‹ç™¼è€…ä¸€é–‹å§‹é‡åˆ°çš„æ–°äººæ®ºæ‰‹ï¼Œå°¤å…¶æ˜¯ç•¶ä½ ä¸‹å®šæ±ºå®šæƒ³å­¸ä¸€é …æŠ€è¡“ï¼Œä½†åœ¨ç’°å¢ƒè¨­å®šå°±å¡é—œï¼Œç„¶å¾Œ...å°±æ²’æœ‰ç„¶å¾Œäº†ğŸ˜­ã€‚Flutter çš„ç’°å¢ƒè¨­å®šç®—æœ‰é»éº»ç…©ï¼Œä½†å¸Œæœ›æœ¬ç¯‡æ–‡ç« å¯ä»¥å¹«åŠ©ä½ æ‰“è´ç¬¬ä¸€å€‹é—œå¡ã€‚ç„¶å¾Œç”±æ–¼æˆ‘æ‰‹ä¸Šåªæœ‰ macOSï¼Œæ‰€ä»¥é€™ç¯‡æ–‡ç« æœƒä»¥ macOS çš„ç”¨æˆ¶è¦–è§’ä¾†é€²è¡Œç’°å¢ƒå®‰è£ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2e3d2e4d10913e3a&quot;&gt;é¸æ“‡ç’°å¢ƒ&lt;/h2&gt;

&lt;p&gt;é€²åˆ°&lt;a href=&quot;https://docs.flutter.dev/get-started/install&quot;&gt;å®˜ç¶²&lt;/a&gt;ä¹‹å¾Œï¼Œå¯ä»¥é¸æ“‡ä½ çš„é–‹ç™¼ç³»çµ±ï¼Œä¸¦æŒ‰ç…§å®˜æ–¹æ–‡ä»¶ä¾†ä¸€æ­¥ä¸€æ­¥å®Œæˆç’°å¢ƒè¨­å®šçš„å‰ç½®ä½œæ¥­ï¼Œé€™è£¡é¸æ“‡ macOS ä¾†ç¤ºç¯„ã€‚
&lt;img src=&quot;https://i.imgur.com/2CWMTTi.png&quot; alt=&quot;20240914001628&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æœƒå•ä½ ä¸»è¦æƒ³é–‹ç™¼ä»€éº¼é¡å‹çš„ Appï¼Œç”±æ–¼ Flutter æ˜¯ä¸€å€‹å¯ä»¥è·¨å¹³å°é–‹ç™¼çš„æ¡†æ¶ï¼Œä¸ç®¡æ˜¯ iOS é‚„æ˜¯ Androidï¼Œç”šè‡³æ˜¯ Desktop App é‚„æ˜¯ Web éƒ½èƒ½å‹ä»»ã€‚ä¸éæˆ‘å€‘çš„ç›®æ¨™ä¸»è¦æ˜¯è¦é–‹ç™¼ mobile appï¼Œæ‰€ä»¥é€™è£¡æˆ‘å€‘é¸æ“‡ iOS æˆ–æ˜¯ Android éƒ½å¯ä»¥ï¼Œé€™è£¡æˆ‘å€‘å…ˆé¸æ“‡ iOSã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/ot17JUJ.png&quot; alt=&quot;20240914001714&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;part-28fef6f2d54380ae&quot;&gt;å®‰è£å¿…è¦çš„é–‹ç™¼å·¥å…·&lt;/h2&gt;

&lt;p&gt;é€²åˆ° iOS çš„è¨­å®šé é¢ï¼Œæœƒå…ˆçœ‹åˆ°å¯†å¯†éº»éº»çš„ä¸€å †æ–‡å­—ï¼Œä½†ä¸ç”¨æ“”å¿ƒï¼Œæ¥ä¸‹ä¾†ä¸€æ­¥ä¸€æ­¥å¸¶ä½ è¨­å®šã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;é¦–å…ˆæƒ³è¦é–‹ç™¼ iOS appï¼Œé‚£éº¼å°±å¿…é ˆè¦å®‰è£å¿…è¦çš„ Xcodeï¼ˆé€™æ˜¯ä¸€å€‹åœ¨ App Store ä¸Šè©•åˆ†è¶…ä½åˆ†ï¼Œè€Œä¸”åˆè¶…ç´šè‚¥çš„å·¥å…·ï¼Œä½†åªèƒ½ç”¨å®ƒï¼‰ï¼Œå¾Œé¢æœƒéœ€è¦åšä¸€äº›è¨­å®šã€‚
&lt;img src=&quot;https://i.imgur.com/fZ9YXQD.png&quot; alt=&quot;20240914001743&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç†è«–ä¸Šå®‰è£å®Œé€™å€‹æ±è¥¿ä½ é‚„å¯ä»¥é †ä¾¿å¾—åˆ° Gitï¼Œä½†æˆ‘æƒ³ä¸€å€‹åˆæ ¼çš„å·¥ç¨‹å¸«é›»è…¦ä¸Šæ‡‰è©²éƒ½æœ‰ Git å§ï¼Ÿ&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æ¥ä¸‹ä¾†å¦‚æœä½ çš„é›»è…¦æ˜¯ Apple siliconï¼Œèˆ‰å‡¡ M1ã€M2 ç­‰ç­‰çš„æ™¶ç‰‡ï¼Œé‚£éº¼ä½ è¦åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä»¥ä¸‹çš„æŒ‡ä»¤ï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;sudo softwareupdate --install-rosetta --agree-to-license
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;flutter-sdk&quot;&gt;å®‰è£ Flutter SDK&lt;/h2&gt;

&lt;p&gt;é€²åˆ° iOS çš„è¨­å®šé é¢ï¼Œç›´æ¥ç•«é¢å¾€ä¸‹æ»‘åˆ° &lt;code&gt;Install the Flutter SDK&lt;/code&gt; çš„éƒ¨åˆ†ï¼Œé€™è£¡æœ‰å…©å€‹é¸æ“‡ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Use VS Code to install&lt;/li&gt;
&lt;li&gt;Download and install&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é‚£éº¼é€™å…©å€‹æœ‰ä»€éº¼å·®åˆ¥å‘¢ï¼Ÿä¸»è¦æ˜¯çœ‹ä½ ä¹‹å¾Œç”¨ä»€éº¼æ–¹å¼é–‹ç™¼ï¼Œä¸¦ä¸”ç”¨ä»€éº¼ä¾†æ¨¡æ“¬ã€‚å¦‚æœæ˜¯é¸æ“‡ VSCodeï¼Œæœªä¾†éƒ½å¯ä»¥åœ¨ VSCode ä¸Šé¢å°±å¥½ï¼›åä¹‹å¦‚æœä½ æƒ³è¦å¦å¤–é–‹çµ‚ç«¯æ©Ÿä¾†è¼¸å…¥æŒ‡ä»¤çš„è©±ï¼Œé‚£å°±å¯ä»¥é¸æ“‡ Download and installã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ä¸‹è¼‰ SDK&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æˆ‘æ˜¯å»ºè­°ç›´æ¥ä¸‹è¼‰ SDKï¼Œç„¶å¾Œå†è¦–æƒ…æ³å®‰è£ VSCode Extensionã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/fGeZEvj.png&quot; alt=&quot;20240914001852&quot;&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœæ˜¯ Intel æ™¶ç‰‡çš„å°±é¸ inter Processorï¼›åä¹‹å¦‚æœæ˜¯ Apple Silicon çš„å°±é¸å¦ä¸€å€‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è¼‰ zip æª”æ¡ˆä¹‹å¾Œè§£å£“ç¸®ï¼Œæœƒå¾—åˆ°ä¸€å€‹ &lt;code&gt;flutter&lt;/code&gt; çš„è³‡æ–™å¤¾ï¼Œè£¡é¢å°±æ˜¯ Flutter çš„ SDKï¼Œç„¶å¾Œåœ¨ä½ çš„æ ¹ç›®éŒ„å»ºç«‹ä¸€å€‹ &lt;code&gt;development&lt;/code&gt; çš„è³‡æ–™å¤¾ï¼Œæ¥è‘—æŠŠæ•´åŒ… &lt;code&gt;flutter&lt;/code&gt; è³‡æ–™å¤¾ä¸Ÿé€²å»ã€‚æ‰€ä»¥ä½ çš„æ¶æ§‹æ‡‰è©²æœƒæ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/development/flutter/
&lt;/code&gt;&lt;/pre&gt;

&lt;ol&gt;
&lt;li&gt;åŠ å…¥ Flutter åˆ° PATH&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç§»å‹•åˆ°ä½ çš„æ ¹ç›®éŒ„ï¼Œæ‰“é–‹ä½ çš„çµ‚ç«¯æ©Ÿï¼Œä¸¦è¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cd ~/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æª¢æŸ¥çœ‹æœ‰æ²’æœ‰ &lt;code&gt;.zshenv&lt;/code&gt; é€™å€‹æª”æ¡ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;ls -a
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ²’æœ‰çš„è©±å°±è‡ªå·±æ–°å¢ä¸€å€‹ã€‚æ¥ä¸‹ä¾†ç”¨ä½ ç¿’æ…£çš„ç·¨è¼¯å™¨æ‰“é–‹å®ƒï¼Œæˆ‘æ˜¯è »æ¨è–¦ç›´æ¥ç”¨ vim ä¾†ç›´æ¥æ–°å¢æˆ–è€…æ˜¯ç·¨è¼¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;vim .zshenv
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾ŒæŠŠé€™ä¸€æ®µç›´æ¥è¤‡è£½è²¼ä¸Šï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;export PATH=$HOME/development/flutter/bin:$PATH
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è·¯å¾‘å°±æ˜¯å‰›å‰›åœ¨æ ¹ç›®éŒ„æ–°å¢çš„ &lt;code&gt;/development/flutter/&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å­˜æª”ä¹‹å¾Œæœ€å¥½é‡é–‹çµ‚ç«¯æ©Ÿï¼Œç„¶å¾Œåœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;which flutter
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‡‰è©²å¯ä»¥çœ‹åˆ°é¡ä¼¼çš„æ±è¥¿ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/sGy5bYM.png&quot; alt=&quot;20240914001920&quot;&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœæ²’çœ‹åˆ°æˆ–æ˜¯é¡¯ç¤ºéŒ¯èª¤ï¼Œä¹Ÿä¸ç”¨æ“”å¿ƒï¼Œä»£è¡¨å¯èƒ½æ˜¯è·¯å¾‘éŒ¯èª¤ï¼Œå†ä»”ç´°çœ‹ä¸€ä¸‹æœ‰æ²’æœ‰æ‰“éŒ¯å­—ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œåœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter doctor
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/ogMyCcD.png&quot; alt=&quot;20240914001940&quot;&gt;&lt;/p&gt;

&lt;p&gt;é‚£éº¼ä½ çš„ Flutter SDK è¨­å®šå¤§è‡´ä¸Šå°±å®Œæˆäº†ğŸ‘ã€‚&lt;/p&gt;

&lt;h2 id=&quot;xcode&quot;&gt;è¨­å®š Xcode&lt;/h2&gt;

&lt;p&gt;å‰é¢æåˆ°æƒ³è¦é–‹ç™¼ iOS å¿…å®šè¦æœ‰ Xcodeï¼Œæ¥ä¸‹ä¾†æ‰“é–‹ä½ çš„ App Storeï¼Œæœå°‹ Xcodeã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£å®Œ Xcode ä¹‹å¾Œï¼Œåœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;sudo sh -c &#39;xcode-select -s /Applications/Xcode.app/Contents/Developer &amp;amp;&amp;amp; xcodebuild -runFirstLaunch&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†æ¬¡è¼¸å…¥æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;sudo xcodebuild -license
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ˜¯ä¸€æ®µå”è­°æ›¸ï¼Œéœ€è¦ä½ çœ‹å®Œä¸¦åŒæ„ï¼Œæ²’å•é¡Œçš„è©±å°±ç›´æ¥è¼¸å…¥ &lt;code&gt;agree&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-40f050023a78a025&quot;&gt;æ¨¡æ“¬å·¥å…·è¨­å®š&lt;/h2&gt;

&lt;p&gt;åœ¨é–‹ç™¼çš„éç¨‹ä¸­ï¼Œæˆ‘å€‘éœ€è¦ç•«é¢ä¾†æŸ¥çœ‹æ˜¯å¦æ­£ç¢ºï¼Œæˆ–è€…æ˜¯æ“ä½œä¸Šæœ‰æ²’æœ‰å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;Xcode æä¾›äº† Simulator é€™å€‹å·¥å…·ï¼Œå¯ä»¥è®“ä½ åœ¨ Mac ä¸Šç›´æ¥æ¨¡æ“¬ä¸€å° iPhone ç”šè‡³æ˜¯ iPadã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å®‰è£ iOS Simulatorï¼Œåœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥æŒ‡ä»¤ï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;xcodebuild -downloadPlatform iOS
&lt;/code&gt;&lt;/pre&gt;

&lt;ol&gt;
&lt;li&gt;æ‰“é–‹ Simulatorï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;open -a Simulator
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°±å¯ä»¥çœ‹åˆ°ä¸€å° iPhone çš„ç•«é¢å‘ˆç¾åœ¨ä½ çš„é›»è…¦ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/K02nq2q.png&quot; alt=&quot;20240914002011&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ­å–œä½ ï¼Œä½ çš„ Flutter ç¾åœ¨å°±å¯ä»¥é–‹ç™¼ iOS app äº†ã€‚&lt;/p&gt;

&lt;p&gt;ç¶“æ­·å®Œç’°å¢ƒå®‰è£çš„è‰±é›£éç¨‹å¾Œï¼Œçµ‚æ–¼å¯ä»¥é–‹å§‹ä¾†å»ºç«‹æˆ‘å€‘ç¬¬ä¸€å€‹ Flutter å°ˆæ¡ˆäº†ï¼Œé€™ç¯‡æ–‡ç« å°‡æœƒä»‹ç´¹å¹¾å€‹æ–¹å¼ä¾†å»ºç«‹å°ˆæ¡ˆã€‚&lt;/p&gt;

&lt;h2 id=&quot;1-commend-line&quot;&gt;1. ä½¿ç”¨ Commend Line ä¾†å»ºç«‹&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæ‰“é–‹çµ‚ç«¯æ©Ÿï¼Œç„¶å¾Œåœ¨ä½ æƒ³è¦å»ºç«‹å°ˆæ¡ˆçš„ä½ç½®ï¼Œä¾‹å¦‚ desktopï¼Œè¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;mkdir first_flutter &amp;amp;&amp;amp; cd &quot;$_&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ®µæŒ‡ä»¤æœƒç›´æ¥æ–°å¢ä¸€å€‹å«åš &lt;code&gt;first_flutter&lt;/code&gt; çš„è³‡æ–™å¤¾ï¼Œä¸¦ç§»å‹•é€²è©² &lt;code&gt;first_flutter&lt;/code&gt; ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œæ¥ä¸‹ä¾†ä»‹ç´¹ä¸€ä¸‹ Flutter çš„æŒ‡ä»¤æœ‰å“ªäº›ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ ä¸€é–‹å§‹ä»€éº¼éƒ½ä¸çŸ¥é“çš„è©±ï¼Œé‚£éº¼å¯ä»¥è¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter -h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ®µæŒ‡ä»¤å°±æ˜¯ &lt;code&gt;flutter --help&lt;/code&gt; çš„ç°¡æ˜“ç‰ˆï¼Œæƒ³æˆæ˜¯è¦é€²å…¥ Flutter çš„éŠå®¢ä¸­å¿ƒï¼Œè£¡é¢æœƒåˆ—å‡ºåŸºæœ¬çš„è³‡è¨Šï¼Œé€™æ˜¯ä¸€æ®µéå¸¸å¯¦ç”¨çš„æŒ‡ä»¤ï¼Œå¯ä»¥è¨˜ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæƒ³ç¢ºèªä¸€ä¸‹ç¾åœ¨å®‰è£åœ¨ä½ é›»è…¦ä¸­çš„ Flutter ç‰ˆæœ¬æ˜¯å“ªä¸€ç‰ˆçš„è©±ï¼Œå°±è¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter --version
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¾‹å¦‚å¯ä»¥çœ‹åˆ°æˆ‘ç¾åœ¨å®‰è£çš„ Flutter ç‰ˆæœ¬æ˜¯ 3.22.3ï¼ŒDart çš„ç‰ˆæœ¬æ˜¯ 3.4.4ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/VHAgDon.png&quot; alt=&quot;20240914002418&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œå¦‚æœä½ è¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter -v
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™ä¸€æ®µä¸æ˜¯ &lt;code&gt;flutter --version&lt;/code&gt; çš„ç°¡æ˜“ç‰ˆå–”ï¼Œè€Œæ˜¯ä»£è¡¨ Flutter â€œè©³ç´°â€çš„é¸é …ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ è¼¸å…¥ &lt;code&gt;flutter -v&lt;/code&gt; çš„è©±ï¼Œæ‡‰è©²å¯ä»¥ç™¼ç¾è·Ÿ &lt;code&gt;flutter -h&lt;/code&gt; æœ‰é»åƒï¼Œä½†æ˜¯è§£é‡‹çš„æ›´è©³ç´°ã€‚åœ¨ç›®å‰çš„ç‰ˆæœ¬ä¸­ï¼Œ&lt;code&gt;flutter -v&lt;/code&gt; å°±ç­‰åŒæ–¼ &lt;code&gt;flutter --help -v&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å¦‚æœä½ æƒ³å¾—åˆ°æŸäº›æŒ‡ä»¤æ›´è©³ç´°çš„è³‡è¨Šçš„è©±ï¼Œå°±åœ¨æœ€å¾Œé¢åŠ ä¸Š &lt;code&gt;-v&lt;/code&gt;ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter --version -v
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°±å¯ä»¥é¡¯ç¤ºæ›´è©³ç´°çš„ Flutter ç‰ˆæœ¬è³‡è¨Šäº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/rHC7DBt.png&quot; alt=&quot;20240914002444&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç¨å¾®ä»‹ç´¹äº†ä¸€ä¸‹ Flutter çš„æŒ‡ä»¤ä¹‹å¾Œï¼Œä½ å¯èƒ½æœ‰çœ‹åˆ°ä¸¦çŸ¥é“æ€éº¼è¼¸å…¥å»ºç«‹å°ˆæ¡ˆçš„æŒ‡ä»¤äº†ï¼Œæ²’éŒ¯ï¼Œè¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter create hello_world
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¾Œé¢çš„ &lt;code&gt;hello_world&lt;/code&gt; ä½ å¯ä»¥å¸¶å…¥ä»»ä½•çš„åç¨±ï¼Œä¸éæœ€å¥½æ˜¯ä½¿ç”¨ Snake caseï¼Œå› ç‚ºé€™å€‹æ˜¯æ…£ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;æ²’å•é¡Œçš„è©±ï¼Œå°±å¯ä»¥çœ‹åˆ°å¦‚åŒä¸‹é¢åœ–ç‰‡çš„è³‡è¨Šï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/RODR486.png&quot; alt=&quot;20240914002505&quot;&gt;&lt;/p&gt;

&lt;p&gt;æœƒè·Ÿä½ èªªæ¥ä¸‹ä¾†ä½ æ‡‰è©²ç§»å‹•åˆ°æ–°å»ºçš„å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­ï¼Œæ¥è‘—åŸ·è¡Œ &lt;code&gt;flutter run&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æˆ‘å€‘å…ˆä¸è¦æ€¥ï¼Œå…ˆç§»å‹•åˆ°è©²æ–°å»ºçš„å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­ï¼Œç„¶å¾Œä½¿ç”¨ä½ æ…£ç”¨çš„ç·¨è¼¯å™¨æ‰“é–‹è³‡æ–™å¤¾ï¼Œé€™è£¡æœƒä½¿ç”¨ VSCode ä¾†ç¤ºç¯„ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ VSCode é–‹å•Ÿå°ˆæ¡ˆä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†åœ¨ Extensions æœå°‹ flutterï¼Œèªæ˜é€™å€‹ Flutter å®˜æ–¹çš„ Extensionã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/B1V2Qig.png&quot; alt=&quot;20240914002531&quot;&gt;&lt;/p&gt;

&lt;p&gt;æˆ–è€…æ˜¯ç›´æ¥é»&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter&quot;&gt;é€™è£¡&lt;/a&gt;ä¸‹è¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†è¦ä¾†ä»‹ç´¹ç¬¬äºŒç¨®å»ºç«‹ Flutter å°ˆæ¡ˆçš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;vscode&quot;&gt;ä½¿ç”¨ VSCode å»ºç«‹å°ˆæ¡ˆ&lt;/h2&gt;

&lt;p&gt;é€™å€‹æ–¹æ³•é©åˆä¸å–œæ­¡é–‹å¤ªå¤šæ±è¥¿ï¼Œåªæƒ³é–‹ä¸€å€‹ VSCode å°±æå®šçš„äººã€‚&lt;/p&gt;

&lt;p&gt;é‚£éº¼ä¸€æ¨£å…ˆå»ºç«‹ä¸€å€‹ç©ºçš„è³‡æ–™å¤¾ï¼Œç„¶å¾Œé€²å»è©²æ–°å»ºçš„è³‡æ–™å¤¾ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;mkdir first_flutter &amp;amp;&amp;amp; cd &quot;$_&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œç”¨ VSCode æ‰“é–‹é€™å€‹æ–°å¢çš„è³‡æ–™å¤¾ï¼Œæ¥ä¸‹ä¾†éµç›¤æŒ‡ä»¤ comboï¼ŒæŒ‰ä¸‹ &lt;code&gt;command&lt;/code&gt; + &lt;code&gt;shift&lt;/code&gt; + &lt;code&gt;p&lt;/code&gt;ï¼Œå¦‚æœæ˜¯ Windows çš„ç”¨æˆ¶æ‡‰è©²æœƒæ˜¯ &lt;code&gt;ctrl&lt;/code&gt; + &lt;code&gt;shift&lt;/code&gt; + &lt;code&gt;p&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æœƒåœ¨ä½ çš„ VSCode è·³å‡ºä¸€å€‹ Command Paletteã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/4UT8v5c.png&quot; alt=&quot;20240914002558&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œè¼¸å…¥ flutterï¼Œç„¶å¾Œé¸æ“‡ &lt;code&gt;Flutter: New Project&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/5fj4fLE.png&quot; alt=&quot;20240914002615&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æœƒè·³å‡ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/jmygdFd.png&quot; alt=&quot;20240914002631&quot;&gt;&lt;/p&gt;

&lt;p&gt;é€™è£¡æœ‰å¹¾å€‹ Template å¯ä»¥é¸æ“‡ï¼Œæ²’ç‰¹åˆ¥è¦æ±‚çš„è©±ï¼Œå°±é¸ Application å°±å¥½ï¼Œé€™å€‹å°±ç­‰åŒæ–¼æŒ‡ä»¤ flutter create å»ºç«‹æ–°å°ˆæ¡ˆã€‚&lt;/p&gt;

&lt;p&gt;å»ºç«‹å®Œä½ çš„ VSCode å°±æœƒè·³å‡ºä¸€å€‹æç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/n7AckkG.png&quot; alt=&quot;20240914002711&quot;&gt;&lt;/p&gt;

&lt;p&gt;è·Ÿä½ èªª Flutter å°ˆæ¡ˆå·²ç¶“å»ºç«‹å®Œæˆï¼Œå¯ä»¥ç›´æ¥æŒ‰ F5 å°±å¯ä»¥è·‘å›‰ï¼&lt;/p&gt;

&lt;h2 id=&quot;flutter-app&quot;&gt;åŸ·è¡Œä½ çš„ç¬¬ä¸€å€‹ Flutter App&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ä»‹ç´¹ä¸€ä¸‹è¦æ€éº¼åŸ·è¡Œ Flutter Appã€‚&lt;/p&gt;

&lt;h2 id=&quot;1-vscode&quot;&gt;1. åœ¨ VSCode ä¸ŠåŸ·è¡Œ&lt;/h2&gt;

&lt;p&gt;ç¬¬ä¸€ç¨®æ–¹æ³•å…ˆä»‹ç´¹å¦‚ä½•åœ¨ VSCode ä¸ŠåŸ·è¡Œæ¨¡æ“¬å™¨ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆä½¿ç”¨ VSCode æ‰“é–‹ä½ çš„å°ˆæ¡ˆï¼Œæ‡‰è©²æœƒçœ‹åˆ°å¦‚åŒä¸‹åœ–çš„ç•«é¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/XLTgKRL.png&quot; alt=&quot;20240914003051&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œç”¨ VSCode æ‰“é–‹é€™å€‹æ–°å¢çš„è³‡æ–™å¤¾ï¼Œæ¥ä¸‹ä¾†éµç›¤æŒ‡ä»¤ comboï¼ŒæŒ‰ä¸‹ &lt;code&gt;command&lt;/code&gt; + &lt;code&gt;shift&lt;/code&gt; + &lt;code&gt;p&lt;/code&gt;ï¼Œå¦‚æœæ˜¯ Windows çš„ç”¨æˆ¶æ‡‰è©²æœƒæ˜¯ &lt;code&gt;ctrl&lt;/code&gt; + &lt;code&gt;shift&lt;/code&gt; + &lt;code&gt;p&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æœƒåœ¨ä½ çš„ VSCode è·³å‡ºä¸€å€‹ Command Paletteã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/hupC5W3.png&quot; alt=&quot;20240914003122&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œè¼¸å…¥ flutterï¼Œç„¶å¾Œé¸æ“‡ &lt;code&gt;Launch Emulator&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/VhsA0dR.png&quot; alt=&quot;20240914003155&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æ‡‰è©²æœƒè·³å‡ºä¸€äº›æ¨¡æ“¬å™¨çš„é¸æ“‡ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/XbEuNov.png&quot; alt=&quot;20240914003215&quot;&gt;&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚æœ‰ iOS çš„è·Ÿ android çš„ï¼Œé€™è£¡å…ˆç¤ºç¯„ iOS çš„ã€‚&lt;/p&gt;

&lt;p&gt;ç•¶ä½ é¸å®Œ iOS ä¹‹å¾Œï¼Œå°±æœƒè·³å‡ºä¸€å€‹ Simulatorï¼Œå¯ä»¥çœ‹åˆ°ä¸€å€‹ iPhone çš„ç•«é¢åœ¨ä½ çš„é›»è…¦ä¸Šï¼Œä¸éé‚„æ²’æœ‰çœŸæ­£åŸ·è¡Œä½ çš„å°ˆæ¡ˆä¸­çš„ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;

&lt;p&gt;ç¾åœ¨è«‹ä½ çš„ VSCode ä¸Šé¢ï¼Œä¸¦æŒ‰ç…§å…©å€‹æ­¥é©Ÿé»æ“Šã€‚å¯ä»¥åƒè€ƒä¸‹åœ–ä¸­çš„ç¯„ä¾‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/6ku3khZ.png&quot; alt=&quot;20240914003246&quot;&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æ‰¾åˆ° &lt;code&gt;lib&lt;/code&gt; è³‡æ–™å¤¾ä¸­çš„ &lt;code&gt;main.dart&lt;/code&gt; æª”æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;main()&lt;/code&gt; çš„ä¸Šæ–¹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€æ’æ–‡å­—ï¼š&lt;code&gt;Run | Debug | Profile&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦‚æœæ²’çœ‹åˆ°é€™æ’æ–‡å­—ï¼Œå¯èƒ½ä»£è¡¨ä½ æ²’å®‰è£ &lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter&quot;&gt;Flutter&lt;/a&gt; çš„å®˜æ–¹ Extensionã€‚å¯ä»¥è©¦è‘—å†å®‰è£ä¸€æ¬¡ï¼Œæˆ–è€…é‡æ–°é–‹å•Ÿ VSCodeã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œé»æ“Š &lt;code&gt;Run&lt;/code&gt;ï¼Œå°±å¯ä»¥çœ‹åˆ° VSCode å³ä¸‹è§’æ­£åœ¨åŸ·è¡Œä¸­ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/MkG5xk0.png&quot; alt=&quot;20240914003316&quot;&gt;&lt;/p&gt;

&lt;p&gt;æˆåŠŸé‹ä½œçš„è©±ï¼Œå¯ä»¥çœ‹åˆ° VSCode å¤šäº†ä¸€å€‹æ§åˆ¶åˆ—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/3EJKDiQ.png&quot; alt=&quot;20240914003333&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œä½ çš„ iOS Simulator ç•«é¢æ‡‰è©²æœƒæ˜¯é€™æ¨£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/TRIRn0N.png&quot; alt=&quot;20240914003345&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘è©¦è‘—æ”¹è®Šä¸€ä¸‹ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;code&gt;main.dart&lt;/code&gt; é€™å€‹æª”æ¡ˆï¼Œå¾€ä¸‹æ»‘æ‰¾åˆ°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;dart!&quot;&gt;&#39;You have pushed the button this many times:&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™ä¸€æ®µå°±æ˜¯åœ¨ç•«é¢ä¸Šçš„é¡¯ç¤ºçš„æ–‡å­—ï¼Œæˆ‘å€‘éš¨ä¾¿æ”¹ä¸€ä¸‹ä¹‹å¾Œï¼Œç•«é¢æœƒéš¨è‘—ä½ ä¿®æ”¹ä¹‹å¾Œé¦¬ä¸Š Hot Reload æ›´æ–°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Aq2TTRk.png&quot; alt=&quot;20240914003412&quot;&gt;&lt;/p&gt;

&lt;p&gt;æœ‰æ™‚å€™å¯èƒ½æœƒé‡åˆ°æ²’æœ‰æ›´æ–°çš„æƒ…æ³ï¼Œæ²’é—œä¿‚ã€‚ç›´æ¥åœ¨ VSCode çš„é‚£å€‹æ§åˆ¶åˆ—ï¼Œé»æ“Š âš¡ï¸ çš„æŒ‰éˆ•ï¼Œé€™å€‹æ˜¯ Save and Hot Reload çš„åŠŸèƒ½ï¼Œé€™æ¨£ä½ çš„ç•«é¢æ‡‰è©²å°±æœƒæŒ‰ç…§ä½ ä¿®æ”¹çš„æ›´æ–°äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-d978f4e315e7e7d1&quot;&gt;åœ¨çµ‚ç«¯æ©Ÿä¸ŠåŸ·è¡Œ&lt;/h2&gt;

&lt;p&gt;å‰é¢ç¤ºç¯„äº†å¦‚ä½•åœ¨ VSCode åŸ·è¡Œ Flutter çš„å°ˆæ¡ˆï¼Œä¸¦ä¸”å¦‚ä½•å³æ™‚æ›´æ–°ï¼Œæ¥ä¸‹ä¾†ä¾†ç¤ºç¯„å¦‚ä½•åœ¨çµ‚ç«¯æ©Ÿåšé€™äº›å‹•ä½œã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæ‰“é–‹ä½ çš„çµ‚ç«¯æ©Ÿï¼Œå¦‚æœä½ ç›´æ¥åŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter run
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‡‰è©²æœƒé¡¯ç¤ºä»¥ä¸‹çš„ç•«é¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/h0gsxjU.png&quot; alt=&quot;20240914003436&quot;&gt;&lt;/p&gt;

&lt;p&gt;é€™æ˜¯ä»£è¡¨æˆ‘å€‘ä¸¦æ²’æœ‰é€£çµä»»ä½•çš„è£ç½®ï¼Œæˆ–æ˜¯æ¨¡æ“¬å™¨ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæˆ‘å€‘æƒ³ç¢ºèªä¸€ä¸‹ç¾åœ¨ Flutter æœ‰æ²’æœ‰é€£çµä»»ä½•è£ç½®æˆ–æ¨¡æ“¬å™¨ï¼Œå¯ä»¥åŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter devices
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‡‰è©²æœƒçœ‹åˆ°é¡ä¼¼ä»¥ä¸‹çš„è¨Šæ¯ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/MmVQRQW.png&quot; alt=&quot;20240914003457&quot;&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœæœ‰é€£çµçš„è©±ï¼Œæœƒé¡¯ç¤ºåœ¨ä¸Šé¢ï¼Œä½†å¦‚æœæ²’æœ‰ï¼Œä»–æç¤ºä½ èªªï¼Œå¯ä»¥åŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter emulators
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŸ·è¡Œå®Œæœƒè·Ÿä½ èªªï¼Œç¾åœ¨æœ‰å“ªäº›æ¨¡æ“¬å™¨å¯ä»¥ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Vio1JAi.png&quot; alt=&quot;20240914003516&quot;&gt;&lt;/p&gt;

&lt;p&gt;ä¸¦ä¸”æç¤ºä½ ç›®å‰ä½ å¦‚æœè¦åŸ·è¡Œæ¨¡æ“¬å™¨ï¼Œå¯ä»¥åŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter emulators --launch &amp;lt;emulator id&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥æˆ‘ç›®å‰çš„ç‹€æ³ï¼Œæˆ‘æƒ³æ‰“é–‹ iOS Simulator å°±æ˜¯è¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter emulators --launch apple_ios_simulator
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœé€™è£¡éƒ½æ²’å‡ºç¾ä»»ä½•è£ç½®çš„è©±ï¼Œé‚£éº¼ä»–ä¹Ÿæç¤ºä½ ï¼Œå¯ä»¥è¼¸å…¥æŒ‡ä»¤è‡ªå·±æ–°å¢ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter emulators --create [--name xyz]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€šå¸¸åªè¦æ¨¡æ“¬å™¨å·²ç¶“é–‹å•Ÿï¼Œé‚£éº¼å°±å¯ä»¥ç›´æ¥åŸ·è¡Œ Flutter å°ˆæ¡ˆäº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;flutter run
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½ çš„çµ‚ç«¯æ©Ÿæœƒå‡ºç¾é€™æ¨£çš„ç•«é¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/BcavgsG.png&quot; alt=&quot;20240914003539&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œå¦‚æœæˆ‘å€‘ä¿®æ”¹ä¸€ä¸‹ç¨‹å¼ç¢¼ï¼Œå¯ä»¥ç™¼ç¾å¯èƒ½æ²’è¾¦æ³•å³æ™‚æ›´æ–°ç•«é¢ã€‚&lt;/p&gt;

&lt;p&gt;æ²’é—œä¿‚ï¼Œçµ‚ç«¯æ©Ÿæœ‰æç¤ºæˆ‘å€‘å¯ä»¥åŸ·è¡Œ &lt;code&gt;r&lt;/code&gt; ä¾†åš Hot reloadï¼Œä¹Ÿå¯ä»¥åšåˆ°æ›´æ–°ç¨‹å¼ç¢¼çš„å‹•ä½œã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šå°±æ˜¯å¦‚ä½•é€é VSCode å’Œçµ‚ç«¯æ©Ÿä¾†åŸ·è¡Œ Flutter å°ˆæ¡ˆçš„æµç¨‹ï¼Œå„ä½å¯ä»¥é¸æ“‡å–œæ­¡ä¸¦ä¸”é †æ‰‹çš„æ–¹å¼ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sat, 14 Sep 2024 00:08:54 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/flutter.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 4 minutes</category>
    </item>
    <item>
      <title>Rust å¾é›¶é–‹å§‹ç¶²é çˆ¬èŸ²(2024 Hello World)</title>
      <link>https://railquill.vercel.app/rust-2024-hello-world.html</link>
      <description>æœ¬ç¯‡æ–‡ç« æ˜¯ 2024 Hello World Dev Conference å·¥ä½œåŠçš„å¯¦ä½œæµç¨‹ï¼Œå¯ä»¥æ­é… Github repohttps://github.com/bucky0112/scrapingrust ä¸€èµ·ä½¿ç”¨ã€‚

 Rust ç°¡ä»‹
Rust æ˜¯ä¸€å€‹è¿‘å¹´ä¾†å¼•èµ·éå¸¸å¤šè¨è«–çš„ç¨‹å¼èªè¨€ï¼Œå› ç‚ºæ•ˆèƒ½å‡ºè‰²ï¼Œä¸¦ä¸”å®‰å…¨æ€§...</description>
      <content:encoded><![CDATA[
        &lt;p&gt;æœ¬ç¯‡æ–‡ç« æ˜¯ 2024 Hello World Dev Conference å·¥ä½œåŠçš„å¯¦ä½œæµç¨‹ï¼Œå¯ä»¥æ­é… &lt;a href=&quot;https://github.com/bucky0112/scraping_rust&quot;&gt;Github repo&lt;/a&gt; ä¸€èµ·ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&quot;rust&quot;&gt;Rust ç°¡ä»‹&lt;/h2&gt;

&lt;p&gt;Rust æ˜¯ä¸€å€‹è¿‘å¹´ä¾†å¼•èµ·éå¸¸å¤šè¨è«–çš„ç¨‹å¼èªè¨€ï¼Œå› ç‚ºæ•ˆèƒ½å‡ºè‰²ï¼Œä¸¦ä¸”å®‰å…¨æ€§æ¥µä½³ï¼Œå¯«èµ·ä¾†éå¸¸æœ‰è¶£ï¼Œåœ¨æ¯ä¸€å¹´çš„ Stackoverflow èª¿æŸ¥ä¸­å·²ç¶“é€£çºŒèŸ¬è¯å¤šå¹´çš„æœ€å—æ­¡è¿ç¨‹å¼èªè¨€ï¼ˆmost-admired programming languageï¼‰ï¼Œå¯ä»¥åƒè€ƒä»Šå¹´ 2024 çš„&lt;a href=&quot;https://survey.stackoverflow.co/2024/technology/#admired-and-desired&quot;&gt;èª¿æŸ¥&lt;/a&gt;ã€‚ä¹Ÿå› ç‚ºè¨è«–åº¦å¾ˆé«˜ï¼Œä¸¦ä¸”å¾ˆå¤šåœ‹éš›çŸ¥åä¼æ¥­ä¹Ÿç´›ç´›æŠ•å…¥ä½¿ç”¨ï¼Œå¯ä»¥æ„Ÿå—åˆ°ä¼¼ä¹å¼•é ˜äº†ä¸€è‚¡é¢¨æ½®ï¼Œå¥½åƒä»€éº¼éƒ½è¦ç”¨ Rust ä¾†æ”¹å¯«åŸæœ¬çš„ç”¢å“ï¼Œæˆ–è€…æ˜¯å‡ºç¾ä»¥ Rust é–‹ç™¼çš„æ–°æ±è¥¿ã€‚&lt;/p&gt;

&lt;h2 id=&quot;rust&quot;&gt;å®‰è£ Rust&lt;/h2&gt;

&lt;p&gt;è¦å®‰è£ Rust éå¸¸ç°¡å–®ï¼Œåªè¦é€²åˆ°&lt;a href=&quot;https://www.rust-lang.org/zh-TW/&quot;&gt;å®˜ç¶²&lt;/a&gt;ï¼Œç„¶å¾ŒæŒ‰ä¸‹â€œç«‹å³é–‹å§‹â€çš„æŒ‰éˆ•ï¼Œå°±æœƒåµæ¸¬ä½ ç›®å‰é›»è…¦çš„ç³»çµ±ï¼Œä¸¦çµ¦ä½ å®‰è£çš„å»ºè­°èˆ‡èªªæ˜ã€‚åƒæ˜¯æˆ‘çš„é›»è…¦æ˜¯ macOS ç³»çµ±ï¼Œæ‰€ä»¥åªè¦æŒ‰ç…§æŒ‡ç¤ºï¼Œåœ¨çµ‚ç«¯æ©ŸåŸ·è¡ŒæŒ‡ä»¤ï¼Œå°±å¯ä»¥é–‹å§‹å®‰è£ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£ Rust é€™å€‹æ­¥é©Ÿä¸»è¦æœƒå®‰è£å…©å€‹æ±è¥¿ï¼Œåˆ†åˆ¥æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Rustup&lt;/li&gt;
&lt;li&gt;Cargo&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Rustup æ˜¯ Rust çš„å®‰è£èˆ‡ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œè€Œ Cargo å‰‡æ˜¯ Rust çš„å»ºç½®èˆ‡å¥—ä»¶ç®¡ç†å·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæƒ³ç¢ºèªæ˜¯å¦å®‰è£æˆåŠŸï¼Œå¯ä»¥åœ¨çµ‚ç«¯æ©Ÿä¸‹æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;rustc -V
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ–è€…æ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cargo -V
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å…©å€‹éƒ½èƒ½æª¢æŸ¥ç›®å‰å®‰è£çš„ç‰ˆæœ¬ï¼ˆæˆªè‡³ç›®å‰ç‚ºæ­¢çš„ç‰ˆæœ¬ç‚º 1.81.0ï¼‰ï¼Œä¾‹å¦‚ä¸‹åœ–ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/3tIP2Jq.png&quot; alt=&quot;20240913005124&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;hello-world&quot;&gt;Hello Worldï¼Œå»ºç«‹å°ˆæ¡ˆ&lt;/h2&gt;

&lt;p&gt;æ—¢ç„¶å®‰è£å¥½äº†ï¼Œä¸å…ä¿—çš„è®“æˆ‘å€‘ä¾†åšä¸€å€‹ Hello Worldï¼Œé€™è£¡æœƒç›´æ¥ä½¿ç”¨ Cargo ä¾†å»ºç«‹ä¸€å€‹ Rust å°ˆæ¡ˆï¼Œè«‹åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cargo new demo
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ®µæŒ‡ä»¤ä»£è¡¨è¦ä½¿ç”¨ Cargo ä¾†å»ºç«‹ä¸€å€‹åç¨± &lt;code&gt;demo&lt;/code&gt; çš„å°ˆæ¡ˆï¼Œç•¶ç„¶åç¨±å¯ä»¥è‡ªç”±å‘½åã€‚ç„¶å¾Œé€²å…¥åˆ°è©²å°ˆæ¡ˆä¹‹å¾Œï¼Œä¸¦ä½¿ç”¨ç¿’æ…£çš„ç·¨è¼¯å™¨æ‰“é–‹ï¼Œä¾‹å¦‚ VSCodeã€‚&lt;/p&gt;

&lt;h3 id=&quot;vscode&quot;&gt;å»ºè­° VSCode å¥—ä»¶&lt;/h3&gt;

&lt;p&gt;å¦‚æœæ˜¯ç¿’æ…£ç”¨ VSCode çš„äººï¼Œå¼·çƒˆå»ºè­° &lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer&quot;&gt;rust-analyzer&lt;/a&gt; é€™å€‹å¥—ä»¶ã€‚åœ¨é–‹ç™¼ä¸­å¯ä»¥æœ‰ä¸€äº›æç¤ºï¼Œæˆ–è€…æ˜¯éŒ¯èª¤çš„æé†’ã€‚&lt;/p&gt;

&lt;p&gt;ç¾åœ¨ä½ æ‡‰è©²ä½¿ç”¨ç·¨è¼¯å™¨æ‰“é–‹å°ˆæ¡ˆäº†ï¼Œä¸¦ä¸”å¯ä»¥çœ‹åˆ°å°ˆæ¡ˆçš„æ¶æ§‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.
â”œâ”€â”€ src
â”‚   â””â”€â”€ main.rs
â”œâ”€â”€ target
â”œâ”€â”€ .gitignore
â”œâ”€â”€ Cargo.lock
â””â”€â”€ Cargo.toml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•´å€‹å°ˆæ¡ˆæœ€ä¸»è¦çš„æª”æ¡ˆæ˜¯åœ¨ &lt;code&gt;src&lt;/code&gt; åº•ä¸‹çš„ &lt;code&gt;main.rs&lt;/code&gt;ï¼Œå®ƒæ˜¯ Rust å°ˆæ¡ˆçš„ entrypointï¼Œä»»ä½•é‚è¼¯éƒ½æœƒç¶“ç”±é€™è£¡ä¾†ç™¼å‹•åŸ·è¡Œï¼Œé‚£éº¼æˆ‘å€‘ä¾†çœ‹çœ‹ &lt;code&gt;main.rs&lt;/code&gt; é€™å€‹æª”æ¡ˆã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;fn main() {
    println!(&quot;Hello, world!&quot;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°å»ºç«‹å°ˆæ¡ˆå·²ç¶“å¹«æˆ‘å€‘è™•ç†å¥½ Hello World äº†ï¼Œä½†æ˜¯é€™å€‹ &lt;code&gt;println!()&lt;/code&gt; æ˜¯ä»€éº¼ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ä»¥ç›®çš„ä¾†èªªï¼Œä»–å¯ä»¥å¹«æˆ‘å€‘å°å‡º Hello Worldï¼Œé›–ç„¶çœ‹èµ·ä¾†å¾ˆåƒæ˜¯ä¸€å€‹å‡½å¼ï¼Œä½†åœ¨ Rust ä¸­å…¶å¯¦ä¸æ˜¯å‡½å¼ï¼Œè€Œæ˜¯ä¸€å€‹å·¨é›†ï¼ˆMarcoï¼‰ï¼Œå¯ä»¥å…ˆå¤§æ¦‚äº†è§£å°±å¯ä»¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-2c1204f93c6ace21&quot;&gt;åŸ·è¡Œå°ˆæ¡ˆ&lt;/h3&gt;

&lt;p&gt;åœ¨ Cargo å°ˆæ¡ˆä¸­ï¼Œè¦åŸ·è¡Œä¸¦ä¸”é‹ä½œç¨‹å¼ç¢¼ï¼Œå¯ä»¥åœ¨çµ‚ç«¯æ©Ÿä¸‹æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cargo run
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™ä¸€æ®µæŒ‡ä»¤æœƒç·¨è­¯ä¸¦ä¸”åŸ·è¡Œç›®å‰çš„ç¨‹å¼ç¢¼ï¼Œæ‰€ä»¥å¯ä»¥åœ¨çµ‚ç«¯æ©Ÿçœ‹åˆ° &lt;code&gt;Hello World&lt;/code&gt; çš„çµæœã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2ea806877f2aa35a&quot;&gt;é–‹å§‹çˆ¬èŸ²&lt;/h2&gt;

&lt;p&gt;åœ¨é–‹å§‹ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£é€™å€‹å°ˆæ¡ˆéœ€è¦ç”¨çš„å¥—ä»¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-8da8f8589c6df2b2&quot;&gt;å¥—ä»¶çš„æœå°‹&lt;/h3&gt;

&lt;p&gt;å¦‚æœæ˜¯ç†Ÿæ‚‰ç¶²é é–‹ç™¼çš„æœ‹å‹ï¼Œå¤§æ¦‚éƒ½æœƒçŸ¥é“æœ‰ NPM é€™å€‹æ±è¥¿ï¼Œè€Œ Rust ä¹Ÿæœ‰ä¸€å€‹é¡ä¼¼ NPM çš„ç¶²ç«™ï¼Œé‚£å°±æ˜¯ &lt;a href=&quot;https://crates.io/&quot;&gt;crates.io&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/w0EM3SF.png&quot; alt=&quot;20240913005147&quot;&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘å€‘éœ€è¦å®‰è£é€™äº›å¥—ä»¶ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crates.io/crates/tokio&quot;&gt;tokio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crates.io/crates/reqwest&quot;&gt;reqwest&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crates.io/crates/scraper&quot;&gt;scraper&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;tokio ä¸»è¦æ˜¯è™•ç†éåŒæ­¥çš„æ“ä½œï¼›reqwest æ˜¯è™•ç† HTTP è«‹æ±‚ï¼›scraper å‰‡æ˜¯è™•ç†ç¶²é å…ƒç´ çš„é¸æ“‡ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-708b4c5e64bc6729&quot;&gt;å¥—ä»¶å®‰è£çš„æ–¹å¼&lt;/h3&gt;

&lt;p&gt;å¥—ä»¶å®‰è£çš„æ–¹å¼æœ‰åˆ†æˆåœ¨çµ‚ç«¯æ©Ÿä¸‹æŒ‡ä»¤å®‰è£ï¼Œå’Œåœ¨å°ˆæ¡ˆä¸­çš„ &lt;code&gt;Cargo.toml&lt;/code&gt; æ‰‹å‹•è¼¸å…¥ã€‚ä»¥ tokio ç‚ºä¾‹ï¼Œå¯ä»¥åœ¨å³é‚Šçš„ &lt;strong&gt;Install&lt;/strong&gt; å€å¡Šçœ‹åˆ°å®‰è£æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/jQNPm5Q.png&quot; alt=&quot;20240913005454&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€ç¨®æ–¹å¼æ˜¯åœ¨çµ‚ç«¯æ©Ÿä¸‹æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cargo add tokio
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¬¬äºŒç¨®æ–¹å¼å¯ä»¥æ‰“é–‹ &lt;code&gt;Cargo.toml&lt;/code&gt; é€™å€‹æª”æ¡ˆï¼Œç„¶å¾Œåœ¨ &lt;code&gt;[dependencies]&lt;/code&gt; åº•ä¸‹è¼¸å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml!&quot;&gt;tokio = &quot;1.40.0&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;tokio&quot;&gt;å®‰è£ tokio éœ€è¦æ³¨æ„çš„åœ°æ–¹&lt;/h3&gt;

&lt;p&gt;ç”±æ–¼ crates å¤§éƒ½é è¨­æ˜¯åŸºæœ¬çš„å®‰è£ï¼Œæ‰€ä»¥ç•¶éœ€è¦é–‹å•ŸæŸäº›åŠŸèƒ½ï¼Œé‚„éœ€è¦é–‹å•Ÿè¨­å®šï¼Œå®‰è£çš„æ–¹å¼å¯ä»¥é€™æ¨£åšï¼š&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€ç¨®åœ¨çµ‚ç«¯æ©Ÿä¸‹æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cargo add tokio -F full
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¬¬äºŒç¨®æ–¹å¼ä¹Ÿå¯ä»¥é€é &lt;code&gt;Cargo.toml&lt;/code&gt; ä¾†å®‰è£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml!&quot;&gt;tokio = { version = &quot;1.40.0&quot;, features = [&quot;full&quot;] }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœæ˜¯ç¶“ç”± &lt;code&gt;Cargo.toml&lt;/code&gt; ä¾†å®‰è£çš„è©±ï¼Œé‚„éœ€è¦åœ¨çµ‚ç«¯æ©Ÿä¸‹æŒ‡ä»¤ä¾†é€²è¡Œç·¨è­¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cargo build
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç›®å‰çš„ &lt;code&gt;Cargo.toml&lt;/code&gt; æ‡‰è©²æœƒæ˜¯é€™æ¨£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Oi9WD2y.png&quot; alt=&quot;20240913005210&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;part-cc3a7ae4d4b902ac&quot;&gt;è¦é€²è¡Œçˆ¬èŸ²çš„è³‡æ–™ä¾†æº&lt;/h2&gt;

&lt;p&gt;é€™æ¬¡å·¥ä½œåŠè¦é€²è¡Œçš„çˆ¬èŸ²ç·´ç¿’ä¾†æºæ˜¯&lt;a href=&quot;https://books.toscrape.com/&quot;&gt;é€™å€‹ç¶²ç«™&lt;/a&gt;ã€‚é€™æ˜¯ä¸€å€‹å°ˆé–€ç·´ç¿’çˆ¬èŸ²çš„ç¶²ç«™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/9LeonzC.png&quot; alt=&quot;20240913005230&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;part-84aab2f83254d926&quot;&gt;è©¦è‘—å–å¾—ç¶²é å…§å®¹&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å°±å¯ä»¥å¯«ä¸€äº›ç¨‹å¼ç¢¼ï¼Œå…ˆè©¦è‘—é€£åˆ°é€™å€‹ç¶²ç«™ä¸¦å–å¾—ç¶²é å…§å®¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;use reqwest;       // ä½¿ç”¨ reqwest

#[tokio::main]     // åœ¨ main æ¨™è¨˜ä½¿ç”¨ tokio è™•ç†éåŒæ­¥
async fn main() {  // åœ¨ main å‰é¢åŠ ä¸Š async
    let url = &quot;https://books.toscrape.com/&quot;; // é€£çµçš„ URL
    let response = reqwest::get(url).await.unwrap(); // ä½¿ç”¨ get
    let body = response.text().await.unwrap(); // å°‡ response è½‰æˆå¯è¾¨è­˜çš„æ–‡å­—

    println!(&quot;{}&quot;, body); // å°å‡º body
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾ŒåŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt;ï¼Œæ‡‰è©²æœƒçœ‹åˆ°å°å‡ºæ•´å€‹ç¶²é çš„å…§å®¹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;html&quot;&gt;è§£æ HTML&lt;/h2&gt;

&lt;p&gt;ç¢ºèªç¶²é å…§å®¹æ²’å•é¡Œä¹‹å¾Œï¼Œå°±å¯ä»¥é€²è¡Œä¸‹ä¸€æ­¥ä¾†è§£æ HTMLï¼Œé€™è£¡éœ€è¦å€ŸåŠ© scraperã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;use scraper::Html; // ä½¿ç”¨ scraper çš„ HTML æ–¹æ³•

// ...

let document = Html::parse_document(&amp;amp;body); // è§£æ body

println!(&quot;{}&quot;, document);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ™‚å€™åŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt; ä¹‹å¾Œï¼Œæœƒç™¼ç¾åˆ°æœ‰éŒ¯èª¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/3G01s3z.png&quot; alt=&quot;20240913005245&quot;&gt;&lt;/p&gt;

&lt;p&gt;Cargo æœƒæä¾›å®Œæ•´çš„éŒ¯èª¤æç¤ºï¼Œç”šè‡³æœƒè·Ÿä½ èªªä½ æ‡‰è©²æ€éº¼åšæ¯”è¼ƒå¥½ï¼Œæ‰€ä»¥å°±å¯ä»¥æŒ‰ç…§å®ƒçš„å»ºè­°åœ¨ &lt;code&gt;println!()&lt;/code&gt; ä¸­çš„ &lt;code&gt;{}&lt;/code&gt; æ”¹æˆ &lt;code&gt;{:?}&lt;/code&gt; æˆ–è€…æ˜¯ &lt;code&gt;{:#?}&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥æ”¹æˆä»¥ä¸‹å¹¾ç¨®æ–¹å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;println!(&quot;{:?}&quot;, document); // debug æ ¼å¼åŒ–

println!(&quot;{:#?}&quot;, document); // pretty-print æ ¼å¼

println!(&quot;{}&quot;, document.html()); // è½‰å›å­—ç¬¦ä¸²ï¼Œå°±æ˜¯è½‰å›åŸä¾†çš„æ ¼å¼
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;part-e84c99d59c7ac262&quot;&gt;æ±ºå®šæŠ“å–å“ªäº›è³‡æ–™&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘ä¸»è¦æ˜¯è¦æŠ“æ¯æœ¬æ›¸çš„åç¨±ä»¥åŠåƒ¹éŒ¢ï¼Œæ‰“é–‹é–‹ç™¼è€…å·¥å…·æª¢æŸ¥ HTML æ¶æ§‹ï¼Œå¯ä»¥ç™¼ç¾é€™è£¡æ˜¯ç”¨ &lt;code&gt;&amp;lt;li&amp;gt;&lt;/code&gt; ä¾†å€åˆ†æ¯æœ¬æ›¸ï¼Œä½†æˆ‘å€‘éœ€è¦æ›´æ–¹ä¾¿è¾¨è­˜çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§ &lt;code&gt;&amp;lt;li&amp;gt;&lt;/code&gt; ä¸­çš„ &lt;code&gt;&amp;lt;article&amp;gt;&lt;/code&gt;ï¼Œé€™è£¡æœ‰ class å¯ä»¥è¾¨è­˜ï¼Œä¹Ÿå°±æ˜¯ &lt;code&gt;product_pod&lt;/code&gt;ï¼Œé€™æ¨£å°±å¯ä»¥å»é¸å–æ¯ä¸€æœ¬ç¨ç«‹çš„æ›¸ã€‚&lt;/p&gt;

&lt;p&gt;ç•¶é¸æ“‡å®Œæ¯æœ¬æ›¸ä¹‹å¾Œï¼Œå°±è¦å»æŠ“å–æ›¸çš„æ›¸åä»¥åŠåƒ¹éŒ¢ï¼Œå¯ä»¥åœ¨ &lt;code&gt;&amp;lt;h3&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;.product_price&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/9d2KXjp.png&quot; alt=&quot;20240913005302&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;part-5df8ce0a942e77ae&quot;&gt;å»ºç«‹é¸å–å™¨&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;use scraper::{Html, Selector};
// ...
let book_selector = Selector::parse(&quot;article.product_pod&quot;).unwrap();
let title_selector = Selector::parse(&quot;h3 a&quot;).unwrap();
let price_selector = Selector::parse(&quot;div.product_price .price_color&quot;).unwrap();
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;part-da3d97c51885cb4d&quot;&gt;ä½¿ç”¨è¿´åœˆæ’ˆå–è³‡æ–™&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å°±å¯ä»¥ä½¿ç”¨è¿´åœˆä¾†æ’ˆå–è³‡æ–™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;for book in document.select(&amp;amp;book_selector) {
    let title = book
        .select(&amp;amp;title_selector)
        .next()
        .unwrap()
        .text()
        .collect::&amp;lt;String&amp;gt;();
    let price = book
        .select(&amp;amp;price_selector)
        .next()
        .unwrap()
        .text()
        .collect::&amp;lt;String&amp;gt;();

    println!(&quot;æ›¸å: {}&quot;, title);
    println!(&quot;åƒ¹æ ¼: {}&quot;, price);
    println!(&quot;---&quot;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt; ä¹‹å¾Œï¼Œé€™æ¨£å°±å¯ä»¥æŠŠæ¯æœ¬æ›¸çš„æ›¸åä»¥åŠåƒ¹æ ¼å…¨éƒ¨å°å‡ºä¾†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-f8bb379b2d44a6da&quot;&gt;åˆ©ç”¨å±¬æ€§å–å¾—å®Œæ•´æ›¸å&lt;/h2&gt;

&lt;p&gt;åŸ·è¡Œå®Œä¹‹å¾Œé›–ç„¶å¯ä»¥å–å¾—æ›¸åä»¥åŠåƒ¹æ ¼ï¼Œä½†æ˜¯æ‡‰è©²å¯ä»¥ç™¼ç¾æœ‰äº›æ›¸åä¸¦ä¸æ˜¯å®Œæ•´çš„æ›¸åã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/U09lOci.png&quot; alt=&quot;20240913005317&quot;&gt;&lt;/p&gt;

&lt;p&gt;é€™æ˜¯å› ç‚ºç¶²ç«™æœ¬èº«åœ¨è™•ç†æ›¸åæ™‚ï¼Œå¯èƒ½æ˜¯é‡å°å¤ªé•·çš„æ›¸åæœ‰é€²è¡Œä¿®æ”¹ã€‚æ²’é—œä¿‚ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ HTML æ¶æ§‹ä¸­æ˜¯å¦æœ‰æä¾›å®Œæ•´çš„æ›¸åã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/rYQZwJE.png&quot; alt=&quot;20240913005328&quot;&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘å€‘ç™¼ç¾åœ¨ &lt;code&gt;&amp;lt;h3&amp;gt;&lt;/code&gt; ä¸­çš„ &lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt; æœ‰ä¸€å€‹ &lt;code&gt;title&lt;/code&gt; çš„å±¬æ€§ï¼Œæ‰€ä»¥å°±å¯ä»¥åˆ©ç”¨é€™å€‹å±¬æ€§å»å–å¾—å®Œæ•´çš„æ›¸åã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;let title_element = book.select(&amp;amp;title_selector).next().unwrap();
        // ä½¿ç”¨ title å±¬æ€§ç²å–å®Œæ•´æ›¸å
let title = title_element.value().attr(&quot;title&quot;).unwrap_or(&quot;Unknown Title&quot;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¾åœ¨å†æ¬¡åŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt; å°±å¯ä»¥å–å¾—å®Œæ•´çš„æ›¸åäº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2e77907a852ede12&quot;&gt;éŒ¯èª¤è™•ç†&lt;/h2&gt;

&lt;p&gt;å¦‚æœçœ‹ç¾åœ¨çš„ç¨‹å¼ç¢¼ï¼Œæ‡‰è©²å¯ä»¥ç™¼ç¾æœ‰å¤§é‡çš„ &lt;code&gt;unwrap()&lt;/code&gt;ã€‚å…¶å¯¦é€™å€‹æ˜¯éŒ¯èª¤è™•ç†çš„æ–¹å¼ä¹‹ä¸€ï¼Œä½†æ˜¯ä¸¦ä¸èƒ½ç®—æ˜¯éå¸¸å¥½çš„ä½œæ³•ï¼Œå› ç‚ºç•¶æœ‰ç¢°åˆ°éŒ¯èª¤çš„æ™‚å€™ï¼Œåœ¨ &lt;code&gt;unwrap()&lt;/code&gt; é€™è£¡å°±æœƒç«‹å³çµ‚æ­¢æ‰€æœ‰ç¨‹å¼ï¼Œä¸æœƒå†ç¹¼çºŒå¾€ä¸‹èµ°äº†ï¼Œå¦‚æœæ˜¯æ‹¿ä¾†é–‹ç™¼åˆæœŸå¯èƒ½å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯é‚„æ˜¯è¦é æƒ³é‡åˆ°éŒ¯èª¤æœƒæ€éº¼ç¹¼çºŒå¾€ä¸‹è·‘ä½ çš„ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;

&lt;p&gt;é€™è£¡å°±æœƒç”¨åˆ° Rust æœ¬èº«è‡ªå¸¶çš„å·¥å…·ï¼Œå¾ &lt;code&gt;std&lt;/code&gt; ä¹Ÿå°±æ˜¯ Rust çš„ standard library ä¸­ä½¿ç”¨ &lt;code&gt;Error&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;use std::error::Error;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‚£éº¼è¦æ€éº¼ä½¿ç”¨å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæœƒç”¨åˆ° &lt;code&gt;Result&lt;/code&gt; é€™å€‹ enumï¼Œå®ƒæ˜¯ä¸€å€‹é€™æ¨£çš„çµæ§‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;pub enum Result&amp;lt;T, E&amp;gt; {
    Ok( /* â€¦ */ ),
    Err( /* â€¦ */ ),
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŸæœ¬æ‡‰è©²ä¹Ÿè¦ä½¿ç”¨é—œéµå­— &lt;code&gt;use&lt;/code&gt; ä¾†ä½¿ç”¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;use std::result::Result;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸éå¯èƒ½å› ç‚º &lt;code&gt;Result&lt;/code&gt; æ˜¯æ¯”è¼ƒå¸¸ç”¨ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦ç‰¹åˆ¥ä½¿ç”¨ &lt;code&gt;use&lt;/code&gt; ä¾†å¼•å…¥ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ç”¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;async fn main() -&amp;gt; Result&amp;lt;(), Box&amp;lt;dyn Error&amp;gt;&amp;gt; {
    // ...
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”±æ–¼ &lt;code&gt;Result&lt;/code&gt; æ˜¯ä¸€å€‹ enumï¼Œåªæœ‰å…©æ¢è·¯ï¼Œä¸æ˜¯æ­£ç¢ºå°±æ˜¯éŒ¯èª¤ï¼Œæ‰€ä»¥åœ¨ &lt;code&gt;main&lt;/code&gt; é€™è£¡è¨­ç½® &lt;code&gt;Result&lt;/code&gt; ä¹Ÿå°±ä»£è¡¨äº†è¦å›å‚³æ±è¥¿ï¼Œæˆ‘å€‘åœ¨æœ€å¾Œé¢æ“ºä¸Šä¸€å€‹ &lt;code&gt;Ok(())&lt;/code&gt; å°±å¥½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;unwrap&quot;&gt;å–ä»£ unwrap()&lt;/h3&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å…¶ä»–çš„éŒ¯èª¤å°±å¯ä»¥æŠŠæ‰€æœ‰çš„ &lt;code&gt;unwrap()&lt;/code&gt; éƒ½æ‹¿æ‰ï¼Œä½†æ˜¯é¸å– HTML çš„éƒ¨åˆ†å¦‚æœå£æ‰ï¼Œå¥½åƒä¹Ÿä¸éœ€è¦ç¹¼çºŒå¾€ä¸‹åŸ·è¡Œï¼Œæ‰€ä»¥æ›¿æ›æˆ &lt;code&gt;?&lt;/code&gt; è¡¨ç¤ºæš«ä¸è™•ç†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;let response = reqwest::get(url).await?;
let body = response.text().await?;
let document = Html::parse_document(&amp;amp;body);

let book_selector = Selector::parse(&quot;article.product_pod&quot;)?;
let title_selector = Selector::parse(&quot;h3 a&quot;)?;
let price_selector = Selector::parse(&quot;div.product_price .price_color&quot;)?;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;part-23705ea99a683cb&quot;&gt;å¯ä»¥åŠ ä¸Šå¤±æ•—å¾Œé¡¯ç¤ºçš„æ–‡å­—&lt;/h3&gt;

&lt;p&gt;è€Œåœ¨è¿´åœˆçš„éƒ¨åˆ†å¦‚æœæ‰¾ä¸åˆ°ç›¸å°æ‡‰çš„å…ƒç´ å°±å†æç¤ºä¸¦é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;for book in document.select(&amp;amp;book_selector) {
    let title_element = book.select(&amp;amp;title_selector).next().ok_or(&quot;æ‰¾ä¸åˆ° Title å…ƒç´ &quot;)?;
    let title = title_element
        .value()
        .attr(&quot;title&quot;)
        .ok_or(&quot;æ‰¾ä¸åˆ° Title å±¬æ€§&quot;)?;
    let price = book
        .select(&amp;amp;price_selector)
        .next()
        .ok_or(&quot;æ‰¾ä¸åˆ° Price å…ƒç´ &quot;)?
        .text()
        .collect::&amp;lt;String&amp;gt;();

        // ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;part-57e3069a57e74102&quot;&gt;æ‹¿å–å…¶ä»–é é¢çš„è³‡æ–™&lt;/h2&gt;

&lt;p&gt;ç”±æ–¼æœ€ä¸‹é¢æœ‰åˆ†é ï¼Œä»£è¡¨å…¶ä»–é é¢ä¹Ÿæœ‰è³‡æ–™é‚„æ²’æ’ˆå–ï¼Œè€Œç›®å‰åªæœ‰çˆ¬ç¬¬ä¸€é çš„è³‡æ–™ï¼Œæ‰€ä»¥æˆ‘å€‘æ¥ä¸‹ä¾†è©¦è‘—çˆ¬å®Œå…¨éƒ¨é é¢çš„è³‡æ–™ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å€‘å¯ä»¥å…ˆè§€å¯Ÿç¬¬ä¸€é è·Ÿå…¶ä»–é çš„å·®ç•°åœ¨å“ªã€‚&lt;/p&gt;

&lt;p&gt;å…¶å¯¦æ•´å€‹ HTML æ¶æ§‹éƒ½å·®ä¸å¤šï¼Œæœ€å¤§çš„å·®åˆ¥åªåœ¨æ–¼ URL è€Œå·²ï¼Œä¾‹å¦‚ç¬¬ä¸€é æ˜¯ &lt;code&gt;https://books.toscrape.com/&lt;/code&gt;ï¼Œè€Œç¬¬äºŒé å‰‡æ˜¯ &lt;code&gt;https://books.toscrape.com/catalogue/page-2.html&lt;/code&gt;ï¼Œå‰©ä¸‹å¹¾é çš„å·®åˆ¥éƒ½åªæ˜¯åœ¨ page ä¹‹å¾Œçš„æ•¸å­—å·®åˆ¥è€Œå·²ï¼Œæ¥ä¸‹ä¾†æ¯”è¼ƒæ–¹ä¾¿çš„ä½œæ³•å‰‡æ˜¯å»ºç«‹ä¸€å€‹ clientã€‚&lt;/p&gt;

&lt;h2 id=&quot;client&quot;&gt;å»ºç«‹ client ä¸¦æ¸¬è©¦æ˜¯å¦å¯ä»¥çˆ¬åˆ°ç¬¬äºŒé &lt;/h2&gt;

&lt;p&gt;é€™ä¸€æ­¥é©Ÿè¦å…ˆä½¿ç”¨ &lt;code&gt;reqwest&lt;/code&gt; å»ºç«‹ä¸€å€‹ clientï¼Œæ¯”è¼ƒæ–¹ä¾¿å» get ä¸åŒé é¢çš„ URLã€‚ä¸‹é¢çš„ç¨‹å¼ç¢¼æœƒç”¨è¿´åœˆå…ˆè©¦è·‘å€‹å…©åœˆï¼Œçœ‹çœ‹å…©é æ˜¯ä¸æ˜¯éƒ½èƒ½æˆåŠŸé€£åˆ°ï¼Œç„¶å¾Œå°å‡ºçˆ¬åˆ°çš„é é¢è·Ÿç‹€æ…‹ç¢¼æ˜¯å¦æ­£ç¢ºé‚„æœ‰ç¬¦åˆæˆ‘å€‘æƒ³è¦çš„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;async fn main() -&amp;gt; Result&amp;lt;(), Box&amp;lt;dyn Error&amp;gt;&amp;gt; {
    let client = reqwest::Client::builder().build()?;

    for page in 1..=2 {
        let url = if page == 1 {
            &quot;https://books.toscrape.com&quot;.to_string()
        } else {
            format!(&quot;https://books.toscrape.com/catalogue/page-{}.html&quot;, page)
        };

        println!(&quot;æ­£åœ¨çˆ¬å–é é¢: {}&quot;, url);

        let response = client.get(&amp;amp;url).send().await?;
        println!(&quot;ç‹€æ…‹: {}&quot;, response.status());

        if !response.status().is_success() {
            println!(&quot;ç‹€æ…‹ç¢¼: {}&quot;, response.status());
            continue;
        }
    }

    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™è£¡å¯ä»¥è©¦è©¦çœ‹æŠŠç¶²é æ”¹æˆéŒ¯èª¤çš„æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Œä¾‹å¦‚æŠŠ URL æ•…æ„æ‰“éŒ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/EbXBMgj.png&quot; alt=&quot;20240913005349&quot;&gt;&lt;/p&gt;

&lt;p&gt;åˆ°é€™ä¸€æ­¥æ‡‰è©²éƒ½èƒ½æˆåŠŸè®“å…©å€‹é é¢çš„ç‹€æ…‹éƒ½æ˜¯ 200ï¼Œæ‰€ä»¥å°±å¯ä»¥ç¹¼çºŒå¾€ä¸‹é€²è¡Œã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-c5d1c9c23b78b396&quot;&gt;è¨ˆç®—æ¯é æŠ“åˆ°çš„æ›¸æ˜¯å¦æ­£ç¢º&lt;/h2&gt;

&lt;p&gt;å¦‚æœæª¢æŸ¥æ¯ä¸€é æ‡‰è©²å¯ä»¥ç™¼ç¾æ¯ä¸€é çš„æ›¸éƒ½æ˜¯å›ºå®šçš„ 20 æœ¬ï¼Œæ‰€ä»¥æª¢æŸ¥ä¸€ä¸‹ç”¨é¸å–å™¨åœ¨ç¬¬äºŒé æ˜¯å¦ä¹Ÿæ­£å¸¸ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;for page in 1..=2 {
    // çœç•¥
    let body = response.text().await?;
    let document = Html::parse_document(&amp;amp;body);
    let book_selector = Selector::parse(&quot;article.product_pod&quot;)?;
    // çœç•¥

    let mut book_count = 0;

    for _book in document.select(&amp;amp;book_selector) {
        // çœç•¥
        book_count += 1;
    }

    println!(&quot;åœ¨ç¬¬ {} é æ‰¾åˆ° {} æœ¬æ›¸&quot;, page, book_count);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;book_count&lt;/code&gt; æ˜¯ä¸€å€‹æœƒä¸€ç›´å¾€ä¸ŠåŠ çš„å€¼ï¼Œä»£è¡¨é€™å€‹å€¼éœ€è¦ä¸€ç›´æ”¹è®Šï¼Œä¸¦ä¸”æœ€å¾Œæœƒä½¿ç”¨é€™å€‹æ”¹è®Šå¾Œçš„è®Šæ•¸ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ &lt;code&gt;mut&lt;/code&gt; é€™å€‹é—œéµå­—ä¾†è¡¨ç¤ºé€™å€‹è®Šæ•¸æ˜¯å¯è®Šã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œ for è¿´åœˆçš„ &lt;code&gt;book&lt;/code&gt; æ²’æœ‰åŠ ä¸Š &lt;code&gt;_&lt;/code&gt; çš„è©±ï¼Œæˆ–è€…æ‡‰è©²èªªåœ¨ Rust çš„ç¨‹å¼ç¢¼å¦‚æœæœ‰å®šç¾©ä½†æ²’ä½¿ç”¨ï¼Œåœ¨çµ‚ç«¯æ©Ÿæ‡‰è©²å¯ä»¥çœ‹åˆ°ä¸€äº›è­¦å‘Šï¼Œé€™ä¸æ˜¯éŒ¯èª¤ï¼Œåªæ˜¯ Rust æœƒå¾ˆ nice åœ°ï¼ˆé›å©†ï¼‰æé†’æ‚¨æœ‰è®Šæ•¸æ²’ä½¿ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è¨»è§£æ‰è©²è®Šæ•¸ï¼Œæˆ–è€…åœ¨è®Šæ•¸å‰é¢åŠ ä¸Š &lt;code&gt;_&lt;/code&gt;ï¼Œè¡¨ç¤ºç›®å‰æš«æ™‚ç”¨ä¸åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;ç•¶ç„¶å¦‚æœä½ ä¸ä»‹æ„é€™äº›è­¦å‘Šï¼Œä¹Ÿå¯ä»¥ä¸ç”¨ç†ä»–ã€‚&lt;/p&gt;

&lt;p&gt;åŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt; ä¹‹å¾Œæ‡‰è©²æœƒçœ‹åˆ°å…©é éƒ½èƒ½æ’ˆåˆ° 20 æœ¬æ›¸ï¼Œæ‰€ä»¥å°±å¯ä»¥è©¦è‘—è·‘å®Œå…¨éƒ¨çš„é é¢ï¼Œåªè¦æŠŠè¿´åœˆçš„æ•¸å­—æ”¹æˆæœ€å¤§é æ•¸å°±å¥½ï¼Œä»¥é€™å€‹ç¶²ç«™ä¾†çœ‹ï¼Œæ”¹æˆ 50 ä¹‹å¾Œè·‘çœ‹çœ‹ï¼Œè§€å¯Ÿä¸€ä¸‹æ¯ä¸€é ç‹€æ…‹æ˜¯ä¸æ˜¯æ­£å¸¸ï¼Œæ‰¾åˆ°çš„æ›¸æœ¬æ˜¯ä¸æ˜¯æ­£ç¢ºçš„æ•¸å­—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/HS1TzKe.png&quot; alt=&quot;20240913005408&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;part-d2e175ceed2fd712&quot;&gt;å¦‚æœè¶…éé é¢æœƒæ€éº¼æ¨£ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘çŸ¥é“ç¾åœ¨ç¸½å…±æœ‰ 50 é ï¼Œä½†å¦‚æœæƒ³è¦çœ‹çœ‹è·‘è¶…é 50 é æœƒæ€éº¼æ¨£ï¼Œæˆ‘å€‘ä¾†è©¦è©¦çœ‹ï¼Œæ”¹æˆ 51ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å¯¦å°±è·Ÿå‰é¢æ•…æ„æŠŠ URL æ”¹æˆéŒ¯èª¤ä¸€æ¨£ï¼Œåœ¨ç¬¬ä¸€å€‹è¿´åœˆå°±æœƒå‡ºç¾éŒ¯èª¤ï¼Œç„¶å¾ŒæŒ‰ç…§æˆ‘å€‘è¨­æƒ³çš„éŒ¯èª¤ä¸¦å›å‚³éŒ¯èª¤è¨Šæ¯ï¼Œæ‰€ä»¥ä½¿ç”¨æ­£ç¢ºçš„éŒ¯èª¤è™•ç†æ˜¯éå¸¸å¥½çš„ä¸€ä»¶äº‹ï¼Œé€™è£¡å¦‚æœæ˜¯ç”¨ &lt;code&gt;unwrap()&lt;/code&gt; é›–ç„¶ä¹Ÿå¯èƒ½æœƒå›å‚³éŒ¯èª¤è¨Šæ¯ï¼Œä½†é€™ç¨®éŒ¯èª¤æ˜¯æˆ‘å€‘å¯ä»¥æŒæ¡ä¸¦è™•ç†çš„ã€‚&lt;/p&gt;

&lt;h2 id=&quot;json&quot;&gt;å„²å­˜å®Œæ•´è³‡æ–™ -&amp;gt; JSON&lt;/h2&gt;

&lt;p&gt;å…¶å¯¦ç¾åœ¨è·‘ä¸‹ä¾†æ˜¯å¯ä»¥åœ¨çµ‚ç«¯æ©Ÿé¡¯ç¤ºå…¨éƒ¨ä¸¦ä¸”å®Œæ•´çš„æ›¸åä»¥åŠåƒ¹éŒ¢ï¼Œä½† 50 é çš„è³‡æ–™é‡æ»¿å¤šçš„ï¼Œè€Œä¸”ä¹Ÿä¸å¥½é–±è®€ï¼Œæ‰€ä»¥è®“æˆ‘å€‘è©¦è‘—æŠŠè³‡æ–™å­˜æˆ JSONã€‚&lt;/p&gt;

&lt;h3 id=&quot;crates-json&quot;&gt;å®‰è£ crates ä¾†è™•ç† JSON&lt;/h3&gt;

&lt;p&gt;æˆ‘å€‘éœ€è¦å…©ç¨® crates ä¾†è™•ç† JSONï¼Œé€™è£¡æ¨è–¦ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crates.io/crates/serde&quot;&gt;serde&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crates.io/crates/serde_json&quot;&gt;serde_json&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å®‰è£ serde éœ€è¦é–‹å•Ÿå®Œæ•´çš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨å®‰è£å¯ä»¥é€™æ¨£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash!&quot;&gt;cargo add serde -F derive
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;serde æœƒæŒ‰ç…§æˆ‘å€‘è¨­å®šçš„ struct å»è§£æè³‡æ–™ï¼Œç„¶å¾Œå†ç¶“ç”± serde_json è½‰å‡º JSONã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/F33sAl4.png&quot; alt=&quot;20240913005422&quot;&gt;&lt;/p&gt;

&lt;p&gt;struct æ˜¯ Rust ä¸­å®šç¾©å‹åˆ¥çš„ä¸€ç¨®æ–¹å¼ï¼Œå¯ä»¥æƒ³åƒæˆé¡ä¼¼ TS çš„ interfaceã€‚&lt;/p&gt;

&lt;h3 id=&quot;serde-file-struct&quot;&gt;ä½¿ç”¨ serde ä»¥åŠ File ä¸¦å®šç¾© struct&lt;/h3&gt;

&lt;p&gt;é€™ä¸€æ­¥éœ€è¦ä½¿ç”¨å‰›å‰›å®‰è£çš„ serde ç„¶å¾Œé‚„éœ€è¦ä½¿ç”¨ Rust å…§å»ºçš„ File ä¾†è½‰å‡ºæª”æ¡ˆï¼Œç„¶å¾Œé‚„éœ€è¦å®šç¾© JSON çš„æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯ structï¼Œç„¶å¾Œä½¿ç”¨ serde ä¾†æ¨™è¨˜ï¼Œæœ€å¾Œæ‰èƒ½çµ¦ serde_json ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;use serde::{Deserialize, Serialize};
use std::fs::File;

#[derive(Serialize, Deserialize)]
struct Book {
    title: String,
    price: String,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;vec&quot;&gt;å»ºç«‹ä¸€å€‹ Vec&lt;/h3&gt;

&lt;p&gt;å»ºç«‹å®Œ JSON çš„æ ¼å¼ä¹‹å¾Œï¼Œç”±æ–¼ JSON æ˜¯ç”±ä¸€å€‹é™£åˆ—åŒ…è‘—ç‰©ä»¶é€™æ¨£çš„æ ¼å¼ï¼Œæ‰€ä»¥æˆ‘å€‘é‚„éœ€è¦å»ºç«‹ä¸€å€‹é™£åˆ—ä¾†ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¸éåœ¨ Rust çš„ä¸–ç•Œä¸­ï¼Œé™£åˆ—ï¼ˆarrayï¼‰åªèƒ½æ˜¯ä¸€å€‹å›ºå®šé•·åº¦ï¼Œä¸¦ä¸”æœ‰é•·åº¦é™åˆ¶ï¼Œæ‰€ä»¥é™¤éä½ ç¢ºåˆ‡çŸ¥é“ä½ çš„è³‡æ–™é•·åº¦ï¼Œæ‰€ä»¥ä¸€èˆ¬å‹•æ…‹è³‡æ–™æœƒä½¿ç”¨å‘é‡ (vector)ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;let client = reqwest::Client::builder().build()?;
let mut books = Vec::new();
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;json&quot;&gt;æŠŠæ¯æœ¬æ›¸å¡é€² JSON&lt;/h3&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å°±å¯ä»¥åœ¨ &lt;code&gt;book_selector&lt;/code&gt; è¿´åœˆä¸­æŠŠæ¯æœ¬æ›¸éƒ½å¡é€² &lt;code&gt;books&lt;/code&gt; é€™å€‹ vector ç•¶ä¸­ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt; for book in document.select(&amp;amp;book_selector) {
    book_count += 1;
    let title_element = book.select(&amp;amp;title_selector).next().unwrap();
    let title = title_element
        .value()
        .attr(&quot;title&quot;)
        .ok_or(&quot;æ‰¾ä¸åˆ° Title å±¬æ€§&quot;)?;
    let price = book
        .select(&amp;amp;price_selector)
        .next()
        .ok_or(&quot;æ‰¾ä¸åˆ° Price å…ƒç´ &quot;)?
        .text()
        .collect::&amp;lt;String&amp;gt;();

    books.push(Book {
        title: title.to_string(),
        price,
    });

    println!(&quot;æ›¸å: {}&quot;, title);
    // println!(&quot;åƒ¹æ ¼: {}&quot;, price);
    println!(&quot;---&quot;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œä½¿ç”¨ serde_json å’Œ File å°‡è³‡æ–™å¯«æˆä¸€å€‹ json æª”æ¡ˆã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;let file = File::create(&quot;books.json&quot;)?;
serde_json::to_writer_pretty(file, &amp;amp;books)?;

println!(&quot;è³‡æ–™å·²å­˜åˆ° books.json&quot;);

Ok(())
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œä½ å¯èƒ½æœƒè¦ºå¾—æœ‰é»å¥‡æ€ªï¼Œç‚ºä»€éº¼å°‡ &lt;code&gt;title&lt;/code&gt; è·Ÿ &lt;code&gt;price&lt;/code&gt; å¡å…¥çš„æ™‚å€™ï¼Œ&lt;code&gt;price&lt;/code&gt; ä¸¦æ²’æœ‰åƒ &lt;code&gt;title&lt;/code&gt; é‚£æ¨£è½‰æˆ stringã€‚&lt;/p&gt;

&lt;p&gt;é€™æ˜¯å› ç‚º &lt;code&gt;Book&lt;/code&gt; åœ¨ struct ä¸­å®šç¾©æˆ Stringï¼Œç„¶å¾Œ &lt;code&gt;price&lt;/code&gt; æœ€å¾Œæœ‰è½‰æˆ Stringï¼Œè€Œ &lt;code&gt;title&lt;/code&gt; æ²’æœ‰ï¼Œå®ƒçš„å‹åˆ¥åŸæœ¬æ˜¯ &amp;amp;strï¼ˆå­—ä¸²åˆ‡ç‰‡ï¼‰ã€‚æ‰€ä»¥ä½ è¦åœ¨ push çš„æ™‚å€™è½‰æˆ String æˆ–è€…æ˜¯é€™æ¨£ä¹Ÿå¯ä»¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;for book in document.select(&amp;amp;book_selector) {
    book_count += 1;
    let title_element = book.select(&amp;amp;title_selector).next().unwrap();
    let title = title_element
        .value()
        .attr(&quot;title&quot;)
        .ok_or(&quot;æ‰¾ä¸åˆ° Title å±¬æ€§&quot;)?
        .to_string();
    let price = book
        .select(&amp;amp;price_selector)
        .next()
        .ok_or(&quot;æ‰¾ä¸åˆ° Price å…ƒç´ &quot;)?
        .text()
        .collect::&amp;lt;String&amp;gt;();

    books.push(Book {
        title,
        price,
    });
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œä½ å°±å¯ä»¥åŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt; ä¸¦ä¸”å°‡è³‡æ–™å­˜æˆ JSON äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;excel&quot;&gt;å¦‚æœæƒ³å­˜æˆ Excel å¯ä»¥å—ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;æ²’å•é¡Œï¼Rust çš„ crates ä¹Ÿå¯ä»¥æ‰¾å¾—åˆ°å°ˆé–€è™•ç† excel çš„å¥—ä»¶ï¼Œé‚£å°±æ˜¯ &lt;a href=&quot;https://crates.io/crates/xlsxwriter&quot;&gt;xlsxwriter&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;xlsxwriter&quot;&gt;å®‰è£ xlsxwriter ä¸¦ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;æŒ‰ç…§èªªæ˜å®‰è£å®Œä¹‹å¾Œä¸¦ä½¿ç”¨ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;use xlsxwriter::Workbook;
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;let workbook = Workbook::new(&quot;books.xlsx&quot;)?;
let mut sheet = workbook.add_worksheet(None)?;

sheet.write_string(0, 0, &quot;æ›¸å&quot;, None)?;
sheet.write_string(0, 1, &quot;åƒ¹æ ¼&quot;, None)?;

let mut row = 1;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è®Šæ•¸ &lt;code&gt;row&lt;/code&gt; æœƒæŒ‰ç…§è³‡æ–™ç­†æ•¸ä¸€ç›´å¢åŠ æ¬„ä½ï¼Œæ‰€ä»¥éœ€è¦è®“ä»–æ˜¯ä¸€å€‹å¯è®Šè®Šæ•¸ã€‚
ç„¶å¾Œåœ¨è¿´åœˆä¸­å¯«å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;for book in document.select(&amp;amp;book_selector) {
    book_count += 1;
    let title_element = book.select(&amp;amp;title_selector).next().unwrap();
    let title = title_element
        .value()
        .attr(&quot;title&quot;)
        .ok_or(&quot;æ‰¾ä¸åˆ° Title å±¬æ€§&quot;)?;
    let price = book
        .select(&amp;amp;price_selector)
        .next()
        .ok_or(&quot;æ‰¾ä¸åˆ° Price å…ƒç´ &quot;)?
        .text()
        .collect::&amp;lt;String&amp;gt;();

    sheet.write_string(row, 0, title, None)?;
    sheet.write_string(row, 1, &amp;amp;price, None)?;

    books.push(Book {
        title: title.to_string(),
        price,
    });

    row += 1;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½ å¯èƒ½ç™¼ç¾åˆ° sheet åœ¨å¯«å…¥åƒ¹æ ¼æ¬„ä½æ™‚ï¼Œ&lt;code&gt;price&lt;/code&gt; å¯«æˆäº† &lt;code&gt;&amp;amp;price&lt;/code&gt;ã€‚
&lt;code&gt;&amp;amp;&lt;/code&gt; æ˜¯ Rust ä¸­æ‰€æœ‰æ¬Šå¸¸ç”¨çš„ä¸€å€‹å€Ÿç”¨æ¦‚å¿µã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ‹¿æ‰çš„è©±ï¼Œé€™è£¡ Cargo æœƒæç¤ºä½ ä½¿ç”¨ &lt;code&gt;&amp;amp;&lt;/code&gt;ï¼Œä¸ç„¶æœƒå‡ºéŒ¯ã€‚&lt;/p&gt;

&lt;p&gt;åŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt; æ‡‰è©²å°±å¯ä»¥å°‡è³‡æ–™å­˜æˆ excelã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-65cea7fea4c33576&quot;&gt;è‡ªå‹•å–å¾—å…¨éƒ¨é é¢è³‡æ–™&lt;/h2&gt;

&lt;p&gt;ç›®å‰å·²ç¶“å¯ä»¥çˆ¬å®Œå…¨éƒ¨é é¢çš„è³‡æ–™ï¼Œä¸éå¦‚æœæœªä¾†ç¶²ç«™è³‡æ–™è®Šå¤šçš„è©±ï¼Œé‚£éº¼æ˜¯ä¸æ˜¯ä»£è¡¨æœƒè¶…é 50 é ï¼Ÿ
é›–ç„¶æ˜¯å¯ä»¥å†æ‰‹å‹•ä¿®æ”¹é æ•¸ï¼Œä½†æˆ‘å€‘å¯ä»¥å»åµæ¸¬å…¨éƒ¨çš„ç¸½é æ•¸ï¼Œç„¶å¾Œå°±å¯ä»¥è‡ªå‹•çˆ¬å®Œå…¨éƒ¨é æ•¸çš„è³‡æ–™äº†ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å€‘å¯ä»¥é€éä¸€å€‹è‡ªå®šç¾©çš„ function ä¾†åšé€™ä»¶äº‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;async fn get_total_pages(client: &amp;amp;reqwest::Client) -&amp;gt; Result&amp;lt;u32, Box&amp;lt;dyn Error&amp;gt;&amp;gt; {
    let url = &quot;https://books.toscrape.com/index.html&quot;;
    let response = client.get(url).send().await?;
    let body = response.text().await?;
    let document = Html::parse_document(&amp;amp;body);

    let pager_selector = Selector::parse(&quot;ul.pager li.current&quot;)?;
    let pager_text = document
        .select(&amp;amp;pager_selector)
        .next()
        .ok_or(&quot;ç„¡æ³•æ‰¾åˆ°åˆ†é è³‡æ–™&quot;)?
        .text()
        .collect::&amp;lt;String&amp;gt;();

    let total_pages = pager_text
        .split_whitespace()
        .last()
        .ok_or(&quot;ç„¡æ³•å–å¾—ç¸½é æ•¸&quot;)?
        .parse::&amp;lt;u32&amp;gt;()?;

    Ok(total_pages)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™è£¡æœƒå€Ÿç”¨ &lt;code&gt;client&lt;/code&gt; ä¾†ä½¿ç”¨é¸å–å™¨ï¼Œç„¶å¾Œä¸¦é€éåˆ†é çš„éƒ¨åˆ†å»è¨ˆç®—ç¸½é æ•¸ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Izj4Nyn.png&quot; alt=&quot;20240913005439&quot;&gt;&lt;/p&gt;

&lt;p&gt;é€™è£¡å°±å¯ä»¥å–ä»£æ‰åŸæœ¬çš„æ•¸å­—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust!&quot;&gt;    // å–å¾—ç¸½é æ•¸
let total_pages = get_total_pages(&amp;amp;client).await?;
println!(&quot;ç¸½é æ•¸: {}&quot;, total_pages);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŸ·è¡Œå¾Œï¼Œä¸€æ¨£å¯ä»¥æ­£å¸¸å¯«å…¥ï¼Œä½†é€™æ¨£çš„å‡½å¼å¯ä»¥å¹«åŠ©æˆ‘å€‘å‹•æ…‹å»è¨ˆç®—ç¸½é æ•¸ï¼Œç„¶å¾Œå–å¾—å…¨éƒ¨çš„è³‡æ–™ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Fri, 13 Sep 2024 00:43:33 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-2024-hello-world.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 7 minutes</category>
    </item>
    <item>
      <title>Type or Interface?</title>
      <link>https://railquill.vercel.app/type-or-interface.html</link>
      <description>TypeScript çš„ type å’Œ interface æœ‰ä»€éº¼ä¸åŒï¼Ÿ</description>
      <content:encoded><![CDATA[
        &lt;p&gt;åœ¨é–‹ç™¼ TS ä¸€æ®µæ™‚é–“å¾Œï¼Œç™¼è¦º type è·Ÿ interface é€™å…©å€‹æ±è¥¿çœ‹èµ·ä¾†å¾ˆåƒï¼Œä¸€ç›´ä¸å¤ªæ¸…æ¥šä½¿ç”¨çš„æ™‚æ©Ÿæ˜¯ä»€éº¼ï¼Œæ‰€ä»¥ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå¯«äº†ä¸€ç¯‡æ–‡ç« è¨˜éŒ„ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæˆ‘åƒè€ƒäº†é€™éƒ¨å½±ç‰‡ï¼Œæœ‰äº›è§€é»å¾ˆæœ‰è¶£ï¼š&lt;/p&gt;



&lt;p&gt;åœ¨é–‹å§‹ä¹‹å‰ï¼Œå…ˆç°¡å–®ä»‹ç´¹ä¸€ä¸‹é€™å…©ç¨®æ±è¥¿ï¼Œä¸¦æ¯”è¼ƒä¸€ä¸‹å…©è€…çš„å·®ç•°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;type&quot;&gt;ä»€éº¼æ˜¯ typeï¼Ÿ&lt;/h2&gt;

&lt;p&gt;type æ˜¯ TypeScript ä¸­ç”¨ä¾†å®šç¾©å‹åˆ¥åˆ¥åçš„é—œéµå­—ï¼Œå®ƒå¯ä»¥å®šç¾©ä»»ä½•å‹åˆ¥ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;type UserType = {
    name: string
    age: number
}

const user: UserType = {
    name: &quot;Bucky&quot;,
    age: 18,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;interface&quot;&gt;ä»€éº¼æ˜¯ interface&lt;/h2&gt;

&lt;p&gt;interface æ˜¯ç”¨ä¾†å®šç¾©ç‰©ä»¶å‹åˆ¥çš„ä¸€ç¨®æ–¹å¼ï¼Œå®ƒä¸»è¦ç”¨æ–¼æè¿°ç‰©ä»¶çš„å½¢ç‹€ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;interface UserInter {
    name: string
    age: number
}

const user: UserInter = {
    name: &quot;Bucky&quot;,
    age: 18,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;typescript&quot;&gt;TypeScript å®˜æ–¹æ–‡ä»¶æ¨è–¦å“ªä¸€å€‹ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;åœ¨å®˜æ–¹æ–‡ä»¶ä¸­ï¼Œ&lt;a href=&quot;https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#differences-between-type-aliases-and-interfaces&quot;&gt;Differences Between Type Aliases and Interfaces&lt;/a&gt;é€™ä¸€æ®µè½æœ€å¾Œæœ‰ä¸‹ä¸€å€‹çµè«–ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For the most part, you can choose based on personal preference, and TypeScript will tell you if it needs something to be the other kind of declaration. If you would like a heuristic, use interface until you need to use features from type.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;interface&quot;&gt;interface çš„å±€é™æ€§&lt;/h2&gt;

&lt;p&gt;åœ¨ Kyle çš„å½±ç‰‡ç•¶ä¸­ï¼Œä»–æåˆ°äº† interface åªèƒ½ç”¨åœ¨ç‰©ä»¶ä¸Šï¼Œè€Œä¸åƒ type æ¯”è¼ƒéˆæ´»ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;type StringType = string

const user: StringType = &quot;Bucky&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æ˜¯ interface æ²’è¾¦æ³•é€™æ¨£åšï¼Œé€™æ¨£åšå°±æœƒå£æ‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;interface StringInter = string

const user: StringInter = &quot;Bucky&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœƒè·Ÿä½ èªªï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&#39;string&#39; only refers to a type, but is being used as a value here.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‚£éº¼ type é‚„å¯ä»¥åšåˆ°ä»€éº¼å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h2 id=&quot;type&quot;&gt;type çš„éˆæ´»&lt;/h2&gt;

&lt;p&gt;ä¾‹å¦‚ä¸€å€‹è®Šæ•¸å¯èƒ½æœ‰å¤šå€‹å‹åˆ¥ï¼Œtype å¯ä»¥å®šç¾©è¯åˆå‹åˆ¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;type IdType = string | number

const orderId: IdType = &quot;123&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;type é‚„å¯ä»¥ç”¨æ–¼å®šç¾©äº¤å‰å‹åˆ¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;type A = { a: string }
type B = { b: number }
type AB = A &amp;amp; B

const ab: AB = { a: &quot;hello&quot;, b: 42 }
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;interface&quot;&gt;interface çš„æ“´å……æ€§&lt;/h2&gt;

&lt;p&gt;interface å¯ä»¥é€šé &lt;code&gt;extends&lt;/code&gt; é—œéµå­—é€²è¡Œæ“´å……ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;interface A {
  age: number
}

interface User extends A {
  name: string
}

const user: User = {
  name: &quot;John&quot;,
  age: 30,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æ˜¯ type ä¹Ÿå¯ä»¥é€šéäº¤å‰å‹åˆ¥å¯¦ç¾é¡ä¼¼çš„æ“´å……ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;type User = {
  name: string
} &amp;amp; {
  age: number
}

const user: User = {
  name: &quot;John&quot;,
  age: 30,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;type&quot;&gt;type çš„ç¨ç‰¹ä¹‹è™•&lt;/h2&gt;

&lt;p&gt;type å¯ä»¥ç”¨æ–¼å®šç¾©è¯åˆå‹åˆ¥çš„ç‰©ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript!&quot;&gt;type User = {
  name: string
} | {
  age: number
}

const user1: User = { name: &quot;John&quot; }
const user2: User = { age: 30 }
const user3: User = { name: &quot;John&quot;, age: 30 } // é€™ä¹Ÿæ˜¯åˆæ³•çš„
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ˜¯ interface ç„¡æ³•ç›´æ¥å¯¦ç¾çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;interface&quot;&gt;interface çš„ç¨ç‰¹ç‰¹æ€§ï¼šå®£å‘Šåˆä½µ&lt;/h2&gt;

&lt;p&gt;å‰é¢è¬›äº†é€™éº¼å¤š type åšå¾—åˆ°ï¼Œä½† interface åšä¸åˆ°çš„åœ°æ–¹ã€‚ä¸é interface ç¢ºå¯¦æ˜¯æœ‰ä¸€å€‹ type ç„¡æ³•å¯¦ç¾çš„ç‰¹æ€§æ˜¯å®£å‘Šåˆä½µï¼ˆDeclaration Mergingï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¯ä»¥è®“ä½ åœ¨å¤šå€‹åœ°æ–¹å®šç¾©åŒä¸€å€‹ interfaceï¼ŒTypeScript æœƒè‡ªå‹•å°‡é€™äº›å®šç¾©åˆä½µã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;typescript&quot;&gt;interface Order {
  id: number
}

interface Order {
  name: string
}

interface Order {
  age: number
}

const order: Order = {
  id: 1,
  name: &quot;John&quot;,
  age: 30,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æˆ‘æƒ³ä¸åˆ°é€™æ¨£åšçš„å¥½è™•æœ‰ä»€éº¼ï¼Œåè€Œæœƒé™ä½å¯è®€æ€§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-6543023dced&quot;&gt;ç¸½çµ&lt;/h2&gt;

&lt;p&gt;å¦‚æœä½ éœ€è¦å®šç¾©è¤‡é›œçš„å‹åˆ¥ï¼ˆå¦‚è¯åˆå‹åˆ¥ã€äº¤å‰å‹åˆ¥ã€æ¢ä»¶é¡å‹ç­‰ï¼‰ï¼Œä½¿ç”¨ typeã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ ä¸»è¦æƒ³å®šç¾©ç‰©ä»¶çš„çµæ§‹ï¼Œä¸¦ä¸”å¯èƒ½éœ€è¦åœ¨æœªä¾†æ“´å±•é€™å€‹çµæ§‹ï¼Œé‚£å°±å¯è€ƒæ…®ä½¿ç”¨ interfaceã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œï¼Œç„¡è«–é¸æ“‡ type é‚„æ˜¯ interface éƒ½æ˜¯å¯ä»¥çš„ï¼Œé¸æ“‡å“ªä¸€å€‹ä¸»è¦å–æ±ºæ–¼å€‹äººåå¥½å’Œåœ˜éšŠç´„å®šã€‚æœ€é‡è¦çš„é‚„æ˜¯åœ¨æ•´å€‹å°ˆæ¡ˆä¸­ä¿æŒä¸€è‡´æ€§ï¼Œç¨‹å¼ç¢¼çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§é‚„æ˜¯æœ€é‡è¦çš„ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sun, 28 Jul 2024 15:55:31 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/type-or-interface.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 3 minutes</category>
    </item>
    <item>
      <title>Next.js å¦‚ä½•åœ¨ App Router ä¸­ä½¿ç”¨ Contextï¼Ÿ</title>
      <link>https://railquill.vercel.app/next-js-app-router-context.html</link>
      <description>ä»‹ç´¹å¦‚ä½•åœ¨ Next.js ä¸­ä½¿ç”¨ Contextã€‚</description>
      <content:encoded><![CDATA[
        &lt;p&gt;è‡ªå¾ Next.js æ¨å‡º App Router å¾Œï¼Œè®“é–‹ç™¼è€…å¯ä»¥è¼•é¬†ä½¿ç”¨å¼·å¤§çš„è·¯ç”±åŠŸèƒ½ï¼Œä½†æ˜¯åŒæ™‚ä¹Ÿå¸¶ä¾†ä¸€äº›åœ¨ä½¿ç”¨ React Hooks çš„é™åˆ¶ã€‚æœ¬ç¯‡æ–‡ç« å°‡æ¢è¨å¦‚ä½•åœ¨ App Router ä¸­æœ‰æ•ˆä½¿ç”¨ &lt;code&gt;useContext&lt;/code&gt; ç­‰ hooks ä¾†å‚³é propsï¼Œä¸¦è§£é‡‹ç‚ºä»€éº¼åœ¨æŸäº›æƒ…æ³ä¸‹ä¸èƒ½åœ¨ Server Component ä¸­ä½¿ç”¨ hooksã€‚&lt;/p&gt;

&lt;h2 id=&quot;app-router&quot;&gt;ä»€éº¼æ˜¯ App Routerï¼Ÿ&lt;/h2&gt;

&lt;p&gt;App Router æ˜¯ Next.js 13.4 ç‰ˆæœ¬å¼•å…¥çš„ä¸€é …é‡å¤§æ›´æ–°ï¼Œå®ƒå¾¹åº•æ”¹è®Šäº†æˆ‘å€‘ä½¿ç”¨ React çš„æ–¹å¼ã€‚é€™å€‹æ–°çš„è·¯ç”±ç³»çµ±æ˜¯åŸºæ–¼ React Server Componentsï¼Œç‚ºé–‹ç™¼è€…æä¾›äº†æ›´å¼·å¤§ã€æ›´éˆæ´»çš„å·¥å…·ä¾†å»ºç«‹é«˜æ•ˆèƒ½çš„ç¶²é æ‡‰ç”¨ã€‚&lt;/p&gt;

&lt;h3 id=&quot;app-router&quot;&gt;App Router çš„æ ¸å¿ƒç‰¹æ€§ï¼š&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;React Server Componentsï¼šé€™æ˜¯ App Router çš„åŸºç¤ã€‚Server Components åœ¨ Server ç«¯é‹ä½œï¼Œè€Œä¸æ˜¯åœ¨ Client ç«¯ã€‚é€™ä»£è¡¨è‘—å®ƒå€‘å¯ä»¥ç›´æ¥ä½¿ç”¨ä¼ºæœå™¨è³‡æºï¼ˆå¦‚ DataBaseï¼‰ï¼Œè€Œä¸ç”¨å°‡é€™äº›è³‡æºæš´éœ²çµ¦ Client ç«¯æˆ–é€šéç¶²çµ¡å‚³è¼¸ä¸å¿…è¦çš„æ•¸æ“šã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å·¢ç‹€è·¯ç”±å’Œ Layoutï¼šä½ å¯ä»¥è¼•é¬†äººæ€§åŒ–åœ°å»ºç«‹è¤‡é›œçš„è·¯ç”±çµæ§‹ï¼Œå¦‚ &lt;code&gt;/news/[id]/page&lt;/code&gt;ï¼Œä¸¦ç‚ºå¤šå€‹é é¢å®šç¾©å…±äº«çš„ layoutï¼Œä¸ç”¨å†è¨­å®šè¤‡é›œçš„è·¯ç”±è¨­å®šã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç°¡åŒ–çš„è³‡æ–™å–å¾—ï¼šé€šéä½¿ç”¨ React Server Components ä¸­æˆ–å¾ API å–å¾—è³‡æ–™ï¼Œä¸ç”¨å¯«è¤‡é›œçš„é‚è¼¯æˆ–ç®¡ç†ç‹€æ…‹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Streaming æ¸²æŸ“ï¼šApp Router å¯ä»¥å°‡è³‡æ–™å¾ Server Components ä»¥ JSON chunk response çš„å½¢å¼å‚³è¼¸åˆ° Client ç«¯ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å‚³è¼¸å…¨éƒ¨æ•¸æ“šã€‚é€™å¯ä»¥æ˜é¡¯å‡ç´šæ•ˆèƒ½å’Œç”¨æˆ¶é«”é©—ï¼Œç‰¹åˆ¥æ˜¯åœ¨ç¶²è·¯è¼ƒæ…¢çš„æƒ…æ³ä¸‹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å…§å»º SEO æ”¯æŒï¼šApp Router è‡ªå‹•ç”¢ç”Ÿ meta æ¨™ç±¤ã€sitemaps å’Œ robots.txt æ–‡ä»¶ï¼Œå¯ä»¥è®“æœç´¢å¼•æ“æ›´å¥½åœ°æ‰¾åˆ°ä½ çš„ç¶²ç«™ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ›´éˆæ´»çš„éœæ…‹å’Œå‹•æ…‹æ¸²æŸ“ï¼šé–‹ç™¼è€…å¯ä»¥é¸æ“‡æœ€é©åˆçš„æ¸²æŸ“ç­–ç•¥ï¼Œå¯¦ç¾æ›´ç²¾æº–çš„æ•ˆèƒ½å„ªåŒ–ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;app-router&quot;&gt;ç‚ºä»€éº¼ä½¿ç”¨ App Routerï¼Ÿ&lt;/h3&gt;

&lt;p&gt;ç¸½çš„ä¾†èªªï¼ŒApp Router ä¸åƒ…æ˜¯ Next.js çš„ä¸€å€‹æ–°åŠŸèƒ½ï¼Œå®ƒç‚ºé–‹ç™¼è€…æä¾›äº†å»ºç«‹æ›´å¿«ã€æ›´å®¹æ˜“ç¶­è­·çš„ Web App çš„å·¥å…·ã€‚
ç„¶è€Œï¼Œæ­£å¦‚æœ¬æ–‡æ¥ä¸‹ä¾†å°‡è¨è«–çš„ï¼Œé€™ç¨®æ–°çš„é–‹ç™¼æ¨¡å¼ä¹Ÿå¸¶ä¾†äº†ä¸€äº›æŒ‘æˆ°ï¼Œç‰¹åˆ¥æ˜¯åœ¨ä½¿ç”¨ React Hooks æ™‚ã€‚ç†è§£å¦‚ä½•åœ¨ App Router ç’°å¢ƒä¸­æ­£ç¢ºä½¿ç”¨ Context ç­‰åŠŸèƒ½ï¼Œå°æ–¼å……åˆ†åˆ©ç”¨é€™å€‹å¼·å¤§çš„æ–°å·¥å…·éå¸¸é‡è¦ã€‚&lt;/p&gt;

&lt;h2 id=&quot;server-component-hooks&quot;&gt;ç‚ºä»€éº¼ä¸èƒ½åœ¨ Server Component ä¸­ä½¿ç”¨ Hooksï¼Ÿ&lt;/h2&gt;

&lt;p&gt;åœ¨è¨è«–å…·é«”çš„ä½¿ç”¨æƒ…å¢ƒä¹‹å‰,æˆ‘å€‘éœ€è¦äº†è§£ç‚ºä»€éº¼ä¸èƒ½åœ¨ Server Components ä¸­ä½¿ç”¨ hooksã€‚&lt;/p&gt;

&lt;p&gt;Server Components æ˜¯åœ¨ Server ç«¯æ¸²æŸ“çš„ï¼Œè€Œ React hooks çš„ç”Ÿå‘½é€±æœŸå’Œç‹€æ…‹ç®¡ç†ï¼Œé€™äº›åœ¨ Server ç«¯æ˜¯ä¸å­˜åœ¨çš„ã€‚å› æ­¤ï¼Œåœ¨ Server Components ä¸­ä½¿ç”¨ hooks æœƒå°è‡´éŒ¯èª¤ã€‚&lt;/p&gt;

&lt;p&gt;è§£æ±ºé€™å€‹å•é¡Œçš„æ–¹æ³•æ˜¯å°‡éœ€è¦ä½¿ç”¨ hooks çš„éƒ¨åˆ†æ‹†åˆ†ç‚º Client Componentsã€‚åªè¦åœ¨è©² component æœ€ä¸Šæ–¹åŠ ä¸Š &lt;code&gt;&#39;use client&#39;&lt;/code&gt;ï¼Œé€™å€‹ä½œæ³•å°±æœƒæŠŠä¸€å€‹ component æ¨™è¨˜ç‚º Client Componentï¼ŒNext.js å°±æœƒçŸ¥é“é€™å€‹ component æ˜¯åœ¨ Client ç«¯é‹è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨ Server ç«¯ï¼Œæ‰€ä»¥åœ¨é€™è£¡å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ hooksã€‚&lt;/p&gt;

&lt;h2 id=&quot;props-child-component&quot;&gt;æƒ…å¢ƒï¼š åœ¨é é¢ä¸­å°‡ Props å‚³éåˆ° Child Component&lt;/h2&gt;

&lt;p&gt;è®“æˆ‘å€‘ä¾†çœ‹ä¸€å€‹éå¸¸å¸¸è¦‹çš„æƒ…æ³ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ä¸€å€‹ Next.js é é¢ä¸­ä½¿ç”¨ Context å°‡ props å‚³éåˆ° child componentï¼Œç”šè‡³æ˜¯æ›´æ·±å±¤çš„ child componentã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Vrv5oXr.png&quot; alt=&quot;20240714183523&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥ï¼Œæˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹ Contextï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx&quot;&gt;&#39;use client&#39;
import { createContext, useContext, useState, ReactNode } from &#39;react&#39;

type ThemeContextType = {
  theme: string
  setTheme: (theme: string) =&amp;gt; void
}

const ThemeContext = createContext&amp;lt;ThemeContextType | undefined&amp;gt;(undefined)

export const ThemeProvider: React.FC&amp;lt;{ children: ReactNode }&amp;gt; = ({
  children
}) =&amp;gt; {
  const [theme, setTheme] = useState(&#39;light&#39;)

  return (
    &amp;lt;ThemeContext.Provider value={{ theme, setTheme }}&amp;gt;
      {children}
    &amp;lt;/ThemeContext.Provider&amp;gt;
  )
}

export const useTheme = () =&amp;gt; {
  const context = useContext(ThemeContext)
  if (context === undefined) {
    throw new Error(&#39;useTheme must be used within a ThemeProvider&#39;)
  }
  return context
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¨å¾®ä»‹ç´¹ä¸€ä¸‹é€™å€‹ Contextã€‚ä¸€é–‹å§‹æœ€é‡è¦çš„å°±æ˜¯ &lt;code&gt;use client&lt;/code&gt;ï¼Œé€™æ¨£å°±å¯ä»¥åœ¨ Client Components ä¸­ä½¿ç”¨ hooksã€‚æ¥è‘—æˆ‘å€‘å»ºç«‹äº†ä¸€å€‹ &lt;code&gt;ThemeContext&lt;/code&gt;ï¼Œä¸¦ä¸”å»ºç«‹äº†ä¸€å€‹ &lt;code&gt;ThemeProvider&lt;/code&gt; ä¾†æä¾› theme çš„å€¼ï¼Œæœ€å¾Œæˆ‘å€‘å»ºç«‹äº†ä¸€å€‹ &lt;code&gt;useTheme&lt;/code&gt; hook ä¾†ä½¿ç”¨é€™å€‹ Contextã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ï¼Œåœ¨ Page ä¸­ä½¿ç”¨é€™å€‹ Contextï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx&quot;&gt;import { ThemeProvider } from &#39;@/context/themeContext&#39;

export default function Home() {
  return (
    &amp;lt;ThemeProvider&amp;gt;
      &amp;lt;main&amp;gt;&amp;lt;/main&amp;gt;
    &amp;lt;/ThemeProvider&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ°é€™ä¸€æ­¥ï¼Œä¸ç®¡æ˜¯åœ¨ç•«é¢ä¸­çš„å“ªå€‹åœ°æ–¹ï¼Œåªè¦æ˜¯åœ¨ &lt;code&gt;ThemeProvider&lt;/code&gt; çš„å­å…ƒç´ ä¸­ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ &lt;code&gt;useTheme&lt;/code&gt; ä¾†å–å¾— theme çš„å€¼ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œå¯ä»¥æ¸¬è©¦ä¸€ä¸‹å¦‚æœæŠŠ Context çš„ &lt;code&gt;&#39;use client&#39;&lt;/code&gt; æ‹¿æ‰ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;ç•«é¢ä¸Šå°±æœƒå‡ºç¾é€™å€‹éŒ¯èª¤ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/r08TNFR.png&quot; alt=&quot;20240714170606&quot;&gt;&lt;/p&gt;

&lt;p&gt;éŒ¯èª¤è¨Šæ¯æœƒè·Ÿä½ èªªï¼Œä½ è¦ä½¿ç”¨ React çš„ hookï¼Œå°±å¿…é ˆè¦åœ¨ Client Component ä¸­ä½¿ç”¨ï¼Œå› ç‚ºä½ ä¸å®£å‘Š &lt;code&gt;&#39;use client&#39;&lt;/code&gt;ï¼Œæ‰€ä»¥é€™å€‹ component é è¨­å°±æœƒè¢«èªç‚ºæ˜¯ Server Componentã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘å»ºç«‹å…©å€‹ child componentï¼Œåˆ†åˆ¥æ˜¯ &lt;code&gt;ParentComponent&lt;/code&gt; è·Ÿ &lt;code&gt;ChildComponent&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx&quot;&gt;&#39;use client&#39;
import { useTheme } from &#39;@/context/themeContext&#39;
import ChildComponent from &#39;./Child&#39;

export default function ParentComponent() {
  const { theme } = useTheme()

  return (
    &amp;lt;div&amp;gt;
      &amp;lt;p&amp;gt;Current theme: {theme}&amp;lt;/p&amp;gt;
      &amp;lt;ChildComponent /&amp;gt;
    &amp;lt;/div&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;jsx&quot;&gt;&#39;use client&#39;
import { useTheme } from &#39;@/context/themeContext&#39;

export default function ChildComponent() {
  const { theme, setTheme } = useTheme()

  return (
    &amp;lt;button
      type=&#39;button&#39;
      onClick={() =&amp;gt; setTheme(theme === &#39;light&#39; ? &#39;dark&#39; : &#39;light&#39;)}
    &amp;gt;
      Toggle Theme
    &amp;lt;/button&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œåœ¨ Home Page ä¸­ import &lt;code&gt;ParentComponent&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx&quot;&gt;import ParentComponent from &#39;@/components/Parent&#39;

export default function Home() {
  return (
    &amp;lt;ThemeProvider&amp;gt;
      &amp;lt;main&amp;gt;
        &amp;lt;ParentComponent /&amp;gt;
      &amp;lt;/main&amp;gt;
    &amp;lt;/ThemeProvider&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€éä»¥ä¸Šçš„æ–¹æ³•ï¼Œæˆ‘å€‘å°±å¯ä»¥åšåˆ°ä¸ç®¡åœ¨å“ªå€‹ component ä¸­ï¼Œåªè¦æ˜¯åœ¨ &lt;code&gt;ThemeProvider&lt;/code&gt; çš„å­å…ƒç´ ä¸­ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ &lt;code&gt;useTheme&lt;/code&gt; ä¾†å–å¾— theme çš„å€¼ï¼Œä¸¦ä¸”å¯ä»¥é€é &lt;code&gt;setTheme&lt;/code&gt; ä¾†æ”¹è®Š theme çš„å€¼ï¼Œé€™æ¨£å°±å¯ä»¥åœ¨ Next.js ä¸­ä½¿ç”¨ Context ä¾†å‚³é propsã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æä¾›çµ¦å¤§å®¶ä¸€å€‹ CodeSandbox è©¦ç©ï¼š&lt;/p&gt;



      ]]></content:encoded>
      <pubDate>Sun, 14 Jul 2024 15:57:00 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/next-js-app-router-context.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 3 minutes</category>
    </item>
    <item>
      <title>React 19 Beta æ–°æ­¦å™¨è§£é–é«”é©—</title>
      <link>https://railquill.vercel.app/react-19-beta.html</link>
      <description>ä»‹ç´¹ React 19 Beta æ–° Hooksã€‚</description>
      <content:encoded><![CDATA[
        &lt;p&gt;ç¶“éé•·æ™‚é–“çš„ç­‰å¾…ï¼Œè‡ªå¾ React 18 åœ¨ 2022 å¹´æ¨å‡ºä»¥ä¾†ï¼ŒReact 19 Beta ç‰ˆçµ‚æ–¼åœ¨è¿‘æœŸèˆ‡é–‹ç™¼è€…è¦‹é¢äº†ã€‚ä½œç‚º React 18 çš„ä¸‹ä¸€å€‹ä¸»è¦ç‰ˆæœ¬ï¼ŒReact 19 å¸¶ä¾†äº†è¨±å¤šè®“é–‹ç™¼è€…å¿ƒå‹•çš„æ–°ç‰¹æ€§ï¼Œé€™æ¬¡æˆ‘å€‘å°±å…ˆä¾†ä¸€æ¢ç©¶ç«Ÿæœ‰ä»€éº¼æ–°çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;usetransition&quot;&gt;useTransition&lt;/h2&gt;

&lt;p&gt;åœ¨å‰ç«¯æ“ä½œä¸­ï¼Œç¶“å¸¸æœƒç¢°åˆ°éœ€è¦æ›´æ–°ç‹€æ…‹çš„æƒ…æ³ï¼Œä¾‹å¦‚ï¼šä½¿ç”¨è€…é»æ“ŠæŒ‰éˆ•å¾Œï¼Œéœ€è¦æ›´æ–° UI ä¾†éŸ¿æ‡‰é€™å€‹æ“ä½œã€‚ç„¶è€Œï¼Œæœ‰äº›ç‹€æ…‹æ›´æ–°å¯èƒ½è¨ˆç®—é‡è¼ƒå¤§æˆ–è€…æ¶‰åŠéåŒæ­¥æ“ä½œï¼ŒåŸ·è¡Œæ™‚é–“è¼ƒé•·ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€å€‹ç¯„ä¾‹ï¼Œç•¶ä½¿ç”¨è€…è¼¸å…¥åå­—å¾Œï¼Œé»æ“ŠæŒ‰éˆ•ï¼Œæœƒå‘¼å« API æ›´æ–°åå­—ï¼Œä¸¦ä¸”åœ¨æ›´æ–°éç¨‹ä¸­ï¼ŒæŒ‰éˆ•æœƒè®Šæˆä¸å¯é»æ“Šçš„ç‹€æ…‹ã€‚&lt;code&gt;updateNameAPI&lt;/code&gt; é€™å€‹å‡½å¼æœƒæ¨¡æ“¬ API çš„è¡Œç‚ºã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { useState } from &#39;react&#39;

const updateNameAPI = async (newName) =&amp;gt; {
  return new Promise((resolve, reject) =&amp;gt; {
    setTimeout(() =&amp;gt; {
      const shouldError = newName.includes(&#39;error&#39;)
      if (shouldError) {
        reject(`åå­—ä¸èƒ½åŒ…å«&quot;error&quot;`)
      } else {
        resolve(`ä½ çš„æ–°åå­—æ˜¯: ${newName}`)
      }
    }, 1000)
  })
}

const Pending = () =&amp;gt; {
  const [name, setName] = useState(&#39;&#39;)
  const [error, setError] = useState(null)
  const [isPending, setIsPending] = useState(false)

  const handleSubmit = async () =&amp;gt; {
    setIsPending(true)
    const error = await updateNameAPI(name)
    setIsPending(false)
    if (error) {
      setError(error)
      return
    }
  }

  return (
    &amp;lt;div&amp;gt;
      &amp;lt;input value={name} onChange={(e) =&amp;gt; setName(e.target.value)} /&amp;gt;
      &amp;lt;button onClick={handleSubmit} disabled={isPending}&amp;gt;
        {isPending ? &#39;æ›´æ–°ä¸­...&#39; : &#39;æ›´æ–°åå­—&#39;}
      &amp;lt;/button&amp;gt;
      {error &amp;amp;&amp;amp; &amp;lt;p style={{ color: &#39;red&#39; }}&amp;gt;{error}&amp;lt;/p&amp;gt;}
    &amp;lt;/div&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œé€™æ®µç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº†ä¸‰å€‹ &lt;code&gt;useState&lt;/code&gt; ä¾†ç®¡ç†ç‹€æ…‹ï¼Œä¸¦ä¸”åœ¨ &lt;code&gt;handleSubmit&lt;/code&gt; ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;setIsPending&lt;/code&gt; ä¾†æ§åˆ¶æŒ‰éˆ•æ˜¯å¦å¯é»æ“Šï¼Œä»¥åŠåœ¨ API å›å‚³éŒ¯èª¤æ™‚ï¼Œä½¿ç”¨ &lt;code&gt;setError&lt;/code&gt; ä¾†é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;useTransition&lt;/code&gt; é€™å€‹ hook å·²ç¶“ä¸æ˜¯æ–°æ±è¥¿äº†ï¼Œå®ƒåœ¨ React 18 ä¸­å°±å·²ç¶“å‡ºç¾ï¼Œä½†åœ¨ React 19 ä¸­ï¼Œå®ƒè¢«é€²ä¸€æ­¥æ”¹é€²ï¼Œè®“æˆ‘å€‘æ›´å®¹æ˜“åœ°è™•ç†éåŒæ­¥æ“ä½œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { useState, useTransition } from &#39;react&#39;

const Pending = () =&amp;gt; {
  const [name, setName] = useState(&#39;&#39;)
  const [error, setError] = useState(null)
  const [isPending, startTransition] = useTransition()

  const handleSubmit = () =&amp;gt; {
    startTransition(async () =&amp;gt; { // ä½¿ç”¨ startTransition åŒ…è£¹éåŒæ­¥æ“ä½œ
      const error = await updateNameAPI(name)
      if (error) {
        setError(error)
        return
      }
    })
  }

  // startTransition æœƒè‡ªå‹•è™•ç† pending ç‹€æ…‹
  // åœ¨éåŒæ­¥æ“ä½œæœŸé–“,isPending ç‚º true 
  // æ“ä½œå®Œæˆå¾Œ,isPending è®Šç‚º false

  return (
    &amp;lt;div&amp;gt;
      &amp;lt;input value={name} onChange={(e) =&amp;gt; setName(e.target.value)} /&amp;gt;
      &amp;lt;button onClick={handleSubmit} disabled={isPending}&amp;gt;
        {isPending ? &#39;æ›´æ–°ä¸­...&#39; : &#39;æ›´æ–°åå­—&#39;}
      &amp;lt;/button&amp;gt;
      {error &amp;amp;&amp;amp; &amp;lt;p style={{ color: &#39;red&#39; }}&amp;gt;{error}&amp;lt;/p&amp;gt;}
    &amp;lt;/div&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™è£¡æˆ‘å€‘ç°¡å–®åœ°ä½¿ç”¨ &lt;code&gt;useTransition&lt;/code&gt; ä¾†å–ä»£ &lt;code&gt;setIsPending&lt;/code&gt;ï¼Œåœ¨ &lt;code&gt;useTransition&lt;/code&gt; æ¯æ¬¡éåŒæ­¥æ“ä½œæ™‚ï¼Œæœƒè‡ªå‹•å¹«æˆ‘å€‘è™•ç†å¥½ pending çš„ç‹€æ…‹ï¼Œè®“æˆ‘å€‘ä¸éœ€è¦å†æ‰‹å‹•ç®¡ç†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;useactionstate&quot;&gt;useActionState&lt;/h2&gt;

&lt;p&gt;å‰é¢å±•ç¤ºäº† &lt;code&gt;useTransition&lt;/code&gt; å·²ç¶“ç°¡åŒ–äº†ä¸€äº›ç¨‹å¼ç¢¼ï¼Œæ¥ä¸‹ä¾†çœ‹åˆ° &lt;code&gt;useActionState&lt;/code&gt; é€™å€‹æ–° hookï¼Œå¯ä»¥æ›´é€²ä¸€æ­¥ç°¡åŒ–æˆ‘å€‘çš„ç¨‹å¼ç¢¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { useActionState } from &#39;react&#39;

const UseActionStateExample = () =&amp;gt; {
  const [error, submitAction, isPending] = useActionState(
    async (state, formData) =&amp;gt; {
      const newName = formData.get(&#39;name&#39;)
      const error = await updateNameAPI(newName)
      if (error) {
        return error
      }
    }
  )

  const handleSubmit = (e) =&amp;gt; {
    e.preventDefault()
    const formData = new FormData(e.target)
    submitAction(formData) // èª¿ç”¨ submitAction æäº¤è¡¨å–®
  }

  // useActionState è‡ªå‹•ç®¡ç† error å’Œ isPending ç‹€æ…‹
  // åœ¨éåŒæ­¥æ“ä½œæœŸé–“ï¼ŒisPending ç‚º true
  // æ“ä½œå®Œæˆå¾Œï¼Œæ ¹æ“šè¿”å›å€¼æ›´æ–° error ç‹€æ…‹

  return (
    &amp;lt;form onSubmit={handleSubmit}&amp;gt;
      &amp;lt;input name=&#39;name&#39; /&amp;gt;
      &amp;lt;button type=&#39;submit&#39; disabled={isPending}&amp;gt;
        {isPending ? &#39;æ›´æ–°ä¸­...&#39; : &#39;æ›´æ–°åå­—&#39;}
      &amp;lt;/button&amp;gt;
      {error &amp;amp;&amp;amp; &amp;lt;p style={{ color: &#39;red&#39; }}&amp;gt;{error}&amp;lt;/p&amp;gt;}
    &amp;lt;/form&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;useActionState&lt;/code&gt; åˆ†åˆ¥å›å‚³äº†ä¸‰å€‹å€¼ï¼Œç¬¬ä¸€å€‹æ˜¯éŒ¯èª¤è¨Šæ¯ï¼Œç¬¬äºŒå€‹æ˜¯ä¸€å€‹å‡½å¼ï¼Œç”¨ä¾†æäº¤è¡¨å–®ï¼Œç¬¬ä¸‰å€‹æ˜¯ä¸€å€‹å¸ƒæ—å€¼ï¼Œç”¨ä¾†åˆ¤æ–·æ˜¯å¦æ­£åœ¨åŸ·è¡Œä¸­ã€‚&lt;/p&gt;

&lt;p&gt;é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘å€‘å®Œå…¨ä¸éœ€è¦ &lt;code&gt;useState&lt;/code&gt;ï¼Œåªéœ€è¦ä½¿ç”¨ &lt;code&gt;useActionState&lt;/code&gt; å°±å¯ä»¥å®Œæˆå‰é¢ä½¿ç”¨ &lt;code&gt;useTransition&lt;/code&gt; æ‰€æœ‰çš„æ“ä½œï¼Œé€™æ¨£å¯ä»¥è®“æˆ‘å€‘çš„ç¨‹å¼ç¢¼æ›´åŠ ç°¡æ½”ã€‚ä¸éçœ¼å°–çš„ä½ ï¼Œå¯èƒ½ä¹Ÿç™¼ç¾åˆ°é€™å€‹ä¾‹å­ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ &lt;code&gt;form&lt;/code&gt; è¡¨å–®çš„æ“ä½œï¼Œæ‰€ä»¥é€™ä¹Ÿè¡¨ç¤º &lt;code&gt;useActionState&lt;/code&gt; åªèƒ½ç”¨åœ¨è¡¨å–®æ“ä½œä¸Šã€‚&lt;/p&gt;

&lt;h2 id=&quot;useformstatus&quot;&gt;useFormStatus&lt;/h2&gt;

&lt;p&gt;åœ¨ä»¥å‰çš„ React ä¸­ï¼Œå¦‚æœæŒ‰éˆ•å…ƒä»¶ç¨ç«‹å‡ºä¾†ï¼Œè¦è®“æŒ‰éˆ•å…ƒä»¶çŸ¥é“ç›®å‰è¡¨å–®æ˜¯å¦æ­£åœ¨åŸ·è¡Œä¸­ï¼Œéœ€è¦é€é &lt;code&gt;props&lt;/code&gt; å‚³éï¼Œé€™æ¨£æœƒè®“ç¨‹å¼ç¢¼è®Šå¾—è¤‡é›œï¼Œä¸éåœ¨ React 19 ä¸­ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ &lt;code&gt;useFormStatus&lt;/code&gt; ä¾†å–å¾—è¡¨å–®çš„ç‹€æ…‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { useActionState } from &#39;react&#39;
import { useFormStatus } from &#39;react-dom&#39;

const SubmitButton = () =&amp;gt; {
  const { pending } = useFormStatus()
  // å¾ useFormStatus ç²å– pending ç‹€æ…‹
  return (
    &amp;lt;button type=&#39;submit&#39; disabled={pending}&amp;gt;
      {pending ? &#39;æ›´æ–°ä¸­...&#39; : &#39;æ›´æ–°åå­—&#39;}
    &amp;lt;/button&amp;gt;
  )
}

// useFormStatus è®€å–çˆ¶ &amp;lt;form&amp;gt; çš„ pending ç‹€æ…‹
// ç„¡éœ€é€šé props å‚³éï¼Œé™ä½äº†çµ„ä»¶è€¦åˆ

const UseFormStatus = () =&amp;gt; {
  const [error, submitAction] = useActionState(async (state, formData) =&amp;gt; {
    const newName = formData.get(&#39;name&#39;)
    const error = await updateNameAPI(newName)
    if (error) {
      return error
    }
  })

  const handleSubmit = async (formData) =&amp;gt; {
    submitAction(formData)
  }

  return (
    &amp;lt;form action={handleSubmit}&amp;gt;
      &amp;lt;input name=&#39;name&#39; /&amp;gt;
      &amp;lt;SubmitButton /&amp;gt;
      {error &amp;amp;&amp;amp; &amp;lt;p style={{ color: &#39;red&#39; }}&amp;gt;{error}&amp;lt;/p&amp;gt;}
    &amp;lt;/form&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç¤ºç¯„äº†ä½¿ç”¨ &lt;code&gt;useFormStatus&lt;/code&gt; æ­é… &lt;code&gt;useActionState&lt;/code&gt; ä¾†ç°¡åŒ–è¡¨å–®çš„æ“ä½œï¼Œå‰è€…å¯ä»¥ä¸éœ€è¦å‚³é &lt;code&gt;props&lt;/code&gt; å°±å¯ä»¥ç›´æ¥å¹«æˆ‘å€‘è™•ç†é‹ä½œä¸­çš„ç‹€æ…‹ï¼Œé€™æ¨£å¾Œè€…ä¹Ÿå¯ä»¥ä¸éœ€è¦å–å‡º &lt;code&gt;isPending&lt;/code&gt; ä¾†åˆ¤æ–·æ˜¯å¦æ­£åœ¨åŸ·è¡Œä¸­ã€‚&lt;/p&gt;

&lt;h2 id=&quot;useoptimistic&quot;&gt;useOptimistic&lt;/h2&gt;

&lt;p&gt;åœ¨æŸäº›æƒ…å¢ƒä¸‹ï¼Œç•¶ä½¿ç”¨è€…æäº¤è¡¨å–®æ™‚ï¼Œæˆ‘å€‘å¯ä»¥å…ˆå‡è¨­ä½¿ç”¨è€…çš„æ“ä½œæ˜¯æˆåŠŸçš„ï¼Œç„¶å¾Œå†ç­‰å¾… API å›å‚³çµæœï¼Œé€™æ¨£å¯ä»¥è®“ä½¿ç”¨è€…æ„Ÿå—åˆ°æ›´å¿«çš„å›é¥‹ï¼Œé€™å€‹æ¦‚å¿µå°±æ˜¯æ‰€è¬‚çš„ &lt;code&gt;Optimistic UI&lt;/code&gt;ï¼Œåœ¨ React 19 ä¸­ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ &lt;code&gt;useOptimistic&lt;/code&gt; ä¾†å¯¦ç¾é€™å€‹åŠŸèƒ½ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { useState } from &#39;react&#39;
import { useOptimistic } from &#39;react&#39;

const OptimisticExample = () =&amp;gt; {
  const [title, setTitle] = useState(&#39;React 18&#39;)
  const [optimisticTitle, setOptimisticTitle] = useOptimistic(title)

  const submitForm = async () =&amp;gt; {
    const newTitle = &#39;React 19&#39;
    setOptimisticTitle(newTitle) // ç«‹å³æ¸²æŸ“ optimistic ç‹€æ…‹
    const res = await new Promise((resolve) =&amp;gt; {
      setTimeout(() =&amp;gt; {
        resolve(`${newTitle} Beta`)
      }, 1000)
    })
    setTitle(res) // æ›´æ–°ç‚ºæœ€çµ‚çµæœ
  }

  // useOptimistic ä½¿å¾—æˆ‘å€‘å¯ä»¥å„ªé›…åœ°å¯¦ç¾ optimistic UI
  // å…ˆå±•ç¤ºæœŸæœ›çš„æœ€çµ‚ç‹€æ…‹ï¼Œç­‰å¾…éåŒæ­¥æ“ä½œå®Œæˆå¾Œå†æ›´æ–°ç‚ºå¯¦éš›çµæœ

  return (
    &amp;lt;form action={submitForm}&amp;gt;
      &amp;lt;h1&amp;gt;{optimisticTitle}&amp;lt;/h1&amp;gt;
      &amp;lt;button type=&#39;submit&#39;&amp;gt;æ›´æ–°&amp;lt;/button&amp;gt;
    &amp;lt;/form&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨ &lt;code&gt;useOptimistic&lt;/code&gt; ä¾†å–ä»£ &lt;code&gt;useState&lt;/code&gt;ï¼Œé€™æ¨£å°±å¯ä»¥è®“æˆ‘å€‘åœ¨æäº¤è¡¨å–®æ™‚ï¼Œå…ˆæ›´æ–° UIï¼Œç„¶å¾Œå†ç­‰å¾… API å›å‚³çµæœï¼Œé€™æ¨£å¯ä»¥è®“ä½¿ç”¨è€…æ„Ÿå—åˆ°æ›´å¿«çš„å›é¥‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;use&quot;&gt;use&lt;/h2&gt;

&lt;p&gt;åœ¨ä¹‹å‰ç‰ˆæœ¬çš„ React ä¸­ï¼Œå¦‚æœæƒ³è®€å–ä¸€äº›å¤–éƒ¨çš„ API è³‡æ–™ï¼Œä¸€èˆ¬éƒ½æœƒä½¿ç”¨ &lt;code&gt;useEffect&lt;/code&gt; ä¾†è™•ç†ï¼Œå¯ä»¥å…ˆçœ‹ä»¥ä¸‹çš„ç¯„ä¾‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { useState, useEffect } from &#39;react&#39;

const Messages = ({ messages }) =&amp;gt; {
  return (
    &amp;lt;ul&amp;gt;
      {messages.map((message) =&amp;gt; (
        &amp;lt;li key={message.id}&amp;gt;
          &amp;lt;h2&amp;gt;{message.title}&amp;lt;/h2&amp;gt;
          &amp;lt;p&amp;gt;{message.body}&amp;lt;/p&amp;gt;
        &amp;lt;/li&amp;gt;
      ))}
    &amp;lt;/ul&amp;gt;
  )
}

function FetchExample() {
  const [messages, setMessages] = useState([])
  const [loading, setLoading] = useState(true)

  useEffect(() =&amp;gt; {
    const fetchData = async () =&amp;gt; {
      try {
        const res = await fetch(&#39;https://jsonplaceholder.typicode.com/posts&#39;)
        const data = await res.json()
        setMessages(data)
        setLoading(false)
      } catch (err) {
        console.error(err)
      } finally {
        setLoading(false)
      }
    }

    fetchData()
  }, [])

  if (loading) {
    return &amp;lt;p&amp;gt;âŒ›Downloading message...&amp;lt;/p&amp;gt;
  }

  return &amp;lt;Messages messages={messages} /&amp;gt;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ React 19 ä¸­ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ &lt;code&gt;use&lt;/code&gt; ä¾†å–ä»£ &lt;code&gt;useEffect&lt;/code&gt;ï¼Œé€™æ¨£å¯ä»¥è®“æˆ‘å€‘çš„ç¨‹å¼ç¢¼æ›´åŠ ç°¡æ½”ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { use, Suspense } from &#39;react&#39;

const fetchData = async () =&amp;gt; {
  const res = await fetch(&#39;https://jsonplaceholder.typicode.com/posts&#39;)
  return res.json()
}

const Messages = () =&amp;gt; {
  const messages = use(fetchData())
  // use è®€å–éåŒæ­¥è³‡æºï¼Œä¸¦æš«åœæ¸²æŸ“ç›´åˆ°å®Œæˆ

  return (
    &amp;lt;ul&amp;gt;
      {messages.map((message) =&amp;gt; (
        &amp;lt;li key={message.id}&amp;gt;
          &amp;lt;h2&amp;gt;{message.title}&amp;lt;/h2&amp;gt;
          &amp;lt;p&amp;gt;{message.body}&amp;lt;/p&amp;gt;
        &amp;lt;/li&amp;gt;
      ))}
    &amp;lt;/ul&amp;gt;
  )
}

// use ç°¡åŒ–äº†éåŒæ­¥è®€å–è³‡æºçš„å¯¦ç¾
// ä¸éœ€è¦ä½¿ç”¨ useEffect æé«˜å¯è®€æ€§

function UseExample() {
  return (
    &amp;lt;Suspense fallback={&amp;lt;p&amp;gt;âŒ›Downloading message...&amp;lt;/p&amp;gt;}&amp;gt;
      &amp;lt;Messages /&amp;gt;
    &amp;lt;/Suspense&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;context&quot;&gt;Context&lt;/h2&gt;

&lt;p&gt;æœ€å¾Œä¾†ä»‹ç´¹ React 19 çš„ Contextï¼Œé€™å€‹éƒ¨åˆ†ç®—æ˜¯æœ‰é»å°è®Šå‹•ï¼Œä»¥å¾€åœ¨ä½¿ç”¨ Context çš„æ™‚å€™ï¼Œéœ€è¦åŠ ä¸Šä¸€å€‹ &lt;code&gt;Provider&lt;/code&gt;ï¼Œåƒæ˜¯ &lt;code&gt;&amp;lt;Context.Provider&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä½†åœ¨ React 19 ä¸­ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥ä½¿ç”¨ &lt;code&gt;Context&lt;/code&gt; ä¾†å–ä»£ &lt;code&gt;Provider&lt;/code&gt;ï¼Œé€™æ¨£å¯ä»¥è®“æˆ‘å€‘çš„ç¨‹å¼ç¢¼æ›´åŠ ç°¡æ½”ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx!&quot;&gt;import { createContext, useContext } from &#39;react&#39;

// æ–°å»º Context
const ThemeContext = createContext(&#39;light&#39;)

function ThemeProvider({ children }) {
  const theme = &#39;light&#39;

  // ä½¿ç”¨æ–°èªæ³•æ¸²æŸ“ &amp;lt;Context&amp;gt; ä½œç‚º provider
  return &amp;lt;ThemeContext value={theme}&amp;gt;{children}&amp;lt;/ThemeContext&amp;gt;
}

function ThemedButton() {
  // ä½¿ç”¨ Context
  const theme = useContext(ThemeContext)

  return (
    &amp;lt;button
      style={{
        backgroundColor: theme === &#39;light&#39; ? &#39;white&#39; : &#39;black&#39;,
        color: theme === &#39;light&#39; ? &#39;black&#39; : &#39;white&#39;
      }}
    &amp;gt;
      I am a {theme} themed button
    &amp;lt;/button&amp;gt;
  )
}

const ContextExample = () =&amp;gt; {
  return (
    &amp;lt;ThemeProvider&amp;gt;
      &amp;lt;ThemedButton /&amp;gt;
    &amp;lt;/ThemeProvider&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œç•¶å‚³é &lt;code&gt;value&lt;/code&gt; ç‚º &lt;code&gt;light&lt;/code&gt; æ™‚ï¼Œ&lt;code&gt;ThemedButton&lt;/code&gt; æœƒé¡¯ç¤ºä¸€å€‹ç™½è‰²çš„æŒ‰éˆ•ï¼Œç•¶å‚³é &lt;code&gt;value&lt;/code&gt; ç‚º &lt;code&gt;dark&lt;/code&gt; æ™‚ï¼Œ&lt;code&gt;ThemedButton&lt;/code&gt; æœƒé¡¯ç¤ºä¸€å€‹é»‘è‰²çš„æŒ‰éˆ•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-6542fd4e95a&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;React 19 Beta é‚„æœ‰å…¶ä»–åŠŸèƒ½ï¼Œé€™ç¯‡æ–‡ç« åªæ˜¯æŒ‘å‡ºä¸€äº›å¸¸ç”¨çš„æƒ…å¢ƒå¯ä½¿ç”¨çš„ hook å’Œ API ä¾†ä»‹ç´¹ï¼Œæƒ³äº†è§£æ›´å¤šçš„è©±ï¼Œåœ¨ React 19 æ­£å¼ç‰ˆæ¨å‡ºå†ä¾†åšæ›´åŠ è©³ç´°çš„ä»‹ç´¹ã€‚&lt;/p&gt;

&lt;p&gt;ç¸½çš„ä¾†èªªï¼ŒReact 19 Beta ç‚ºé–‹ç™¼è€…å¸¶ä¾†äº†è¨±å¤šæ”¹è®Šï¼Œè®“éåŒæ­¥æ¸²æŸ“ã€æ•¸æ“šç²å–å’Œæ›´æ–°çš„é«”é©—ç²å¾—æ¥µå¤§æå‡ã€‚é›–ç„¶é€™åªæ˜¯ä¸€å€‹ Beta ç‰ˆæœ¬ï¼Œä½†é€™äº›æ–°åŠŸèƒ½å’Œæ”¹é€²éƒ½å€¼å¾—æˆ‘å€‘ç†±çƒˆæœŸå¾… React 19 çš„æ­£å¼åˆ°ä¾†ã€‚æœ€å¾Œè®“æˆ‘å€‘æ‹­ç›®ä»¥å¾…ï¼Œä¸¦ç‚ºå³å°‡åˆ°ä¾†çš„ React é–‹ç™¼æ–°ç´€å…ƒåšå¥½æº–å‚™å§ï¼&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Wed, 08 May 2024 17:26:20 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/react-19-beta.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 5 minutes</category>
    </item>
    <item>
      <title>ä½¿ç”¨ Leptos å»ºç«‹å’Œéƒ¨ç½² WASM åˆ° GCP</title>
      <link>https://railquill.vercel.app/leptos-wasm-gcp.html</link>
      <description>2023 DevFest Taipei è­°ç¨‹ä¹‹ä¸€ï¼Œä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Leptos å»ºç«‹å’Œéƒ¨ç½² WASM åˆ° GCPã€‚</description>
      <content:encoded><![CDATA[
        &lt;p&gt;é€™ç¯‡æ–‡ç« æ˜¯ç”± Google Developer Group(GDG) ä¸»è¾¦çš„ DevFest Taipei 2023 å…¶ä¸­çš„ä¸€å€‹è­°ç¨‹ï¼Œä¸»é¡Œæ˜¯ - ä½¿ç”¨ Leptos å»ºç«‹å’Œéƒ¨ç½² WASM åˆ° GCPã€‚&lt;/p&gt;

&lt;h2 id=&quot;leptos&quot;&gt;ä»€éº¼æ˜¯ Leptos&lt;/h2&gt;

&lt;p&gt;è¿‘å¹´ä¾†ï¼ŒRust èªè¨€è¶Šä¾†è¶Šå—åˆ°é—œæ³¨ï¼Œè€Œæœ‰é—œ Web ç«¯çš„ç”Ÿæ…‹ç³»æ›´æ˜¯è“¬å‹ƒç™¼å±•ï¼Œä¸ç®¡æ˜¯å‰ç«¯é‚„æ˜¯å¾Œç«¯ï¼Œéƒ½æœ‰è¨±å¤šå„ªç§€çš„æ¡†æ¶å¯ä»¥ä½¿ç”¨ï¼Œè€Œ Leptos å°±æ˜¯å…¶ä¸­ä¸€å€‹æ¡†æ¶ã€‚&lt;/p&gt;

&lt;p&gt;é‚£éº¼ Leptos æœ‰ä»€éº¼ç‰¹åˆ¥çš„å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;Leptos æ¨™æ¦œæ˜¯ä¸€å€‹å…¨ç«¯æ¡†æ¶ï¼Œè©±é›–å¦‚æ­¤ï¼Œä½†é‚„æ˜¯ä»¥å‰ç«¯ç‚ºä¸»ï¼ŒçœŸè¦èªªçš„è©±ï¼Œå…¶è§’è‰²æœ‰é»é¡ä¼¼æ–¼ Next.jsã€‚è€Œ Leptos æä¾›äº†å…©ç¨® render çš„æ–¹å¼ï¼Œåˆ†åˆ¥æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Client-side rendering(CSR)&lt;/li&gt;
&lt;li&gt;Server-side rendering(SSR)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è€Œä¸ç®¡æ˜¯å“ªä¸€ç¨® render çš„æ–¹å¼ï¼Œéƒ½æ˜¯ä½¿ç”¨ WASM ä¾†å¯¦ç¾çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/RKVo9NP.png&quot; alt=&quot;Leptos benchmark&quot;&gt;&lt;/p&gt;

&lt;p&gt;ä½œç‚ºæ•ˆèƒ½å„ªç•°çš„ Rust èªè¨€ï¼ŒLeptos ä¹Ÿä¸ä¾‹å¤–ï¼Œå…¶æ•ˆèƒ½ä¹Ÿæ˜¯éå¸¸å„ªç§€çš„ï¼Œå¦‚ä¸Šåœ– Leptos å®˜ç¶²æ‰€ç¤ºï¼ŒLeptos çš„æ•ˆèƒ½æ¯”èµ·å…¶ä»–æ¡†æ¶ä¾†èªªï¼Œæ˜¯éå¸¸å„ªç§€çš„ã€‚&lt;/p&gt;

&lt;h2 id=&quot;wasm&quot;&gt;ä»€éº¼æ˜¯ WASM&lt;/h2&gt;

&lt;p&gt;WASM æ˜¯ WebAssembly çš„ç¸®å¯«ï¼Œæ˜¯ä¸€ç¨®å¯ä»¥åœ¨ç€è¦½å™¨ä¸ŠåŸ·è¡Œçš„ä½éšèªè¨€ï¼Œå¯ä»¥å°‡å…¶ä»–èªè¨€ç·¨è­¯æˆ WASMï¼Œç„¶å¾Œåœ¨ç€è¦½å™¨ä¸ŠåŸ·è¡Œã€‚&lt;/p&gt;

&lt;p&gt;æ ¹æ“š MDN çš„èªªæ³•ï¼ŒWASM æ˜¯ä¸€ç¨®å¯ç§»æ¤ã€å¤§å°ã€æ•ˆèƒ½éƒ½å¾ˆå¥½çš„æ ¼å¼ï¼Œå¯ä»¥åœ¨ç€è¦½å™¨ä¸ŠåŸ·è¡Œï¼Œè€Œä¸”å¯ä»¥è·¨å¹³å°ï¼Œä¸ç®¡æ˜¯åœ¨æ¡Œé¢ã€è¡Œå‹•è£ç½®ã€IoT è£ç½®ï¼Œéƒ½å¯ä»¥åŸ·è¡Œã€‚&lt;/p&gt;

&lt;p&gt;æ—¢ç„¶ WASM é€™éº¼çŒ›ï¼Œæ˜¯ä¸æ˜¯è¡¨ç¤ºæœªä¾†å‰ç«¯çš„è¶¨å‹¢å°±æ˜¯ WASM äº†å‘¢ï¼Ÿå…¶å¯¦ä¹Ÿä¸æ˜¯ï¼ŒWASM é›–ç„¶å¯ä»¥åœ¨ç€è¦½å™¨ä¸ŠåŸ·è¡Œï¼Œä½†æ˜¯å®ƒä¸¦ä¸æ˜¯ä¸€ç¨®èªè¨€ï¼Œè€Œæ˜¯ä¸€ç¨®æ ¼å¼ï¼Œæ‰€ä»¥å®ƒåªæ˜¯ä¸€ç¨®è¼‰å…·ï¼Œè€Œä¸æ˜¯ä¸€ç¨®èªè¨€ï¼Œæ‰€ä»¥å®ƒä¸¦ä¸æœƒå–ä»£ JavaScriptï¼Œè€Œæ˜¯æœƒå’Œ JavaScript ä¸€èµ·ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ç°¡å–®ä¾†èªªï¼ŒWASM éœ€è¦ JavaScript ä¾†åŸ·è¡Œï¼Œæ‰€ä»¥ JavaScript å’Œ WASM æ˜¯äº’è£œçš„é—œä¿‚ï¼Œè€Œä¸æ˜¯å–ä»£çš„é—œä¿‚ã€‚&lt;/p&gt;

&lt;h2 id=&quot;wasm-javascript&quot;&gt;WASM æ€éº¼è·Ÿ JavaScript æ­é…&lt;/h2&gt;

&lt;p&gt;WASM å¯ä»¥é€é wasm-bindgen ä¾†è·Ÿ JavaScript æ­é…ä½¿ç”¨ï¼Œwasm-bindgen å¯ä»¥è®“ JavaScript å’Œ WASM äº’ç›¸äº¤æ›æ•¸æ“šï¼Œå¯ä»¥æŠŠ wasm-bindgen æƒ³åƒæˆä¸€å€‹æ©‹æ¨‘ï¼Œè®“ JavaScript å’Œ WASM äº’ç›¸æºé€šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/OxBO8IW.png&quot; alt=&quot;wasm-bindgen æ©‹æ¨‘ç¤ºæ„åœ–&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;leptos&quot;&gt;Leptos åˆé«”é©—&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œå…ˆé¸æ“‡ä½¿ç”¨å“ªç¨® render çš„æ–¹å¼ï¼Œé€™è£¡é¸æ“‡ä½¿ç”¨ Server-side renderingã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥é©ŸåŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;cargo install cargo-leptos
cargo leptos new --git https://github.com/leptos-rs/start
cd [your project name]
cargo leptos watch
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¨å¾®è¬›ä¸€ä¸‹ &lt;code&gt;cargo-leptos&lt;/code&gt;ï¼Œé€™æ˜¯ä¸€å€‹ cargo çš„ å·¥å…·ï¼Œå¯ä»¥è®“æˆ‘å€‘ä½¿ç”¨ cargo ä¾†å»ºç«‹ Leptos å°ˆæ¡ˆï¼Œè€Œ &lt;code&gt;cargo leptos new&lt;/code&gt; å‰‡æ˜¯ç”¨ä¾†å»ºç«‹æ–°å°ˆæ¡ˆï¼Œ&lt;code&gt;cargo leptos watch&lt;/code&gt; å‰‡æ˜¯ç”¨ä¾†å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ã€‚&lt;/p&gt;

&lt;p&gt;é€™è£¡é è¨­æ˜¯ä½¿ç”¨ actix-web ä¾†è™•ç†å¾Œç«¯ serverï¼Œä¹Ÿå¯ä»¥é¸æ“‡ Axumï¼Œä¸éé€™è£¡å°±ä¸å¤šåšä»‹ç´¹äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;intoview&quot;&gt;IntoView&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/hSABXYf.png&quot; alt=&quot;Leptos-App&quot;&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ Leptos ä¸­ï¼Œ&lt;code&gt;IntoView&lt;/code&gt; æ˜¯ä¸€å€‹é‡è¦çš„ç‰¹å¾µï¼ˆtraitï¼‰ï¼Œç”¨æ–¼å°‡ Rust code è½‰æ›æˆå¯ä»¥åœ¨ç€è¦½å™¨ä¸­é¡¯ç¤ºçš„éƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;p&gt;ç•¶ä½¿ç”¨ &lt;code&gt;view!&lt;/code&gt; ä¾†å®šç¾© UI ç•Œé¢æ™‚ï¼Œ&lt;code&gt;IntoView&lt;/code&gt; è®“é€™äº› Rust component å¯ä»¥è½‰æ›æˆ HTMLã€‚é€™æ¨£ï¼Œé–‹ç™¼è€…å°±å¯ä»¥ç”¨ Rust ç·¨å¯« Web æ‡‰ç”¨çš„å‰ç«¯ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å‚³çµ±çš„ HTMLã€CSS æˆ– JavaScriptã€‚é€™ç¨®æ–¹æ³•æœ‰åŠ©æ–¼åœ¨ Rust ç”Ÿæ…‹ç³»çµ±ä¸­ä¿æŒé¡å‹å®‰å…¨å’Œæ•ˆèƒ½å„ªå‹¢ï¼ŒåŒæ™‚æä¾›ä¸åŒçš„å‰ç«¯é–‹ç™¼é«”é©—ã€‚&lt;/p&gt;

&lt;h3 id=&quot;create_signal&quot;&gt;create_signal&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/nnKA04g.png&quot; alt=&quot;Leptos çš„ç‹€æ…‹&quot;&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ Leptos ä¸­ï¼Œç‹€æ…‹æ˜¯ç”± &lt;code&gt;Signal&lt;/code&gt; ä¾†ç®¡ç†çš„ï¼Œè€Œ &lt;code&gt;Signal&lt;/code&gt; å¯ä»¥é€é &lt;code&gt;create_signal&lt;/code&gt; ä¾†å»ºç«‹ï¼Œ&lt;code&gt;create_signal&lt;/code&gt; æœƒå›å‚³ä¸€å€‹ &lt;code&gt;Signal&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;Signal&lt;/code&gt; å¯ä»¥é€é &lt;code&gt;get&lt;/code&gt; ä¾†å–å¾—ç›®å‰çš„ç‹€æ…‹ï¼Œä¹Ÿå¯ä»¥é€é &lt;code&gt;set&lt;/code&gt; ä¾†è¨­å®šç‹€æ…‹ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨åœ–ç‰‡çš„ä¾‹å­ä¸­ï¼Œæ›´æ–°ç‹€æ…‹ä½¿ç”¨äº† &lt;code&gt;update&lt;/code&gt; é€™å€‹ functionï¼Œé€™å€‹ function æœƒæ¥æ”¶ä¸€å€‹ closureï¼Œè€Œ closure æœƒæ¥æ”¶ä¸€å€‹ &lt;code&gt;&amp;amp;mut&lt;/code&gt; çš„åƒæ•¸ï¼Œé€™å€‹åƒæ•¸å°±æ˜¯ç›®å‰çš„ç‹€æ…‹ï¼Œè€Œåœ¨ closure ä¸­ï¼Œæˆ‘å€‘å¯ä»¥å°ç‹€æ…‹åšä»»ä½•çš„æ“ä½œï¼Œæœ€å¾Œå†å›å‚³ä¸€å€‹æ–°çš„ç‹€æ…‹ï¼Œé€™æ¨£å°±å¯ä»¥æ›´æ–°ç‹€æ…‹äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¯«æ³•ä¸Šæœ‰é»é¡ä¼¼æ–¼ React çš„ &lt;code&gt;useState&lt;/code&gt;ï¼Œå¦‚æœæœ‰å¯«é React çš„è©±ï¼Œæ‡‰è©²æœƒæ¯”è¼ƒå¥½ç†è§£ã€‚&lt;/p&gt;

&lt;h3 id=&quot;actix-web&quot;&gt;Actix-web è™•ç†å¾Œç«¯ç‹€æ…‹&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/sgGEzAX.png&quot; alt=&quot;actix-web&quot;&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœé¸æ“‡çš„æ˜¯ SSR çš„è©±ï¼Œé è¨­æœƒä½¿ç”¨ actix-web ä¾†è™•ç†å¾Œç«¯çš„ç‹€æ…‹ï¼Œè€Œ actix-web æ˜¯ä¸€å€‹éå¸¸å„ªç§€çš„ Rust web frameworkï¼Œæ•ˆèƒ½éå¸¸å¥½ï¼Œè€Œä¸”ä¹Ÿæœ‰å¾ˆå¤šçš„ middleware å¯ä»¥ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-3c6ef4a28e30d3e0&quot;&gt;å»ºç«‹ä¸€å€‹æ–°å°ˆæ¡ˆ&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ï¼Œå°±å¯ä»¥æŠŠ Leptos å°ˆæ¡ˆéƒ¨ç½²åˆ° GCP ä¸Šäº†ï¼Œé¦–å…ˆï¼Œå…ˆå»ºç«‹ä¸€å€‹æ–°å°ˆæ¡ˆï¼Œé€™è£¡ä»¥ &lt;code&gt;was-demo&lt;/code&gt; ç‚ºä¾‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/7DiszI3.png&quot; alt=&quot;gcp å°ˆæ¡ˆ&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;gcp-sdk&quot;&gt;å®‰è£ GCP SDK&lt;/h2&gt;

&lt;p&gt;ç„¶å¾Œåˆ°&lt;a href=&quot;https://cloud.google.com/sdk/docs/install&quot;&gt;é€™è£¡&lt;/a&gt;ä¸‹è¼‰ SDKï¼Œé¸æ“‡é©åˆçš„ä½œæ¥­ç³»çµ±ï¼Œé€™è£¡ä»¥ MacOS ç‚ºä¾‹ï¼Œæˆ‘ä¸‹è¼‰çš„æ˜¯ macOS 64-bit ç‰ˆæœ¬ï¼ˆARM64, Apple M1 siliconï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è¼‰å¾Œæœƒæ˜¯ä¸€å€‹å£“ç¸®æª”ï¼Œè§£å£“ç¸®å¾Œæ”¾å…¥é©åˆçš„ä½ç½®ï¼Œæˆ‘æ˜¯æ”¾åœ¨ä½¿ç”¨è€…çš„ç›®éŒ„ä¸‹ã€‚ä¸¦ä¸”åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†å®‰è£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;./google-cloud-sdk/install.sh
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Œæˆä¹‹å¾Œï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†åˆå§‹åŒ–ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;./google-cloud-sdk/bin/gcloud init
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å°±æœƒé€²å…¥åˆå§‹åŒ–çš„æµç¨‹ï¼Œæœƒè¦æ±‚ä½ ç™»å…¥ Google å¸³è™Ÿï¼Œç™»å…¥ä¹‹å¾Œï¼Œæœƒè¦æ±‚ä½ é¸æ“‡å°ˆæ¡ˆï¼Œé¸æ“‡å‰›å‰›å»ºç«‹çš„å°ˆæ¡ˆã€‚&lt;/p&gt;

&lt;h2 id=&quot;docker-image&quot;&gt;å»ºç«‹ Docker Image&lt;/h2&gt;

&lt;p&gt;è¦éƒ¨ç½² Leptos å°ˆæ¡ˆï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ Dockerã€‚å»ºç«‹ä¸€å€‹ &lt;code&gt;Dockerfile&lt;/code&gt;ï¼Œå¯ä»¥ç›´æ¥ç”¨å®˜ç¶²æä¾›çš„ç¯„ä¾‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/BVQG8l7.png&quot; alt=&quot;dockerfile&quot;&gt;&lt;/p&gt;

&lt;p&gt;é€™å€‹ &lt;code&gt;Dockerfile&lt;/code&gt; æœƒå»ºç«‹ä¸€å€‹ Docker Imageï¼Œé€™å€‹ Image æœƒåŒ…å«æˆ‘å€‘çš„ç¨‹å¼ç¢¼ï¼Œä»¥åŠåŸ·è¡Œç¨‹å¼ç¢¼æ‰€éœ€è¦çš„ç’°å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†å»ºç«‹ Docker Imageï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;docker build -t leptos-example .
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†å•Ÿå‹• Docker Containerï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;docker run -p 8080:8080 leptos-example
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰“é–‹ç€è¦½å™¨ï¼Œè¼¸å…¥ &lt;code&gt;http://localhost:8080&lt;/code&gt;ï¼Œçœ‹åˆ°æœ‰ç•«é¢å‡ºç¾å°±ä»£è¡¨æˆåŠŸäº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;google-container-registry-api&quot;&gt;å•Ÿå‹• Google Container Registry API&lt;/h2&gt;

&lt;p&gt;åˆ° &lt;a href=&quot;https://console.cloud.google.com/&quot;&gt;Google Cloud Console&lt;/a&gt; å•Ÿç”¨ Container Registry APIã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/4GigPc1.png&quot; alt=&quot;20231202150742&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;docker-image-google-container-registry&quot;&gt;ä¸Šå‚³ Docker Image åˆ° Google Container Registry&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œç¢ºä¿åœ¨æœ¬æ©Ÿä¸Šå·²ç¶“ç™»å…¥ GCPï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;gcloud auth login
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹è‡ªå·±çš„ config æ˜¯å¦æ­£ç¢ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;gcloud auth configure-docker
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸¦é‡å° Image åšæ¨™è¨˜ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;docker tag leptos-example gcr.io/was-demo-406407/leptos-example
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€å¾Œï¼Œä¸Šå‚³ Image åˆ° GCRï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;docker push gcr.io/was-demo-406407/leptos-example
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;app-engine&quot;&gt;éƒ¨ç½²åˆ° App Engine&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œå»ºç«‹ä¸€å€‹ &lt;code&gt;app.yaml&lt;/code&gt;ï¼Œå…§å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;runtime: custom
env: flex

automatic_scaling:
  min_num_instances: 1
  max_num_instances: 2

resources:
  cpu: 1
  memory_gb: 1
  disk_size_gb: 10
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å€‹éƒ¨åˆ†ï¼Œç”±æ–¼æˆ‘å€‘æ˜¯ä½¿ç”¨ Docker Image ä¾†éƒ¨ç½²ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ &lt;code&gt;custom&lt;/code&gt; é€™å€‹ runtimeï¼Œè€Œ &lt;code&gt;env: flex&lt;/code&gt; å‰‡æ˜¯ä½¿ç”¨ flexible ç’°å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†éƒ¨ç½²ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;gcloud app deploy
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœƒå•ä½ è¦éƒ¨ç½²åˆ°é‚£ä¸€å€‹å€åŸŸï¼Œé¸æ“‡é©åˆçš„å€åŸŸï¼Œé€™è£¡é¸æ“‡ &lt;code&gt;asia-east1&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—å°±æœƒé–‹å§‹éƒ¨ç½²ï¼Œä¸éé€™è£¡é‡åˆ°ä¸€å€‹å•é¡Œï¼Œä¼¼ä¹è¶…é 10 åˆ†é˜å°±æœƒ timeoutï¼Œæ‰€ä»¥æˆ‘å€‘è¦è¨­å®šä¸€ä¸‹ timeout çš„æ™‚é–“ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;gcloud config set app/cloud_build_timeout 1200
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¯”è¼ƒå¥½çš„ä½œæ³•å¯èƒ½é‚„æ˜¯è¦èª¿æ•´ä¸€ä¸‹ Docker Image çš„å¤§å°ï¼Œä¸éé€™è£¡å°±å…ˆé€™æ¨£äº†ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¬¡åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†éƒ¨ç½²ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;gcloud app deploy
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;éƒ¨ç½²æˆåŠŸä¹‹å¾Œï¼Œå¯ä»¥çœ‹åˆ°é¡ä¼¼ä»¥ä¸‹çš„ç•«é¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Arn1kYT.png&quot; alt=&quot;20231202204511&quot;&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ï¼Œæœƒè·Ÿä½ èªªå¯ä»¥åŸ·è¡Œå…©å€‹æŒ‡ä»¤ï¼Œä¸€å€‹æ˜¯ &lt;code&gt;gcloud app browse&lt;/code&gt;ï¼Œå¦ä¸€å€‹æ˜¯ &lt;code&gt;gcloud app logs tail -s default&lt;/code&gt;ï¼Œå‰è€…æ˜¯é–‹å•Ÿç€è¦½å™¨ï¼Œå¾Œè€…æ˜¯é–‹å•Ÿ logã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šå°±æ˜¯å¦‚ä½•å°‡ Leptos å°ˆæ¡ˆéƒ¨ç½²åˆ° GCP ä¸Šçš„æµç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;æ•´é«”ä¾†èªªï¼Œé€™æ¬¡ Leptos çš„é–‹ç™¼é«”é©—å¾ˆä¸éŒ¯ï¼Œéƒ¨ç½²åˆ° App Engine çš„æµç¨‹ä¹Ÿç®—ç°¡å–®ï¼Œä¹‹å¾Œæ‡‰è©²æœƒæŠŠä¸€äº›å°ˆæ¡ˆæ”¹å¯«æˆ Leptos çœ‹çœ‹ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sat, 16 Dec 2023 16:02:32 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/leptos-wasm-gcp.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 3 minutes</category>
    </item>
    <item>
      <title>Rust Web ä¹‹æ—…ï¼šæ–°æ™‚ä»£çš„å¾Œç«¯é–‹ç™¼</title>
      <link>https://railquill.vercel.app/rust-web.html</link>
      <description>2023 COSCUP Rust è­°ç¨‹è»Œä¹‹ä¸€ï¼Œä»‹ç´¹ Rust åœ¨å¾Œç«¯é–‹ç™¼çš„æ‡‰ç”¨ï¼Œä»¥ Tide ç‚ºä¾‹ã€‚</description>
      <content:encoded><![CDATA[
        &lt;p&gt;é€™ç¯‡æ–‡ç« æ˜¯ 2023 COSCUP Rust è­°ç¨‹è»Œä¹‹ä¸€ï¼Œä»‹ç´¹ Rust åœ¨å¾Œç«¯é–‹ç™¼çš„æ‡‰ç”¨ï¼Œä»¥ Tide ç‚ºä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;Rust å·²ç¶“é€£çºŒå¤šå¹´æˆç‚º Stack Overflow æœ€å—æ­¡è¿çš„ç¨‹å¼èªè¨€ï¼Œåœ¨ 2023 å¹´çš„èª¿æŸ¥ä¹Ÿæ¯«ä¸æ„å¤–çš„å†åº¦å¥ªå† ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/ewN57VU.png&quot; alt=&quot;Rust no1&quot;&gt;&lt;/p&gt;

&lt;p&gt;è¨±å¤šå…¬å¸ç´›ç´›å°‡ Rust æ‡‰ç”¨åœ¨ç”¢å“ä¸Šï¼Œä¾‹å¦‚ï¼šAmazonã€Metaã€Microsoftã€Google é€™äº›å¤§å…¬å¸ï¼Œä¸¦ä¸”å¸¶èµ·ä¸€è‚¡ä¼¼ä¹ä»€éº¼éƒ½å¯ä»¥ç”¨ Rust ä¾†é‡æ–°æ”¹å¯«çš„é¢¨æ½®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/xVLtmSH.png&quot; alt=&quot;rewrite it in rust&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ—¢ç„¶ Rust é€™éº¼çŒ›ï¼Œé‚£éº¼æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥é‹ç”¨åœ¨ç¶²é é–‹ç™¼ä¸Šå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œç¾åœ¨å·²ç¶“æœ‰è¨±å¤šçš„æ¡†æ¶å¯ä»¥ç”¨ä¾†é–‹ç™¼ï¼Œæƒ³é–‹ç™¼å‰ç«¯æ²’å•é¡Œï¼Œå¾Œç«¯æ¡†æ¶æ›´æ˜¯å¦‚é›¨å¾Œæ˜¥ç­èˆ¬çš„å†’å‡ºä¾†ï¼Œä¾‹å¦‚ï¼šRocketã€Actixã€Warpã€Tide ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;javascript-rust&quot;&gt;å¾ JavaScript çš„è§’åº¦å­¸ç¿’ Rust&lt;/h2&gt;

&lt;p&gt;èº«ç‚ºç¶²é é–‹ç™¼è€…ï¼Œå¤šå¤šå°‘å°‘éƒ½æœƒä½¿ç”¨ JavaScriptï¼Œæ‰€ä»¥å¾ JavaScript çš„è§’åº¦ä¾†å­¸ç¿’ Rust æœƒæ¯”è¼ƒå®¹æ˜“ç†è§£ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-2c6052bd075b5c0e&quot;&gt;å®£å‘Šè®Šæ•¸&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;let x = 5; // mutable
const y = 10; // constant
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;let x = 5; // immutable
let mut y = 10; // mutable
const Z: i32 = 15; // constant
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;JavaScript ä½¿ç”¨ &lt;code&gt;let&lt;/code&gt; å®£å‘Šå¯è®Šè®Šæ•¸ï¼Œè€Œ &lt;code&gt;const&lt;/code&gt; ç”¨æ–¼å®£å‘Šå¸¸æ•¸ã€‚
Rust é»˜èªä½¿ç”¨ &lt;code&gt;let&lt;/code&gt; å®£å‘Šä¸å¯è®Šè®Šæ•¸ï¼Œéœ€è¦åŠ  &lt;code&gt;mut&lt;/code&gt; é—œéµå­—ä¾†å®£å‘Šå¯è®Šè®Šæ•¸ã€‚&lt;code&gt;const&lt;/code&gt; åœ¨ Rust ä¸­ä¹Ÿç”¨æ–¼å®£å‘Šå¸¸æ•¸ï¼Œä½†éœ€è¦æ˜ç¢ºæŒ‡å®šå‹åˆ¥ï¼Œä¸¦ä¸”è®Šæ•¸åç¨±ç‚ºå¤§å¯«ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-65429879565&quot;&gt;å‹åˆ¥&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;let a = &quot;hello&quot;; // string
let b = 5; // number
let c = 3.14; // number
let d = true; // boolean
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;let a: &amp;amp;str = &quot;hello&quot;; // å­—ä¸²åˆ‡ç‰‡
let b: i32 = 5; // æ•¸å­— i32
let c: f64 = 3.14; // æµ®é»æ•¸ f64
let d: bool = true; // bool
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;JavaScript æ˜¯å‹•æ…‹å‹åˆ¥èªè¨€ï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦åœ¨è®Šæ•¸å®£å‘Šæ™‚æŒ‡å®šå‹åˆ¥ã€‚
Rust æ˜¯éœæ…‹å‹åˆ¥èªè¨€ï¼Œé€šå¸¸æœƒåœ¨è®Šæ•¸å®£å‘Šæ™‚æŒ‡å®šå‹åˆ¥ï¼Œä½† Rust çš„å‹åˆ¥æ¨æ–·ä¹Ÿå¾ˆå¼·å¤§ï¼Œå¯ä»¥åœ¨å¤šæ•¸æƒ…æ³ä¸‹è‡ªå‹•åˆ¤æ–·å‹åˆ¥ï¼Œæ‰€ä»¥ä»¥é€™å€‹ä¾‹å­ä¾†èªªï¼ŒRust çš„å‹åˆ¥å®£å‘Šå¯ä»¥çœç•¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-6542802d35e&quot;&gt;å‡½å¼&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;function calculate(x, y) {
  return x + y;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;fn calculate(x: i32, y: i32) -&amp;gt; i32 {
  x + y
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ JavaScript ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;function&lt;/code&gt; é—œéµå­—å®šç¾©å‡½å¼ã€‚
åœ¨ Rust ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;fn&lt;/code&gt; é—œéµå­—å®šç¾©å‡½å¼ï¼Œä¸¦åœ¨åƒæ•¸å’Œè¿”å›å€¼æ™‚æŒ‡å®šå‹åˆ¥ã€‚
è£œå……ä¸€ä¸‹èªªæ˜ï¼ŒRust çš„å‡½å¼å¯ä»¥çœç•¥ &lt;code&gt;return&lt;/code&gt;ï¼Œæœ€å¾Œä¸€è¡Œçš„é‹ç®—å¼æœƒè‡ªå‹•ç•¶ä½œè¿”å›å€¼ï¼Œä¸¦ä¸”å¯ä»¥çœç•¥åˆ†è™Ÿã€‚&lt;/p&gt;

&lt;h3 id=&quot;if-else&quot;&gt;if...else&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;if (x &amp;gt; y) {
  console.log(&quot;x å¤§æ–¼ y&quot;);
} else {
  console.log(&quot;x ä¸å¤§æ–¼ y&quot;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;if x &amp;gt; y {
  println!(&quot;x å¤§æ–¼ y&quot;);
} else {
  println!(&quot;x ä¸å¤§æ–¼ y&quot;);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å…©ç¨®èªè¨€çš„ if...else çµæ§‹åœ¨èªæ³•ä¸Šå¾ˆç›¸ä¼¼ï¼Œä½† Rust ä¸éœ€è¦æ‹¬è™Ÿä¾†åŒ…è£¹æ¢ä»¶èªå¥ã€‚è£œå……ä¸€ä¸‹ï¼Œ JavaScript çš„ &lt;code&gt;console.log&lt;/code&gt; åœ¨ Rust ä¸­ç­‰åŒæ˜¯ &lt;code&gt;println!&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-65432f2b5e9&quot;&gt;è¿´åœˆ&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;for (let i = 0; i &amp;lt; 10; i++) {
  console.log(`i is ${i}`);
}

while (x &amp;lt; 10) {
  console.log(`x is ${x}`);
  x+=1;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;for i in 0..10 {
  println!(&quot;i is {}&quot;, i);
}

while x &amp;lt; 10 {
  println!(&quot;x is {}&quot;, x);
  x+=1;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…©ç¨®èªè¨€çš„è¿´åœˆèªæ³•ä¹Ÿå¾ˆç›¸ä¼¼ï¼Œä½†åœ¨ Rust ä¸­ï¼Œ&lt;code&gt;for in&lt;/code&gt; ç”¨æ–¼éæ­·ç¯„åœæˆ–é›†åˆã€‚è£œå……ä¸€ä¸‹ï¼Œåœ¨ Rust çš„ &lt;code&gt;println!&lt;/code&gt; ä¸­ï¼Œ&lt;code&gt;{}&lt;/code&gt; ç”¨æ–¼æ ¼å¼åŒ–è¼¸å‡ºï¼Œ&lt;code&gt;{}&lt;/code&gt; æœƒè¢«è®Šæ•¸çš„å€¼å–ä»£ã€‚æ‰€ä»¥é€™å€‹ &lt;code&gt;for&lt;/code&gt; ä¾‹å­å‡ºä¾†çš„çµæœæœƒæ˜¯ &lt;code&gt;i is 0&lt;/code&gt; åˆ° &lt;code&gt;i is 9&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-2e77907a852ede12&quot;&gt;éŒ¯èª¤è™•ç†&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;function divide(x, y) {
  if (y === 0) {
    throw new Error(&quot;ç„¡æ³•é™¤ä»¥ 0&quot;);
  }
  return x / y;
}

try {
  const result = divide(10, 0);
  console.log(result);
} catch (e) {
  console.log(e.message);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;fn divide(x: i32, y: i32) -&amp;gt; Result&amp;lt;i32, String&amp;gt; {
  if y == 0 {
    return Err(&quot;ç„¡æ³•é™¤ä»¥ 0&quot;.to_string());
  }
  Ok(x / y)
}

match divide(10, 0) {
  Ok(result) =&amp;gt; println!(&quot;{}&quot;, result),
  Err(e) =&amp;gt; println!(&quot;{}&quot;, e),
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;JavaScript ä½¿ç”¨ &lt;code&gt;throw&lt;/code&gt; å’Œ &lt;code&gt;try...catch&lt;/code&gt; ä¾†è™•ç†ç•°å¸¸ã€‚
Rust å‰‡ä½¿ç”¨ &lt;code&gt;Result&lt;/code&gt; enum ä¾†è¡¨ç¤ºå¯èƒ½çš„éŒ¯èª¤ï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;match&lt;/code&gt; èªå¥ä¾†è™•ç†é€™äº›çµæœã€‚&lt;/p&gt;

&lt;h3 id=&quot;modules&quot;&gt;modules&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;// calc.js
function calculate(x, y) {
  return x + y;
}

export default calculate;

// index.js
import calculate from &quot;./calc.js&quot;;

console.log(calculate(5, 10));
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;// calc.rs
pub fn calculate(x: i32, y: i32) -&amp;gt; i32 {
  x + y
}

// main.rs
mod calc;
use calc::calculate;

fn main() {
  println!(&quot;{}&quot;, calculate(5, 10));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ JavaScript ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ &lt;code&gt;export&lt;/code&gt; å’Œ &lt;code&gt;import&lt;/code&gt; ä¾†ç®¡ç†æ¨¡çµ„ã€‚
Rust ä½¿ç”¨ &lt;code&gt;mod&lt;/code&gt; é—œéµå­—ä¾†è²æ˜æ¨¡çµ„ï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;use&lt;/code&gt; é—œéµå­—ä¾†å¼•å…¥å®ƒã€‚å…¬é–‹çš„å‡½å¼æˆ–çµæ§‹éœ€è¦ä½¿ç”¨ &lt;code&gt;pub&lt;/code&gt; é—œéµå­—ã€‚&lt;/p&gt;

&lt;h2 id=&quot;tide&quot;&gt;å¦‚ä½•ä½¿ç”¨ Tide&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆå»ºç«‹ä¸€å€‹æ–°å°ˆæ¡ˆ:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ cargo new tide_crud
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸¦ä¸”å®‰è£ç›¸é—œçš„å¥—ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[package]
name = &quot;tide_crud&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
tide = { version = &quot;0.16.0&quot; }
tokio = { version = &quot;1.29.1&quot;, features = [&quot;full&quot;] } // éåŒæ­¥è™•ç†
serde = { version = &quot;1.0&quot;, features = [&quot;derive&quot;] } // å°‡è³‡æ–™è½‰æ›å„ç¨®æ ¼å¼ï¼Œä¾‹å¦‚ JSONã€YAMLã€XML ç­‰
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®‰è£æ–¹æ³•å°±æ˜¯ç›´æ¥åœ¨ &lt;code&gt;Cargo.toml&lt;/code&gt; ä¸­ &lt;code&gt;dependencies&lt;/code&gt; åº•ä¸‹åŠ å…¥ &lt;code&gt;tide&lt;/code&gt;ã€&lt;code&gt;tokio&lt;/code&gt; å’Œ &lt;code&gt;serde&lt;/code&gt; é€™ä¸‰å€‹å¥—ä»¶ï¼Œç„¶å¾Œåªè¦ä¸€åŸ·è¡Œ &lt;code&gt;cargo run&lt;/code&gt; å°±æœƒè‡ªå‹•å®‰è£ã€‚&lt;/p&gt;

&lt;h3 id=&quot;hello-world&quot;&gt;Hello World&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use tide::{Request, Result};

async fn hello(_req: Request&amp;lt;()&amp;gt;) -&amp;gt; Result&amp;lt;String&amp;gt; {
    Ok(&quot;Hello, world!&quot;.to_string())
}

#[tokio::main]

async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
    let mut app = tide::new();
    app.at(&quot;/&quot;).get(hello);
    app.listen(&quot;0.0.0.0:8080&quot;).await?;
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹ä¾†åªè¦åŸ·è¡Œ &lt;code&gt;cargo run -q&lt;/code&gt;ï¼Œç€è¦½å™¨æ‰“é–‹ &lt;code&gt;http://localhost:8080&lt;/code&gt; å°±å¯ä»¥çœ‹åˆ° &lt;code&gt;Hello, world!&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-2cc29d4a21d7eeec&quot;&gt;æŸ¥è©¢åƒæ•¸&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use tide::{Request, Result, new};

async fn handle_name(req: Request&amp;lt;()&amp;gt;) -&amp;gt; Result&amp;lt;String&amp;gt; {
    let name = req
        .url()
        .query_pairs()
        .find(|(key, _)| key == &quot;name&quot;)
        .map(|(_, value)| value)
        .unwrap_or(&quot;world&quot;.into());

    Ok(format!(&quot;Hello, {}!&quot;, name))
}

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
    let mut app = new();
    app.at(&quot;/&quot;).get(handle_name);
    app.listen(&quot;0.0.0.0:8080&quot;).await?;
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å€‹ä¾‹å­å±•ç¤ºäº†å¦‚ä½•å¾ URL ä¸­ç²å–æŸ¥è©¢åƒæ•¸ã€‚å¦‚æœæä¾›äº† name æŸ¥è©¢åƒæ•¸ï¼Œå®ƒå°‡ç”¨æ–¼å›æ‡‰ï¼Œå¦å‰‡é è¨­ç‚º &quot;world&quot;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;json&quot;&gt;JSON è™•ç†&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use tide::{Request, Result, new};

#[derive(serde::Deserialize)]
struct Rust {
    name: String,
    version: f32,
}

async fn create(mut req: Request&amp;lt;()&amp;gt;) -&amp;gt; Result&amp;lt;String&amp;gt; {
    let rust: Rust = req.body_json().await?;
    Ok(format!(&quot;Hello {}! Your Rust version is {}.&quot;, rust.name, rust.version))
}

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
    let mut app = new();
    app.at(&quot;/rust&quot;).post(create);
    app.listen(&quot;0.0.0.0:8080&quot;).await?;
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™è£¡å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Tide è™•ç† JSON è³‡æ–™ã€‚ç•¶ä½ å‘ &lt;code&gt;/rust&lt;/code&gt; è·¯å¾‘ç™¼é€ POST è«‹æ±‚ä¸¦æä¾›æ­£ç¢ºçš„ JSON è³‡æ–™æ™‚ï¼Œä¼ºæœå™¨å°‡å›å‚³ä¸€å€‹æ ¼å¼åŒ–çš„è¨Šæ¯ã€‚&lt;/p&gt;

&lt;p&gt;é€™å€‹ä¾‹å­ï¼Œå‡å¦‚åœ¨ Postman è¼¸å…¥ä»¥ä¸‹è³‡æ–™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;{
    &quot;name&quot;: &quot;Bucky&quot;,
    &quot;version&quot;: 1.8
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‰‡æœƒå›å‚³ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Hello Bucky! Your Rust version is 1.8.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;part-2c91238211f1da0f&quot;&gt;å·¢ç‹€è·¯ç”±&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use tide::{Request, Result, new};

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
    let mut app = new();
    app.at(&quot;/rust&quot;).nest({
        let mut api = new();
        api.at(&quot;/&quot;).post(|_req: Request&amp;lt;()&amp;gt;| async move { Ok(&quot;Create&quot;) });
        api.at(&quot;/:id&quot;)
            .get(|_req: Request&amp;lt;()&amp;gt;| async move { Ok(&quot;Read&quot;) });
        api.at(&quot;/version&quot;).get(|_req: Request&amp;lt;()&amp;gt;| async move { Ok(&quot;1.0.0&quot;) });

        api
    });
    app.listen(&quot;0.0.0.0:8080&quot;).await?;
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å€‹ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å·¢ç‹€è·¯ç”±ä¾†çµ„ç¹”ä½ çš„æ‡‰ç”¨ç¨‹å¼ã€‚nest æ–¹æ³•å…è¨±ä½ åœ¨ä¸€å€‹çµ¦å®šçš„è·¯å¾‘ä¸‹å»ºç«‹å¤šå€‹è·¯ç”±ã€‚&lt;/p&gt;

&lt;h3 id=&quot;status-code&quot;&gt;status code&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use tide::{new, Request, Response, Result, StatusCode};

async fn create(_req: Request&amp;lt;()&amp;gt;) -&amp;gt; Result {
    let res = Response::builder(StatusCode::Created)
        .body(&quot;Hello, world!&quot;)
        .build();
    Ok(res)
}

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
    let mut app = new();
    app.at(&quot;/rust&quot;).post(create);
    app.listen(&quot;0.0.0.0:8080&quot;).await?;
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å€‹ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Tide è™•ç† status codeã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœè¦ä½¿ç”¨è‡ªå®šç¾©çš„ status codeï¼Œå‰‡åœ¨ &lt;code&gt;Response::new()&lt;/code&gt; æ™‚ï¼Œåƒæ•¸å‚³å…¥è‡ªå®šç¾©çš„ status code å³å¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;let mut res = Response::new(200);
res.set_body(&quot;Hello, world!&quot;);
Ok(res)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;file-server&quot;&gt;file server&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use tide::{Result, new};

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
    let mut app = new();
    app.at(&quot;/file.txt&quot;).serve_file(&quot;src/hello.txt&quot;)?;
    app.at(&quot;/test&quot;).serve_dir(&quot;./www&quot;)?;
    app.listen(&quot;0.0.0.0:8080&quot;).await?;
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å€‹ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Tide ä¾†è™•ç†éœæ…‹æª”æ¡ˆã€‚&lt;/p&gt;

&lt;h3 id=&quot;logger&quot;&gt;logger&lt;/h3&gt;

&lt;p&gt;å…ˆå®‰è£ &lt;code&gt;femme&lt;/code&gt; å¥—ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml&quot;&gt;[dependencies]
femme = &quot;2.2.1&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use tide::{Result, new, log};

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
    femme::start();
    let mut app = new();
    app.with(log::LogMiddleware::new());
    app.at(&quot;/&quot;).get(|_| async {
        Ok(&quot;Hello, world!&quot;)
    });
    app.listen(&quot;0.0.0.0:8080&quot;).await?;
    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€é femme åœ¨å•Ÿå‹•ä¼ºæœå™¨å¾Œï¼Œæ¯ç•¶æœ‰ä»»ä½•è«‹æ±‚ï¼Œåœ¨çµ‚ç«¯æ©Ÿä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°æœ‰é—œé€™æ¬¡è«‹æ±‚çš„æ—¥èªŒè³‡è¨Šã€‚&lt;/p&gt;

&lt;h3 id=&quot;crud-api&quot;&gt;å»ºç«‹ CRUD API&lt;/h3&gt;

&lt;h4 id=&quot;model&quot;&gt;å»ºç«‹ model&lt;/h4&gt;

&lt;p&gt;å…ˆæ–°å¢ä¸€å€‹ &lt;code&gt;models.rs&lt;/code&gt; æª”æ¡ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use std::collections::HashMap;

#[derive(serde::Deserialize, serde::Serialize)]
pub struct User {
    pub id: u32,
    pub name: String,
    pub email: String,
}

pub struct Repository {
    pub users: HashMap&amp;lt;u32, User&amp;gt;,
}

impl Repository {
  pub fn new() -&amp;gt; Self {
    Self {
      users: HashMap::new(),
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨é€™å€‹ &lt;code&gt;models.rs&lt;/code&gt; æª”æ¡ˆä¸­ï¼Œå®šç¾©äº†ä¸€å€‹åç‚º &lt;code&gt;User&lt;/code&gt; çš„çµæ§‹é«”ï¼Œä»£è¡¨ä¸€å€‹ç”¨æˆ¶ï¼Œä»¥åŠä¸€å€‹åç‚º &lt;code&gt;Repository&lt;/code&gt; çš„çµæ§‹é«”ï¼Œä»£è¡¨ç”¨æˆ¶çš„å„²å­˜åº«ã€‚&lt;code&gt;Repository&lt;/code&gt; ä½¿ç”¨ &lt;code&gt;HashMap&lt;/code&gt; ä¾†å„²å­˜ &lt;code&gt;User&lt;/code&gt; å¯¦ä¾‹ï¼Œå…¶ä¸­ç”¨æˆ¶çš„ ID ä½œç‚º keyã€‚&lt;/p&gt;

&lt;h4 id=&quot;controller&quot;&gt;å»ºç«‹ controller&lt;/h4&gt;

&lt;p&gt;å†æ–°å¢ä¸€å€‹ &lt;code&gt;controller.rs&lt;/code&gt; æª”æ¡ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use crate::models::{Repository, User};
use tide::{Body, Request, Result, StatusCode};
use std::sync::Arc;
use tokio::sync::RwLock;

type State = Arc&amp;lt;RwLock&amp;lt;Repository&amp;gt;&amp;gt;;

pub async fn create(mut req: Request&amp;lt;State&amp;gt;) -&amp;gt; Result {
    let user: User = req.body_json().await?;
    let state = req.state();
    let mut repo = state.write().await;

    repo.users.insert(user.id, user);

    Ok(StatusCode::Ok.into())
}

pub async fn read(req: Request&amp;lt;State&amp;gt;) -&amp;gt; Result {
    let state = req.state();
    let repo = &amp;amp;state.read().await;

    Ok(Body::from_json(&amp;amp;repo.users)?.into())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ &lt;code&gt;controller.rs&lt;/code&gt; æª”æ¡ˆä¸­ï¼Œå®šç¾©äº†å¹¾å€‹æ§åˆ¶å™¨å‡½æ•¸ï¼Œé€™äº›å‡½æ•¸æ˜¯ç”¨ä¾†è™•ç† Web è«‹æ±‚çš„ã€‚é€™è£¡å®šç¾©äº† &lt;code&gt;create&lt;/code&gt; å’Œ &lt;code&gt;read&lt;/code&gt; å‡½æ•¸ï¼Œåˆ†åˆ¥ç”¨æ–¼æ–°å¢å’Œè®€å–ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;createï¼šå¾è«‹æ±‚çš„ JSON ä¸»é«”ä¸­ç²å–ç”¨æˆ¶è³‡æ–™ï¼Œç„¶å¾Œæ·»åŠ åˆ°å„²å­˜åº«ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;readï¼šå¾å„²å­˜åº«ä¸­ç²å–æ‰€æœ‰ç”¨æˆ¶çš„è³‡æ–™ï¼Œç„¶å¾Œä»¥ JSON æ ¼å¼è¿”å›ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;main-rs-create-read&quot;&gt;åœ¨ main.rs ä¸­ä½¿ç”¨ create &amp;amp; read&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;mod models;
mod controller;

use std::sync::Arc;
use tide::Result;
use tokio::sync::RwLock;
use models::Repository;
use controller::{create, read};

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
  femme::start();
  let state = Arc::new(RwLock::new(Repository::new()));
  let mut app = tide::with_state(state);
  app.at(&quot;/users&quot;).post(create);
  app.at(&quot;/users&quot;).get(read);
  app.listen(&quot;0.0.0.0:8080&quot;).await?;
  Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ &lt;code&gt;main.rs&lt;/code&gt; ä¸­ï¼Œé¦–å…ˆå¼•å…¥ä¹‹å‰å®šç¾©çš„æ¨¡å‹å’Œæ§åˆ¶å™¨ï¼Œä¸¦å»ºç«‹äº†ä¸€å€‹æ–°çš„å„²å­˜åº«ä¸¦å°‡å…¶å„²å­˜åœ¨å…±äº«ç‹€æ…‹ä¸­ã€‚ç„¶å¾Œå®šç¾©äº†è·¯ç”±ä»¥è™•ç†ä½¿ç”¨è€…çš„æ–°å¢èˆ‡è®€å–æ“ä½œã€‚&lt;/p&gt;

&lt;h4 id=&quot;update-delete&quot;&gt;update &amp;amp; delete&lt;/h4&gt;

&lt;p&gt;åœ¨ &lt;code&gt;controller.rs&lt;/code&gt; ä¸­æ–°å¢ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;pub async fn update(mut req: Request&amp;lt;State&amp;gt;) -&amp;gt; Result {
    let id: u32 = req.param(&quot;id&quot;)?.parse()?;
    let user: User = req.body_json().await?;
    let state = req.state();
    let mut repo = state.write().await;

    if repo.users.contains_key(&amp;amp;id) {
        repo.users.insert(id, user);
        Ok(StatusCode::Ok.into())
    } else {
        Ok(StatusCode::NotFound.into())
    }
}

pub async fn delete(req: Request&amp;lt;State&amp;gt;) -&amp;gt; Result {
    let id: u32 = req.param(&quot;id&quot;)?.parse()?;
    let state = req.state();
    let mut repo = state.write().await;

    if repo.users.contains_key(&amp;amp;id) {
        repo.users.remove(&amp;amp;id);
        Ok(StatusCode::Ok.into())
    } else {
        Ok(StatusCode::NotFound.into())
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ &lt;code&gt;controller.rs&lt;/code&gt; æ·»åŠ å…©å€‹æ–°çš„æ§åˆ¶å™¨å‡½æ•¸ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;updateï¼šæ›´æ–°å…·æœ‰æŒ‡å®š ID çš„ç”¨æˆ¶çš„è³‡æ–™ã€‚å¦‚æœç”¨æˆ¶å­˜åœ¨ï¼Œå‰‡æ›´æ–°å…¶è³‡æ–™ï¼›å¦å‰‡ï¼Œè¿”å› 404 Not Foundã€‚&lt;/li&gt;
&lt;li&gt;deleteï¼šåˆªé™¤å…·æœ‰æŒ‡å®š ID çš„ç”¨æˆ¶ã€‚å¦‚æœç”¨æˆ¶å­˜åœ¨ï¼Œå‰‡å¾å„²å­˜åº«ä¸­åˆªé™¤å®ƒï¼›å¦å‰‡ï¼Œè¿”å› 404 Not Foundã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;main-rs-update-delete&quot;&gt;åœ¨ main.rs ä¸­ä½¿ç”¨ update &amp;amp; delete&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use controller::{create, read, update, delete};

#[tokio::main]
async fn main() -&amp;gt; Result&amp;lt;()&amp;gt; {
  femme::start();
  let state = Arc::new(RwLock::new(Repository::new()));
  let mut app = tide::with_state(state);
  app.at(&quot;/users&quot;).post(create);
  app.at(&quot;/users&quot;).get(read);
  app.at(&quot;/users/:id&quot;).put(update);
  app.at(&quot;/users/:id&quot;).delete(delete);
  app.listen(&quot;0.0.0.0:8080&quot;).await?;
  Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€å¾Œåœ¨ &lt;code&gt;main.rs&lt;/code&gt; åŠ å…¥æ–°çš„è·¯ç”±ä»¥ä½¿ç”¨ä¸Šé¢å®šç¾©çš„ &lt;code&gt;update&lt;/code&gt; å’Œ &lt;code&gt;delete&lt;/code&gt; æ§åˆ¶å™¨å‡½æ•¸ã€‚é€™æ¨£å°±å¯ä»¥å»ºç«‹å®Œä¸€å€‹å®Œæ•´çš„ CRUD APIã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-6542bd861e6&quot;&gt;å¿ƒå¾—&lt;/h2&gt;

&lt;p&gt;æ„Ÿè¬é€™æ¬¡ COSCUP æ‰€æœ‰çš„å·¥ä½œäººå“¡ï¼Œæ²’æœ‰ä½ å€‘çš„å”åŠ©ï¼Œè®“æˆ‘æœ‰é€™æ¬¡å¯¶è²´çš„æ©Ÿæœƒä¸¦ä¸”é †åˆ©å®Œæˆé€™æ¬¡åˆ†äº«ï¼Œä¹Ÿè¦ç‰¹åˆ¥æ„Ÿè¬ nukr å¤§å¤§å¹«æˆ‘ä¸»æŒï¼Œæ²’æƒ³éæœƒé€™éº¼å¤šäººåƒåŠ ï¼Œè¬è¬å¤§å®¶çš„æ”¯æŒï¼Œå¸Œæœ›å¤§å®¶éƒ½æœ‰ç²å¾—ä¸€äº›æ±è¥¿å›å»ã€‚(æ„Ÿè¬ Patty ä¸€è·¯é™ªæˆ‘ä¸¦å¹«æˆ‘æ‹ç…§)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/JiNUdaE.jpg&quot; alt=&quot;20230806171203&quot;&gt;&lt;/p&gt;

&lt;p&gt;è®“æˆ‘ç‚«è€€ä¸€ä¸‹è¢« Rust å¤§ç¥ Luca Palmieri ç™¼æ–‡çš„&lt;a href=&quot;https://twitter.com/algo_luca/status/1685487697580969984&quot;&gt;æ¨ç‰¹&lt;/a&gt;ï¼š
&lt;img src=&quot;https://i.imgur.com/si8mVlN.png&quot; alt=&quot;20230806171749&quot;&gt;&lt;/p&gt;

&lt;p&gt;æœ€å¾Œæœ‰èˆˆè¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ç•¶å¤©çš„&lt;a href=&quot;https://gamma.app/public/Rust-Web--0a2uen43e3soifp&quot;&gt;ç°¡å ±åˆ†äº«&lt;/a&gt;&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sun, 06 Aug 2023 16:52:40 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-web.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 7 minutes</category>
    </item>
    <item>
      <title>æ·ºè«‡åœ¨ 2023 å¹´çš„ React é‚„éœ€è¦ Redux å—ï¼Ÿ</title>
      <link>https://railquill.vercel.app/2023-react-redux.html</link>
      <description>æ·ºè«‡åœ¨ 2023 å¹´çš„ React é‚„éœ€è¦ Redux å—ï¼Ÿ</description>
      <content:encoded><![CDATA[
        &lt;h1 id=&quot;2023-react-redux&quot;&gt;æ·ºè«‡åœ¨ 2023 å¹´çš„ React é‚„éœ€è¦ Redux å—ï¼Ÿ&lt;/h1&gt;

&lt;p&gt;å‰å¹¾å¤©åœ¨æ¨ç‰¹ä¸Šçœ‹åˆ°æœ‰äººæå•æ¨™é¡Œé€™å€‹å•é¡Œï¼Œæœ‰äº›ç¶²å‹å›è¦† Redux å¤ªè¤‡é›œï¼Œå»ºè­°æ”¹ç”¨å…¶ä»–çš„ç‹€æ…‹ç®¡ç†å¥—ä»¶ã€‚ä¹Ÿæœ‰ç¶²å‹æå‡º React éƒ½æœ‰ context API ä¾†è™•ç†è·¨å…ƒä»¶ç‹€æ…‹äº†ï¼Œæ ¹æœ¬ä¸éœ€è¦ Reduxã€‚&lt;/p&gt;

&lt;p&gt;åœ¨é€™å€‹å•é¡Œä¸Šï¼Œè¨±å¤šé–‹ç™¼è€…å¯èƒ½æœƒæœ‰ä¸åŒçš„è§€é»ï¼Œä½†è®“æˆ‘å€‘å…ˆå¾æœ€åŸºæœ¬çš„ React context é–‹å§‹æ¯”è¼ƒï¼Œç„¶å¾Œå†æ¢è¨ Reduxã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œæˆ‘å€‘ä¾†çœ‹çœ‹ React çš„ context APIã€‚React context æä¾›äº†ä¸€ç¨®æ–¹å¼ä¾†å…±äº«å€¼ï¼Œä¾‹å¦‚é€™äº›å€¼æ˜¯å…¨åŸŸçš„ï¼Œä¾‹å¦‚ä¸»é¡Œã€èªè¨€åå¥½ç­‰ç­‰ï¼Œè€Œä¸éœ€è¦æ‰‹å‹•å°‡ &lt;code&gt;props&lt;/code&gt; å‚³ééå¤šå±¤ã€‚ç„¶è€Œï¼Œç•¶æˆ‘å€‘ä½¿ç”¨ &lt;code&gt;useContext&lt;/code&gt; ä¸¦æ­é… &lt;code&gt;useReducer&lt;/code&gt; ä¾†ä½œç‚ºå…¨åŸŸç‹€æ…‹ç®¡ç†æ™‚ï¼Œæ‰€æœ‰ä½¿ç”¨è©² context çš„å…ƒä»¶å°‡æœƒåœ¨ state è®Šæ›´æ™‚é‡æ–° renderï¼Œä¸è«–ä»–å€‘ä½¿ç”¨çš„ state éƒ¨åˆ†æ˜¯å¦æœ‰æ”¹è®Šã€‚å¦‚æœä½ æœ‰ä¸€å€‹æ²’æœ‰è¢« &lt;code&gt;useCallback&lt;/code&gt; åŒ…è£¹çš„è™•ç†å™¨ï¼Œé‚£éº¼è™›æ“¬ DOM æ¯”å°å°‡æœƒå¤±æ•—ï¼Œé€™äº›å…ƒä»¶å°‡æœƒå°è‡´ DOM æ›´æ–°ã€‚ç•¶ç„¶ä½ å¯ä»¥æœ‰å¤šå€‹å°çš„ contextsï¼Œä½†é€™æ¨£ä½ å°±æœƒæœ‰å¤šå€‹ç‹€æ…‹çš„ä¾†æºï¼Œé€™å¯èƒ½é‚„æ˜¯å¾—æ ¹æ“šä½ çš„éœ€æ±‚å’Œå¯¦ä½œæ–¹å¼ä¾†åˆ¤åˆ¥é€™æ¨£æ˜¯å¥½æ˜¯å£ã€‚&lt;/p&gt;

&lt;p&gt;å¦ä¸€æ–¹é¢ï¼ŒRedux æä¾›äº†ä¸€å€‹é›†ä¸­å¼å’Œé æ¸¬æ€§çš„ state å®¹å™¨ï¼Œè®“ä½ å¯ä»¥åœ¨æ•´å€‹æ‡‰ç”¨ç¨‹å¼ä¸­ç®¡ç†ç‹€æ…‹ã€‚å„˜ç®¡åœ¨å¼•å…¥ hooks å’Œ context API ä¹‹å¾Œï¼ŒReact æä¾›äº†ä¸€ç¨®æ–¹å¼ä¾†åœ¨çµ„ä»¶ä¹‹é–“å…±äº«ç‹€æ…‹ï¼Œä½† Redux ä»ç„¶æœ‰å…¶åƒ¹å€¼ã€‚Redux çš„ä¸»è¦å„ªå‹¢åœ¨æ–¼å®ƒçš„åš´è¬¹çš„æ›´æ–°é‚è¼¯ï¼šæ‰€æœ‰çš„ç‹€æ…‹æ›´æ–°éƒ½è¢«é›†ä¸­è™•ç†ä¸¦é€šé actions å’Œ reducers ä¾†æè¿°ã€‚é€™ç¨®æ–¹æ³•æä¾›äº†å¾ˆé«˜çš„å¯é æ¸¬æ€§å’Œä¸€è‡´æ€§ï¼Œé€™åœ¨è¤‡é›œçš„æ‡‰ç”¨ç¨‹å¼ä¸­æ˜¯å¾ˆæœ‰åƒ¹å€¼çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸é Redux å‡ºäº†åå›°é›£çš„å­¸ç¿’æ›²ç·šï¼Œå°æ–¼é–‹ç™¼è€…ä¾†èªªä¹Ÿæ˜¯ä¸€å€‹æœ›è€Œå»æ­¥çš„é–€æª»ã€‚æˆ‘ä¹‹å‰ä¹Ÿå¯«äº†ä¸€ç¯‡ä»‹ç´¹ Redux çš„æ–‡ç« ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„&lt;a href=&quot;https://bucky0112.github.io/2022/03/10/libraries-redux/&quot;&gt;é€™ç¯‡æ–‡ç« &lt;/a&gt;å»çœ‹çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼ŒRedux ä¹Ÿæ¨å‡ºäº† Redux Toolkit(RTK) ä¾†é€²ä¸€æ­¥ç°¡åŒ– Redux çš„ä½¿ç”¨ã€‚RTK æ˜¯ Redux çš„å®˜æ–¹å·¥å…·é›†ï¼Œå…¶ä¸»è¦ç›®æ¨™æ˜¯è§£æ±º Redux éæ–¼è¤‡é›œçš„å•é¡Œï¼Œä¸¦ä¸”æä¾›äº†ä¸€çµ„å·¥å…·ä¾†å”åŠ©ä½ æ›´ç°¡å–®åœ°å¯« Reduxï¼Œæ‰€ä»¥é–‹ç™¼è€…å¯ä»¥å¯«å‡ºæ›´ç²¾ç°¡ã€æ›´å¯è®€çš„ Redux ä»£ç¢¼ï¼Œä¸¦ä¸”æœ‰æ›´å¥½çš„é–‹ç™¼è€…é«”é©—ã€‚&lt;/p&gt;

&lt;p&gt;RTK æä¾›äº† &lt;code&gt;configureStore()&lt;/code&gt; å‡½æ•¸ä¾†å»ºç«‹ storeï¼Œé€™æ¯”éå»çš„ &lt;code&gt;createStore()&lt;/code&gt; æä¾›äº†æ›´å¤šçš„å¥½è™•ã€‚&lt;code&gt;configureStore()&lt;/code&gt; æœƒè‡ªå‹•æ·»åŠ éåŒæ­¥çš„èƒ½åŠ›ï¼Œä¸¦ä¸”æ”¯æ´ &lt;a href=&quot;https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd&quot;&gt;Redux Devtools Extension&lt;/a&gt;ï¼Œé€™å¯ä»¥è®“é–‹ç™¼è€…åœ¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·è¼•é¬†çœ‹åˆ°ç‹€æ…‹çš„è®Šæ›´ï¼Œç•¶ç„¶é‚„æœ‰å…¶ä»–çš„å¥½è™•ï¼Œä¾‹å¦‚æˆ‘å€‘ä¸å†éœ€è¦ &lt;code&gt;combineReducers()&lt;/code&gt;ï¼Œä»¥ä¸‹æ˜¯ç”¨ RTK æ‰€åšçš„ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼š&lt;/p&gt;



&lt;p&gt;å› æ­¤ï¼Œå„˜ç®¡ React çš„ context æä¾›äº†ç°¡æ˜“çš„æ–¹å¼ä¾†è™•ç†è·¨å…ƒä»¶çš„ç‹€æ…‹ï¼Œä½†å¾ä¸Šé¢çš„ RTK çš„ç¯„ä¾‹ä¾†çœ‹ï¼Œåœ¨ä¸å¤±å»åŸæœ¬ Redux å¼·å¤§çš„ç‹€æ…‹ç®¡ç†ä¹‹ä¸‹ï¼Œå»ç°¡åŒ–äº†å¾ˆå¤šç¹è¤‡çš„è¨­å®šã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-6542fd4e95a&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;React Context API æ˜¯ä¸€ç¨®éå¸¸æœ‰æ•ˆçš„å·¥å…·ï¼Œå®ƒå¯ä»¥è™•ç†è¨±å¤šè·¨å…ƒä»¶çš„ç‹€æ…‹å…±äº«å•é¡Œã€‚ç„¶è€Œï¼Œå°æ–¼å¤§å‹æˆ–è¤‡é›œçš„æ‡‰ç”¨ç¨‹å¼ä¾†èªªï¼ŒRedux æä¾›çš„é›†ä¸­å¼ç‹€æ…‹ç®¡ç†èƒ½åŠ›å¯èƒ½æœƒæ›´é©åˆã€‚å°¤å…¶æ˜¯ç•¶ä½ éœ€è¦æ›´åš´è¬¹çš„ç‹€æ…‹æ›´æ–°é‚è¼¯ï¼Œæˆ–æ˜¯èˆ‡å…¶ä»–å·¥å…·ï¼ˆä¾‹å¦‚ Redux DevToolsï¼‰çš„æ­é…æ™‚ã€‚&lt;/p&gt;

&lt;p&gt;è€Œ Redux Toolkit æ˜¯ Redux çš„ç¾ä»£åŒ–ç‰ˆæœ¬ï¼Œå®ƒç°¡åŒ–äº† Redux çš„è¨±å¤šç¹è¤‡éƒ¨åˆ†ï¼Œä¸¦åŠ å…¥äº†è¨±å¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚è‡ªå‹•è™•ç† action å’Œ reducer çš„å‰µå»ºã€è™•ç†ç•°æ­¥é‚è¼¯å’Œç‹€æ…‹çš„ä¸å¯è®Šæ€§ã€‚å› æ­¤ï¼Œå°æ–¼éœ€è¦è¤‡é›œç‹€æ…‹ç®¡ç†ä¸”å°‹æ±‚ç°¡åŒ–é–‹ç™¼é«”é©—çš„å°ˆæ¡ˆï¼ŒRedux Toolkit æ˜¯ä¸€å€‹å¾ˆå¥½çš„é¸æ“‡ã€‚&lt;/p&gt;

&lt;p&gt;ç¸½çš„ä¾†èªªï¼Œé¸æ“‡ä½¿ç”¨ Redux æˆ–æ˜¯ React Contextï¼Œæˆ–æ˜¯å…¶ä»–çš„ç‹€æ…‹ç®¡ç†å·¥å…·ï¼Œæ‡‰è©²åŸºæ–¼ä½ çš„å°ˆæ¡ˆéœ€æ±‚ï¼Œä¸¦è€ƒæ…®åˆ°æ¯ç¨®å·¥å…·çš„å„ªç¼ºé»ã€‚åœ¨æŸäº›æƒ…æ³ä¸‹ï¼ŒRedux æä¾›çš„åš´è¬¹çš„ç‹€æ…‹ç®¡ç†å’Œå¥å…¨çš„é–‹ç™¼è€…å·¥å…·å¯èƒ½æ˜¯å¿…è¦çš„ï¼›è€Œåœ¨å…¶ä»–æƒ…æ³ä¸‹ï¼ŒReact Context çš„è¼•é‡ç´šå’Œéˆæ´»æ€§å¯èƒ½å°±è¶³å¤ äº†ã€‚æ‰€ä»¥ï¼Œåœ¨ä½ é¸æ“‡å·¥å…·çš„æ™‚å€™ï¼Œæœ€é‡è¦çš„æ˜¯ç†è§£ä½ çš„å°ˆæ¡ˆéœ€æ±‚å’Œé€™äº›å·¥å…·çš„é©ç”¨æƒ…å¢ƒã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sat, 20 May 2023 11:27:10 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/2023-react-redux.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 1 minutes</category>
    </item>
    <item>
      <title>React Native x Expo x TypeScript å¯¦ä½œè¨ˆç®—æ©Ÿ</title>
      <link>https://railquill.vercel.app/react-native-x-expo-x-typescript.html</link>
      <description>è®“æˆ‘å€‘ä¾†ç”¨ React Native å’Œ Expoï¼Œé‚„æœ‰ TypeScript ä¾†å¯«ä¸€å€‹è¨ˆç®—æ©Ÿæ‰‹æ©Ÿ App å§ï¼</description>
      <content:encoded><![CDATA[
        &lt;p&gt;è®“æˆ‘å€‘ä¾†ç”¨ React Native å’Œ Expoï¼Œé‚„æœ‰ TypeScript ä¾†å¯«ä¸€å€‹è¨ˆç®—æ©Ÿæ‰‹æ©Ÿ App å§ï¼&lt;/p&gt;

&lt;h2 id=&quot;react-native&quot;&gt;ä»€éº¼æ˜¯ React Native?&lt;/h2&gt;

&lt;p&gt;React Native æ˜¯ä¸€å€‹ç”¨æ–¼æ§‹å»ºç§»å‹•æ‡‰ç”¨ç¨‹åºçš„ JavaScript æ¡†æ¶ã€‚å¯ä»¥è®“é–‹ç™¼è€…ä½¿ç”¨ ReactJS ç‚º iOS å’Œ Android å¹³å°å‰µå»ºæ‰‹æ©Ÿ Appã€‚ React Native æä¾›äº†ä¸€å¥—é æ§‹å»ºçš„çµ„ä»¶ï¼Œå¯ä»¥ç”¨ä¾†æ§‹å»ºæ‡‰ç”¨ç¨‹åºçš„ç”¨æˆ¶ç•Œé¢ï¼Œä½¿å¾—å‰µå»ºç§»å‹•æ‡‰ç”¨ç¨‹åºè®Šå¾—å¿«é€Ÿè€Œç°¡å–®ã€‚&lt;/p&gt;

&lt;h2 id=&quot;expo&quot;&gt;ä»€éº¼æ˜¯ Expo?&lt;/h2&gt;

&lt;p&gt;Expo æ˜¯ä¸€å¥—ç”¨æ–¼æ§‹å»ºå’Œéƒ¨ç½² React Native æ‡‰ç”¨ç¨‹åºçš„å·¥å…·å’Œæœå‹™ã€‚å®ƒç‚ºé–‹ç™¼è€…æä¾›äº†ä¸€å€‹å¹³å°ï¼Œå¯ä»¥åœ¨å„ç¨®è¨­å‚™å’Œå¹³å°ä¸Šè¼•é¬†è¨­ç½®ã€é‹è¡Œå’Œæ¸¬è©¦ä»–å€‘çš„ React Native æ‡‰ç”¨ã€‚ Expo é‚„æä¾›äº†ä¸€ç³»åˆ—çš„ library å’Œ APIï¼Œå¯ç”¨æ–¼ç‚ºæ‡‰ç”¨ç¨‹åºæ·»åŠ åŠŸèƒ½ï¼Œå¦‚ç…§ç›¸ã€æ¨é€é€šçŸ¥ç­‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2caaddad57c9f7a8&quot;&gt;å»ºç«‹å°ˆæ¡ˆ&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆä¾†å»ºç«‹å°ˆæ¡ˆï¼Œå¦‚æœé€™å€‹å°ˆæ¡ˆå–åç‚º &lt;code&gt;calculator&lt;/code&gt;ï¼Œé‚£éº¼å°±åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npx create-expo-app calculator --template
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å› ç‚ºæˆ‘å€‘è¦ä½¿ç”¨ TypeScriptï¼Œæ‰€ä»¥æˆ‘å€‘è¦é¸æ“‡ &lt;code&gt;blank (TypeScript)&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£å¦‚æœæ²’å•é¡Œçš„è©±ï¼Œå°±æœƒé¡¯ç¤ºä»¥ä¸‹è¨Šæ¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;âœ… Your project is ready!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å°±é€²å…¥å°ˆæ¡ˆç›®éŒ„å¾Œï¼Œå•Ÿå‹•å°ˆæ¡ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;expo start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾ŒæŒ‰ä¸‹ &lt;code&gt;i&lt;/code&gt;ï¼Œå°±æœƒæ‰“é–‹ iOS æ¨¡æ“¬å™¨ï¼Œå¦‚æœè¦ä½¿ç”¨ Android çš„è©±ï¼Œå°±æŒ‰ä¸‹ &lt;code&gt;a&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/bbrxsxO.png&quot; alt=&quot;20230218021734&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;part-b021db5f8bc2840&quot;&gt;å®‰è£æ¨£å¼å¥—ä»¶&lt;/h2&gt;

&lt;p&gt;å› ç‚ºæˆ‘è¦ºå¾— React Native çš„æ¨£å¼å¯«èµ·ä¾†å¾ˆéº»ç…©ï¼Œè€Œä¸”å·²ç¶“å¾ˆç¿’æ…£ TailwindCSS äº†ï¼Œæ‰€ä»¥æˆ‘å€‘è¦å®‰è£ &lt;code&gt;NativeWind&lt;/code&gt; é€™å€‹å¥—ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;yarn add nativewind
yarn add --dev tailwindcss
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘è¦å»ºç«‹ &lt;code&gt;tailwind.config.js&lt;/code&gt; é€™å€‹æª”æ¡ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;npx tailwindcss init
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;module.exports = {
  content: [&quot;./App.{js,jsx,ts,tsx}&quot;, &quot;./&amp;lt;custom directory&amp;gt;/**/*.{js,jsx,ts,tsx}&quot;],
  theme: {
    extend: {},
  },
  plugins: [],
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸¦ä¸”åœ¨ &lt;code&gt;babel.config.js&lt;/code&gt; ä¸­åŠ å…¥ pluginï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;module.exports = function (api) {
  api.cache(true);
  return {
    presets: [&quot;babel-preset-expo&quot;],
+   plugins: [&quot;nativewind/babel&quot;],
  };
};
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œä¾†æ¸¬è©¦ä¸€ä¸‹æ˜¯å¦æœ‰å®‰è£æˆåŠŸ&lt;/p&gt;

&lt;p&gt;é€™æ˜¯åŸæœ¬çš„ App.tsx:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;tsx&quot;&gt;import { StatusBar } from &#39;expo-status-bar&#39;;
import { StyleSheet, Text, View } from &#39;react-native&#39;;

export default function App() {
  return (
    &amp;lt;View style={styles.container}&amp;gt;
      &amp;lt;Text&amp;gt;Open up App.tsx to start working on your app!&amp;lt;/Text&amp;gt;
      &amp;lt;StatusBar style=&quot;auto&quot; /&amp;gt;
    &amp;lt;/View&amp;gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: &#39;#fff&#39;,
    alignItems: &#39;center&#39;,
    justifyContent: &#39;center&#39;,
  },
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘å€‘æŠŠ &lt;code&gt;styles&lt;/code&gt; æ‹¿æ‰ï¼Œä¸¦æ”¹æˆ &lt;code&gt;className&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;tsx&quot;&gt;import { StatusBar } from &#39;expo-status-bar&#39;
import { Text, View } from &#39;react-native&#39;

export default function App() {
  return (
    &amp;lt;View className=&#39;flex-1  items-center justify-center bg-white&#39;&amp;gt;
      &amp;lt;Text&amp;gt;Open up App.tsx to start working on your app!&amp;lt;/Text&amp;gt;
      &amp;lt;StatusBar style=&#39;auto&#39; /&amp;gt;
    &amp;lt;/View&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œçœ¼å°–çš„ä½ å¯èƒ½æœƒç™¼ç¾åˆ°ï¼Œåœ¨ &lt;code&gt;className&lt;/code&gt; ä¸‹æœƒå‡ºç¾ç´…è‰²çš„ç·šã€‚ä¸ç”¨æ“”å¿ƒï¼Œå®˜ç¶²æœ‰æåˆ°å¦‚ä½•è§£æ±ºé€™å€‹å•é¡Œï¼Œåªè¦å†æ–°å¢ä¸€å€‹ &lt;code&gt;app.d.ts&lt;/code&gt; æª”æ¡ˆå°±å¯ä»¥äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;ts&quot;&gt;/// &amp;lt;reference types=&quot;nativewind/types&quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šé¢çš„éƒ¨åˆ†æ˜¯ TypeScript æ‰éœ€è¦åšçš„æ­¥é©Ÿï¼Œå¦‚æœä½ æ˜¯ç”¨ JavaScript çš„è©±ï¼Œå°±ä¸éœ€è¦åšé€™å€‹æ­¥é©Ÿã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æœƒåˆ†æˆï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å»ºç«‹é‡è¤‡ä½¿ç”¨çš„å…ƒä»¶&lt;/li&gt;
&lt;li&gt;è¨ˆç®—çš„é‚è¼¯æ’°å¯«&lt;/li&gt;
&lt;li&gt;æ•´åˆæˆå®Œæ•´ App&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-a5a5653468a905b6&quot;&gt;å»ºç«‹é‡è¤‡ä½¿ç”¨çš„å…ƒä»¶&lt;/h2&gt;

&lt;h3 id=&quot;part-6542a95fd26&quot;&gt;æŒ‰éˆ•&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆå› ç‚ºè¨ˆç®—æ©Ÿæœ‰å¾ˆå¤šæŒ‰éˆ•ï¼Œæ‰€ä»¥æˆ‘å€‘è¦å»ºç«‹ä¸€å€‹é‡è¤‡ä½¿ç”¨çš„å…ƒä»¶ï¼Œé€™æ¨£å°±ä¸ç”¨æ¯æ¬¡éƒ½è¦å¯«ä¸€å€‹æŒ‰éˆ•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;tsx&quot;&gt;import {
  Text,
  TouchableOpacity,
  TextProps,
  TouchableOpacityProps,
} from &#39;react-native&#39;
import classNames from &#39;classnames&#39;

type ClickButtonProps = TouchableOpacityProps &amp;amp; {
  text: string
  size?: &#39;double&#39;
  theme?: &#39;primary&#39; | &#39;secondary&#39; | &#39;accent&#39;
  textProps?: TextProps
}

const ClickButton = ({
  onPress,
  text,
  size,
  theme = &#39;primary&#39;,
  textProps,
  ...rest
}: ClickButtonProps) =&amp;gt; {


  return (
    &amp;lt;TouchableOpacity
      onPress={onPress}
      className={classNames({
        &quot;rounded-full flex-1 items-center justify-center m-2&quot;: true,
        &quot;h-[84px]&quot;: true,
        &quot;w-[84px]&quot;: true,
        &#39;w-full&#39;: size === &#39;double&#39;,
        &#39;bg-primary-btn&#39;: theme === &#39;primary&#39;,
        &#39;bg-secondary-btn&#39;: theme === &#39;secondary&#39;,
        &#39;bg-accent-btn&#39;: theme === &#39;accent&#39;
      })}
      {...rest}
      testID=&#39;click-button&#39;
    &amp;gt;
      &amp;lt;Text
        className={classNames({
          &#39;text-3xl font-bold text-center&#39;: true,
          &#39;text-white&#39;: theme === &#39;secondary&#39; || theme === &#39;primary&#39;,
        })}
        {...textProps}
      &amp;gt;
        {text}
      &amp;lt;/Text&amp;gt;
    &amp;lt;/TouchableOpacity&amp;gt;
  )
}

export { ClickButton }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹è‡ªå®šç¾©çš„ &lt;code&gt;ClickButton&lt;/code&gt; å…ƒä»¶ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆ &lt;code&gt;ClickButtonProps&lt;/code&gt; éœ€è¦ç¹¼æ‰¿ä¾† React Native çš„ &lt;code&gt;TouchableOpacityProps&lt;/code&gt;ï¼Œä¸¦å¢åŠ ä¸€äº›è‡ªå·±çš„ props å‹åˆ¥ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;textï¼šæŒ‰éˆ•ä¸Šé¡¯ç¤ºçš„æ–‡å­—ã€‚&lt;/li&gt;
&lt;li&gt;sizeï¼šæŒ‰éˆ•çš„å¤§å°ï¼Œç‚ºå¯é¸çš„ doubleï¼Œé»˜èªç‚ºæŒ‰éˆ•çš„æ¨™æº–å¤§å°ã€‚&lt;/li&gt;
&lt;li&gt;themeï¼šæŒ‰éˆ•çš„ä¸»é¡Œï¼Œç‚ºå¯é¸çš„ &#39;primary&#39;ã€&#39;secondary&#39; æˆ– &#39;accent&#39;ï¼Œé»˜èªç‚º &#39;primary&#39;ã€‚&lt;/li&gt;
&lt;li&gt;textPropsï¼šæ–‡å­—å…ƒä»¶çš„ propsï¼Œç”¨æ–¼æŒ‰éˆ•ä¸Šæ–‡å­—çš„æ¨£å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é€™å€‹å…ƒä»¶ä½¿ç”¨äº† React Native æä¾›çš„ &lt;code&gt;TouchableOpacity&lt;/code&gt; åŸç”Ÿå…ƒä»¶ï¼Œå¯ä»¥æŠŠå®ƒç•¶æˆ Web ä¸­çš„ &lt;code&gt;&amp;lt;button /&amp;gt;&lt;/code&gt;ï¼Œç„¶å¾Œæˆ‘å€‘å‚³éäº†ä¸€äº› propsã€‚é€™äº› props åŒ…æ‹¬ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;onPressï¼šç•¶æŒ‰éˆ•è¢«é»æ“Šæ™‚è§¸ç™¼çš„å›èª¿å‡½æ•¸ã€‚&lt;/li&gt;
&lt;li&gt;classNameï¼šæ‡‰ç”¨åœ¨ TouchableOpacity å…ƒä»¶ä¸Šçš„æ¨£å¼é¡ã€‚&lt;/li&gt;
&lt;li&gt;...restï¼šå‚³éæ‰€æœ‰å…¶é¤˜çš„ props åˆ° TouchableOpacity å…ƒä»¶ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ­¤å¤–ï¼Œ&lt;code&gt;ClickButton&lt;/code&gt; å…ƒä»¶ä¹Ÿä½¿ç”¨äº†ä¸€å€‹ React Native &lt;code&gt;Text&lt;/code&gt; å…ƒä»¶ï¼Œå¯ä»¥ç•¶æˆ &lt;code&gt;&amp;lt;p /&amp;gt;&lt;/code&gt;ã€‚æˆ‘å€‘ç”¨æ–¼é¡¯ç¤ºæŒ‰éˆ•ä¸Šçš„æ–‡å­—ï¼Œä¸¦å‚³éäº†ä¸€äº› propsã€‚é€™äº› props åŒ…æ‹¬ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;classNameï¼šæ‡‰ç”¨åœ¨ Text å…ƒä»¶ä¸Šçš„æ¨£å¼é¡ã€‚&lt;/li&gt;
&lt;li&gt;...textPropsï¼šå‚³éæ‰€æœ‰å…¶é¤˜çš„ props åˆ° Text å…ƒä»¶ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€å¾Œï¼Œ&lt;code&gt;classNames&lt;/code&gt; é€™å€‹å¥—ä»¶å¯ä»¥å¹«åŠ©æˆ‘å€‘ä¾†åˆ¤æ–·æ¢ä»¶ï¼Œä¸¦ä¸”è·Ÿ TailwindCSS æ­é…ä½¿ç”¨ï¼Œå¯ä»¥è®“æˆ‘å€‘æ›´æ–¹ä¾¿çš„æ’°å¯«æ¨£å¼ã€‚&lt;/p&gt;

&lt;h3 id=&quot;row&quot;&gt;Row&lt;/h3&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘è¦å»ºç«‹ä¸€å€‹ Row å…ƒä»¶ï¼Œç”¨æ–¼é¡¯ç¤ºæŒ‰éˆ•çš„æ’åˆ—æ–¹å¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;tsx&quot;&gt;import { View } from &#39;react-native&#39;

type RowProps = {
  children: React.ReactNode;
};

const Row = ({ children, ...rest }: RowProps) =&amp;gt; {
  return (
    &amp;lt;View className=&#39;flex-row items-center gap-1&#39; {...rest}&amp;gt;
      {children}
    &amp;lt;/View&amp;gt;
  )
}

export { Row }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™å€‹éƒ¨åˆ†å°±æ¯”è¼ƒç°¡å–®ï¼Œä¸€æ¨£è‡ªå®šç¾©ä¸€å€‹ &lt;code&gt;Row&lt;/code&gt; å…ƒä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œ TypeScript ä¸€æ¨£éƒ½å…ˆèµ·æ‰‹å¼å®šç¾©å‹åˆ¥ï¼Œ&lt;code&gt;RowProps&lt;/code&gt; å®šç¾©äº†ä¸€å€‹å¿…éœ€çš„ childrenï¼Œç”¨æ–¼æ¸²æŸ“å…ƒä»¶å…§çš„å­å…ƒç´ ã€‚æ˜¯ä¸€å€‹ React Nodeï¼Œå¯ä»¥æ˜¯ä¸€å€‹æˆ–å¤šå€‹ React å…ƒç´ ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Row&lt;/code&gt; ä½¿ç”¨äº† React Native çš„ &lt;code&gt;View&lt;/code&gt; å…ƒä»¶ï¼Œå¯ä»¥æŠŠå®ƒç•¶æˆ &lt;code&gt;&amp;lt;div /&amp;gt;&lt;/code&gt; ä¾†çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œ &lt;code&gt;View&lt;/code&gt; çš„æ¨£å¼æ’åˆ—æ–¹å¼é è¨­æ˜¯ç”¨ Flexboxï¼Œä¸¦ä¸”æ˜¯å‚ç›´æ’åˆ—ï¼Œæ‰€ä»¥æˆ‘å€‘è¦å°‡å®ƒæ”¹æˆæ°´å¹³æ’åˆ—ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-52fffbbdd600e02&quot;&gt;è¨ˆç®—çš„é‚è¼¯æ’°å¯«&lt;/h2&gt;

&lt;p&gt;é€™å€‹éƒ¨åˆ†éå¸¸é‡è¦ï¼Œå› ç‚ºæ˜¯ä¸»è¦çš„åŠŸèƒ½é‚è¼¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;tsx&quot;&gt;export type State = {
  currentValue: string
  operator: string | null
  previousValue: string | null
}

export const initialState: State = {
  currentValue: &#39;0&#39;,
  operator: null,
  previousValue: null
}

export const handleNumber = (value: string, state: State): State =&amp;gt; {
  return {
    ...state,
    currentValue:
      state.currentValue === &#39;0&#39; ? `${value}` : `${state.currentValue}${value}`
  }
}

const handleEqual = (state: State): State =&amp;gt; {
  const { currentValue, previousValue = &#39;0&#39;, operator } = state

  const current = parseFloat(currentValue)
  const previous = parseFloat(previousValue as string)
  const resetState = { operator: null, previousValue: null }

  switch (operator) {
    case &#39;+&#39;:
      return {
        ...resetState,
        currentValue: `${previous + current}`
      }
    case &#39;-&#39;:
      return {
        ...resetState,
        currentValue: `${previous - current}`
      }
    case &#39;*&#39;:
      return {
        ...resetState,
        currentValue: `${previous * current}`
      }
    case &#39;/&#39;:
      return {
        ...resetState,
        currentValue: `${previous / current}`
      }
    default:
      return state
  }
}

const calculator = (type: string, value: string, state: State): State =&amp;gt; {
  switch (type) {
    case &#39;number&#39;:
      return handleNumber(value, state)
    case &#39;clear&#39;:
      return initialState
    case &#39;toggleSign&#39;:
      return {
        ...state,
        currentValue: `${parseFloat(state.currentValue) * -1}`
      }
    case &#39;percentage&#39;:
      return {
        ...state,
        currentValue: `${parseFloat(state.currentValue) * 0.01}`
      }
    case &#39;operator&#39;:
      return {
        operator: value,
        previousValue: state.currentValue,
        currentValue: &#39;0&#39;
      }
    case &#39;equal&#39;:
      return handleEqual(state)
    default:
      return state
  }
}

export default calculator
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸»è¦å»ºç«‹ä¸€å€‹å‡½å¼ &lt;code&gt;calculator&lt;/code&gt; å’Œä¸€å€‹ç‰©ä»¶ &lt;code&gt;State&lt;/code&gt;ã€‚&lt;code&gt;State&lt;/code&gt; æè¿°äº†è¨ˆç®—æ©Ÿçš„ç•¶å‰ç‹€æ…‹ï¼Œè€Œ &lt;code&gt;calculator&lt;/code&gt; å‰‡ç”¨æ–¼è™•ç†ä¸åŒçš„æ“ä½œä¸¦æ›´æ–° &lt;code&gt;State&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;State&lt;/code&gt; æè¿°äº†è¨ˆç®—æ©Ÿç•¶å‰çš„ç‹€æ…‹ï¼ŒåŒ…å«ä¸‰å€‹å±¬æ€§ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;currentValueï¼šç”¨æ–¼è¨˜éŒ„ç•¶å‰çš„è¼¸å…¥å€¼æˆ–è¨ˆç®—çµæœã€‚&lt;/li&gt;
&lt;li&gt;operatorï¼šç”¨æ–¼è¨˜éŒ„ç•¶å‰çš„é‹ç®—ç¬¦è™Ÿã€‚&lt;/li&gt;
&lt;li&gt;previousValueï¼šç”¨æ–¼è¨˜éŒ„ä¸Šä¸€å€‹è¼¸å…¥å€¼æˆ–è¨ˆç®—çµæœã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;initialState&lt;/code&gt; ç”¨æ–¼åˆå§‹åŒ– &lt;code&gt;State&lt;/code&gt;ï¼Œå°‡ &lt;code&gt;currentValue&lt;/code&gt; è¨­ç½®ç‚º &#39;0&#39;ï¼Œå°‡ &lt;code&gt;operator&lt;/code&gt; å’Œ &lt;code&gt;previousValue&lt;/code&gt; è¨­ç½®ç‚º nullã€‚&lt;/p&gt;

&lt;p&gt;è€Œ &lt;code&gt;handleNumber&lt;/code&gt; ç”¨æ–¼è™•ç†æ•¸å­—è¼¸å…¥æ“ä½œï¼Œæ¥å—å…©å€‹åƒæ•¸ï¼šä¸€å€‹å­—ä¸² &lt;code&gt;value&lt;/code&gt;ï¼Œè¡¨ç¤ºè¼¸å…¥çš„æ•¸å­—ï¼›ä¸€å€‹ &lt;code&gt;State&lt;/code&gt; ç‰©ä»¶ï¼Œè¡¨ç¤ºç•¶å‰çš„ç‹€æ…‹ã€‚ç•¶è™•ç†æ•¸å­—è¼¸å…¥æ“ä½œæ™‚ï¼Œ&lt;code&gt;handleNumber&lt;/code&gt; å‡½æ•¸æœƒå°‡ &lt;code&gt;currentValue&lt;/code&gt; æ›´æ–°ç‚ºç•¶å‰çš„è¼¸å…¥å€¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;handleEqual&lt;/code&gt; å‡½å¼ç”¨æ–¼è™•ç†ç­‰æ–¼çš„æ“ä½œï¼Œæ¥å—ä¸€å€‹ &lt;code&gt;State&lt;/code&gt; ç‰©ä»¶ä½œç‚ºåƒæ•¸ã€‚ç•¶è™•ç†ç­‰æ–¼æ“ä½œæ™‚ï¼Œ&lt;code&gt;handleEqual&lt;/code&gt; æœƒæ ¹æ“šç•¶å‰çš„é‹ç®—ç¬¦è™Ÿè¨ˆç®—ç•¶å‰çš„è¡¨é”å¼ï¼Œä¸¦è¿”å›æ–°çš„ &lt;code&gt;State&lt;/code&gt;ï¼Œå…¶ä¸­ &lt;code&gt;currentValue&lt;/code&gt; è¢«è¨­ç½®ç‚ºè¨ˆç®—çµæœã€‚å¦‚æœç•¶å‰æ²’æœ‰é‹ç®—ç¬¦è™Ÿï¼Œå‰‡ç›´æ¥è¿”å›ç•¶å‰çš„ç‹€æ…‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;calculator&lt;/code&gt; å‡½å¼æ¥å—ä¸‰å€‹åƒæ•¸ï¼šä¸€å€‹å­—ä¸² &lt;code&gt;type&lt;/code&gt;ï¼Œè¡¨ç¤ºç•¶å‰çš„æ“ä½œé¡å‹ï¼›ä¸€å€‹å­—ä¸² &lt;code&gt;value&lt;/code&gt;ï¼Œè¡¨ç¤ºç•¶å‰çš„æ“ä½œå€¼ï¼›ä¸€å€‹ &lt;code&gt;State&lt;/code&gt; ç‰©ä»¶ï¼Œè¡¨ç¤ºç•¶å‰çš„ç‹€æ…‹ã€‚æ ¹æ“šä¸åŒçš„æ“ä½œé¡å‹ï¼Œ&lt;code&gt;calculator&lt;/code&gt; æœƒåˆ¤æ–·ä¸åŒçš„è™•ç†æ–¹å¼ï¼Œå¾è€Œæ›´æ–° &lt;code&gt;State&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨é€™å€‹ç°¡å–®çš„è¨ˆç®—æ©Ÿä¸­ï¼Œæˆ‘å€‘åªå¯¦ç¾äº†ä¸€äº›åŸºæœ¬çš„æ“ä½œï¼Œæœ‰åŠ ã€æ¸›ã€ä¹˜ã€é™¤ã€æ¸…é™¤ã€æ­£è² è™Ÿåˆ‡æ›å’Œç™¾åˆ†æ¯”è½‰æ›ç­‰ã€‚ä¸¦ä¸”ä½¿ç”¨äº† &lt;code&gt;parseFloat&lt;/code&gt; å°‡è¼¸å…¥å€¼è½‰æ›ç‚ºæµ®é»æ•¸ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2de8710d384304ef&quot;&gt;çµ„è£å…ƒä»¶&lt;/h2&gt;

&lt;p&gt;æœ€å¾Œæˆ‘å€‘æŠŠæˆ‘å€‘çš„å…ƒä»¶è·Ÿé‚è¼¯éƒ½çµ„è£èµ·ä¾†ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;tsx&quot;&gt;import { useState, useCallback } from &#39;react&#39;
import { SafeAreaView, Text, View } from &#39;react-native&#39;
import { ClickButton, Row } from &#39;./src/components&#39;
import calculator, { initialState, State } from &#39;./src/util/calculator&#39;

const App = () =&amp;gt; {
  const [state, setState] = useState&amp;lt;State&amp;gt;(initialState)

  const handleTap = useCallback((type: string, value: string | number) =&amp;gt; {
    const valueString = typeof value === &#39;number&#39; ? String(value) : value
    setState((prevState) =&amp;gt; calculator(type, valueString, prevState))
  }, [])

  return (
    &amp;lt;View className=&#39;flex-1 justify-end bg-[#202020] px-2&#39;&amp;gt;
      &amp;lt;SafeAreaView&amp;gt;
        &amp;lt;View className=&#39;items-end pr-4 pb-4&#39;&amp;gt;
          &amp;lt;Text className=&#39;text-white text-6xl font-bold&#39;&amp;gt;
            {parseFloat(state.currentValue).toLocaleString()}
          &amp;lt;/Text&amp;gt;
        &amp;lt;/View&amp;gt;

        &amp;lt;Row&amp;gt;
          &amp;lt;ClickButton
            text=&#39;C&#39;
            theme=&#39;secondary&#39;
            onPress={() =&amp;gt; handleTap(&#39;clear&#39;, &#39;&#39;)}
          /&amp;gt;
          &amp;lt;ClickButton
            text=&#39;+/-&#39;
            theme=&#39;secondary&#39;
            onPress={() =&amp;gt; handleTap(&#39;toggleSign&#39;, &#39;&#39;)}
          /&amp;gt;
          &amp;lt;ClickButton
            text=&#39;%&#39;
            theme=&#39;secondary&#39;
            onPress={() =&amp;gt; handleTap(&#39;percentage&#39;, &#39;&#39;)}
          /&amp;gt;
          &amp;lt;ClickButton
            text=&#39;/&#39;
            theme=&#39;accent&#39;
            onPress={() =&amp;gt; handleTap(&#39;operator&#39;, &#39;/&#39;)}
          /&amp;gt;
        &amp;lt;/Row&amp;gt;

        &amp;lt;Row&amp;gt;
          &amp;lt;ClickButton text=&#39;7&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;7&#39;)} /&amp;gt;
          &amp;lt;ClickButton text=&#39;8&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;8&#39;)} /&amp;gt;
          &amp;lt;ClickButton text=&#39;9&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;9&#39;)} /&amp;gt;
          &amp;lt;ClickButton
            text=&#39;X&#39;
            theme=&#39;accent&#39;
            onPress={() =&amp;gt; handleTap(&#39;operator&#39;, &#39;*&#39;)}
          /&amp;gt;
        &amp;lt;/Row&amp;gt;

        &amp;lt;Row&amp;gt;
          &amp;lt;ClickButton text=&#39;5&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;5&#39;)} /&amp;gt;
          &amp;lt;ClickButton text=&#39;6&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;6&#39;)} /&amp;gt;
          &amp;lt;ClickButton text=&#39;7&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;7&#39;)} /&amp;gt;
          &amp;lt;ClickButton
            text=&#39;-&#39;
            theme=&#39;accent&#39;
            onPress={() =&amp;gt; handleTap(&#39;operator&#39;, &#39;-&#39;)}
          /&amp;gt;
        &amp;lt;/Row&amp;gt;

        &amp;lt;Row&amp;gt;
          &amp;lt;ClickButton text=&#39;1&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;1&#39;)} /&amp;gt;
          &amp;lt;ClickButton text=&#39;2&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;2&#39;)} /&amp;gt;
          &amp;lt;ClickButton text=&#39;3&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;3&#39;)} /&amp;gt;
          &amp;lt;ClickButton
            text=&#39;+&#39;
            theme=&#39;accent&#39;
            onPress={() =&amp;gt; handleTap(&#39;operator&#39;, &#39;+&#39;)}
          /&amp;gt;
        &amp;lt;/Row&amp;gt;

        &amp;lt;Row&amp;gt;
          &amp;lt;ClickButton text=&#39;0&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;0&#39;)} /&amp;gt;
          &amp;lt;ClickButton text=&#39;.&#39; onPress={() =&amp;gt; handleTap(&#39;number&#39;, &#39;.&#39;)} /&amp;gt;
          &amp;lt;ClickButton
            text=&#39;=&#39;
            theme=&#39;primary&#39;
            onPress={() =&amp;gt; handleTap(&#39;equal&#39;, &#39;=&#39;)}
          /&amp;gt;
        &amp;lt;/Row&amp;gt;
      &amp;lt;/SafeAreaView&amp;gt;
    &amp;lt;/View&amp;gt;
  )
}

export default App
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•´å€‹ &lt;code&gt;App&lt;/code&gt; åœ¨æ¸²æŸ“æ™‚ï¼Œæœƒå°‡ç•¶å‰çš„ &lt;code&gt;state.currentValue&lt;/code&gt; ä½œç‚ºè¨ˆç®—æ©Ÿçš„é¡¯ç¤ºæ¬„ä½ï¼Œé€™å€‹å€¼æœƒä½¿ç”¨ &lt;code&gt;parseFloat&lt;/code&gt; å’Œ &lt;code&gt;toLocaleString&lt;/code&gt; å°‡è¼¸å…¥å€¼è½‰æ›ç‚ºå…·æœ‰åƒåˆ†ä½çš„å­—ä¸²ã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—ï¼Œ&lt;code&gt;App&lt;/code&gt; ä½¿ç”¨äº†å¤šå€‹ &lt;code&gt;ClickButton&lt;/code&gt; å…ƒä»¶ï¼Œé€™äº›å…ƒä»¶å°è£äº†ä¸åŒçš„æ“ä½œï¼Œå¦‚æ¸…é™¤ã€æ­£è² è™Ÿåˆ‡æ›ã€ç™¾åˆ†æ¯”è½‰æ›ã€åŠ ã€æ¸›ã€ä¹˜ã€é™¤ç­‰æ“ä½œã€‚é€™äº›å…ƒä»¶é€šé &lt;code&gt;onPress&lt;/code&gt; å±¬æ€§ç¶å®šäº†å°æ‡‰çš„è™•ç†å‡½å¼ï¼Œç•¶æŒ‰éˆ•è¢«é»æ“Šæ™‚ï¼Œæœƒèª¿ç”¨ &lt;code&gt;handleTap&lt;/code&gt; é€²è¡Œè™•ç†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;code&gt;handleTap&lt;/code&gt; å‡½å¼ä¸­ï¼Œå°‡æ“ä½œåƒæ•¸ &lt;code&gt;type&lt;/code&gt;ã€&lt;code&gt;value&lt;/code&gt;ï¼Œä¸¦èª¿ç”¨ &lt;code&gt;calculator&lt;/code&gt; å‡½å¼é€²è¡Œè¨ˆç®—ï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;useState&lt;/code&gt; çš„ &lt;code&gt;setState&lt;/code&gt; ä¾†æ›´æ–°ç•¶å‰çš„ç‹€æ…‹ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œçš„åŸ·è¡Œç•«é¢åƒé€™æ¨£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/alhteFF.png&quot; alt=&quot;20230224005423&quot;&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœæƒ³è¦çœ‹å®Œæ•´çš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥åˆ° &lt;a href=&quot;https://github.com/bucky0112/calculator_expo&quot;&gt;Repo&lt;/a&gt; çœ‹çœ‹ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Fri, 24 Feb 2023 00:58:20 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/react-native-x-expo-x-typescript.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 6 minutes</category>
    </item>
    <item>
      <title>React.js å…¨æ”»ç•¥ç­æ¨è–¦çµ¦æƒ³è¦ç²¾é€²è‡ªæˆ‘çš„å‰ç«¯å·¥ç¨‹å¸«</title>
      <link>https://railquill.vercel.app/react-js.html</link>
      <description>é€™é–€èª²ç¨‹æ˜¯ç”±äº”å€ç´…å¯¶çŸ³èˆ‰è¾¦ï¼Œä¸¦ç”±å¥¶ç¶ èŒ¶è€å¸«æ•™å°ï¼Œé€™é–€èª²ç¨‹å°æ–¼æƒ³è¦ç²¾é€²è‡ªæˆ‘çš„å‰ç«¯å·¥ç¨‹å¸«ä¾†èªªï¼Œæ˜¯ä¸€å€‹éå¸¸å¥½çš„é¸æ“‡ã€‚</description>
      <content:encoded><![CDATA[
        &lt;p&gt;&lt;img src=&quot;https://i.imgur.com/OqxEqG8.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;ä½œç‚ºä¸€åå‰ç«¯å·¥ç¨‹å¸«ï¼Œç”±æ–¼åœ¨æ—¥å¸¸å·¥ä½œä¸­ç¶“å¸¸ä½¿ç”¨ React.jsï¼Œè€Œä¸”ä¹Ÿéå¸¸åœ°å–œæ„›é€™å€‹å‰ç«¯æ¡†æ¶ã€‚æ‰€ä»¥ï¼Œç‚ºäº†æ›´åŠ äº†è§£ React.jsï¼Œä¸¦ä¸”èƒ½æ›´ç²¾é€²è‡ªæˆ‘ï¼Œæˆ‘æ±ºå®šé¸æ“‡äº†ã€Œ&lt;a href=&quot;https://5xruby.tw/courses/react&quot;&gt;React.js å…¨æ”»ç•¥ - å…¥é–€åˆ°é€²éš&lt;/a&gt;ã€é€™é–€èª²ç¨‹ï¼Œç”±äº”å€ç´…å¯¶çŸ³èˆ‰è¾¦ï¼Œä¸¦ç”±å¥¶ç¶ èŒ¶è€å¸«æ•™å°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-d65b72ba877c1bf7&quot;&gt;ç‚ºä»€éº¼é¸æ“‡é€™é–€èª²ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;ç‚ºä»€éº¼é¸æ“‡ä¸Šé€™é–€èª²ï¼Ÿé¦–å…ˆæ˜¯å› ç‚ºæˆ‘æœ¬èº«å° React.jsçš„èˆˆè¶£ï¼Œå¸Œæœ›åœ¨é€™é–€èª²ä¸­å­¸åˆ°æ›´å¤šçš„çŸ¥è­˜ã€‚å…¶æ¬¡ï¼Œäº”å€ç´…å¯¶çŸ³åœ¨æ¥­ç•Œååˆ†è‘—åï¼Œå¸«è³‡åœ˜éšŠä¸€å­—æ’é–‹éƒ½æ˜¯æ¥­ç•Œçš„å¤§ç¥ï¼Œä¹Ÿéƒ½æ“æœ‰è±å¯Œçš„æ•™å­¸ç¶“é©—ï¼Œå› æ­¤æˆ‘å°é€™é–€èª²éå¸¸æ„Ÿèˆˆè¶£ï¼Œä¹Ÿè¦ºå¾—å¯ä»¥ç‚ºæˆ‘çš„è·æ¶¯å¸¶ä¾†å¹«åŠ©ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-12ee13b3b43d2c9d&quot;&gt;é€™é–€èª²å¸¶çµ¦æˆ‘ä»€éº¼å¹«åŠ©&lt;/h2&gt;

&lt;p&gt;åœ¨é€™é–€èª²ä¸­ï¼Œæˆ‘å­¸åˆ°äº†å¾ˆå¤šå¯¦ç”¨çš„çŸ¥è­˜ã€‚è€å¸«æœƒç”±ç°¡å…¥æ·±å¸¶é ˜æˆ‘å€‘ä¸€æ­¥ä¸€æ­¥å­¸ç¿’ï¼Œè€å¸«è‡ªå·±ä¹Ÿæº–å‚™è¨±å¤šæœ‰è¶£ä¸¦ä¸”å¯¦éš›é‹ç”¨çš„å°ˆæ¡ˆã€‚å¹³å¸¸ä¸€äº›è¦ºå¾—æ¯ç‡¥ä¹å‘³çš„éƒ¨åˆ†ï¼Œåœ¨å¹½é»˜é¢¨è¶£çš„å¥¶ç¶ èŒ¶è€å¸«è¬›è§£å¾Œï¼Œä¹Ÿéƒ½è¦ºå¾—éå¸¸çš„ç”Ÿå‹•æ´»æ½‘ã€‚ä¾‹å¦‚ React.js å…ƒä»¶çš„ç”Ÿå‘½é€±æœŸã€è™•ç†è³‡æ–™èˆ‡ç‹€æ…‹ç®¡ç†ç­‰ã€‚é€™äº›çŸ¥è­˜ä¸åƒ…è®“æˆ‘æ›´åŠ äº†è§£ React.jsï¼Œä¹ŸçŸ¥é“äº†ä¸€äº›ç¨‹å¼ç¢¼åº•å±¤å¦‚ä½•é‹ä½œï¼Œå°æ–¼ React.js æœ‰éå¸¸æ·±åˆ»çš„äº†è§£ã€‚&lt;/p&gt;

&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œå¥¶ç¶ èŒ¶è€å¸«ä¹Ÿæ•™å°æˆ‘å€‘ä¸€äº›åœ¨é–‹ç™¼å¯¦æˆ°çš„ç¶“é©—èˆ‡æŠ€å·§ï¼Œé‚„æœ‰å¦‚ä½•è®“ React èƒ½å¤ æ›´ç¯€çœæ•ˆèƒ½ã€‚
ä¾‹å¦‚ï¼Œæˆ‘å­¸åˆ°äº†å¦‚ä½•å¯¦ç¾ React.js å…ƒä»¶çš„ lazy loadingï¼Œä»¥æé«˜ç¶²é çš„è¼‰å…¥é€Ÿåº¦ï¼Œé‚„æœ‰é‹ç”¨ useMemo å’Œ useCallback ä¾†å„ªåŒ–ç¶²é çš„æ¸²æŸ“ã€‚&lt;/p&gt;

&lt;p&gt;è€å¸«é™¤äº†æ•™å°å„å€‹ React.js Hooks çš„ä½¿ç”¨ä»¥å¤–ï¼ŒåŒæ™‚ä¹Ÿèˆ‡æ™‚ä¿±é€²åœ°æ›´æ–° React.js ç‰ˆæœ¬ï¼ŒReact.js 18 æ›´æ–°äº†ä»€éº¼éƒ½è¬›è§£çš„éå¸¸åœ°ä»”ç´°ã€‚è€Œåœ¨ç‹€æ…‹ç®¡ç†éƒ¨åˆ†ï¼Œå¥¶ç¶ èŒ¶è€å¸«ä¹Ÿæ•™æˆ‘å€‘å¦‚ä½•ä½¿ç”¨ Context API ä¾†è™•ç†è³‡æ–™èˆ‡ç‹€æ…‹ç®¡ç†ï¼Œé‚„æœ‰ä½¿ç”¨çŸ¥åé–‹æºå¥—ä»¶ Reduxï¼Œé€™å°æˆ‘åœ¨å·¥ä½œä¸­å¯¦ç¾çµ„ä»¶é–“çš„è³‡æ–™å…±äº«å’Œç‹€æ…‹ç®¡ç†æœ‰å¾ˆå¤§çš„å¹«åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œé€™é–€èª²é‚„æ•™æˆäº† React.js é–‹ç™¼çš„æœ€ä½³å¯¦è¸ï¼Œä¾‹å¦‚å¦‚ä½•è¨­è¨ˆå„ªç§€çš„ React.js å…ƒä»¶å’Œå¦‚ä½•ä½¿ç”¨ RReact.js Router ä¾†å¯¦ç¾é é¢è·¯ç”±ã€‚æœ€å¾Œä¹Ÿä¸€å†å¼·èª¿æ¸¬è©¦å°æ–¼é–‹ç™¼çš„é‡è¦æ€§ï¼Œæ•™æˆ‘å€‘è©²æ€éº¼ä½¿ç”¨ Jest å’Œ React Testing Library ä¾†æ¸¬è©¦ã€‚&lt;/p&gt;

&lt;h2 id=&quot;x&quot;&gt;æ„Ÿè¬ x äº”å€&lt;/h2&gt;

&lt;p&gt;æœ€å¾Œï¼Œæˆ‘è¦æ„Ÿè¬äº”å€ç´…å¯¶çŸ³ã€‚åœ¨é€™é–€èª²ä¸­ï¼Œæˆ‘ä¸åƒ…å­¸åˆ°äº†å¾ˆå¤šçŸ¥è­˜ï¼Œä¹Ÿåœ¨ä¸€å€‹è¼•é¬†æ„‰å¿«çš„ç’°å¢ƒä¸­äº«å—åˆ°äº†å­¸ç¿’çš„æ¨‚è¶£ã€‚æˆ‘å°äº”å€ç´…å¯¶çŸ³çš„æ•™å­¸åœ˜éšŠè¡¨ç¤ºæ•¬æ„ï¼Œæ¯ç•¶æˆ‘æœ‰ä»»ä½•ç–‘å•æƒ³è¦è©¢å•æ™‚ï¼Œèª²å‹™äººå“¡éƒ½æœƒéå¸¸æœ‰è€å¿ƒï¼Œä¸¦ä¸”ä¸å­å…¶ç…©åœ°å›ç­”æˆ‘çš„ä»»ä½•æœ‰é—œèª²æ¥­ä¸Šçš„å•é¡Œï¼Œéå¸¸æ„Ÿè¬ä»–å€‘ç‚ºæˆ‘æä¾›äº†å¦‚æ­¤å¯¶è²´çš„å­¸ç¿’æ©Ÿæœƒã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘æ·±åˆ»åœ°é«”é©—åˆ°äº†äº”å€ç´…å¯¶çŸ³å°å­¸ç”Ÿçš„é—œå¿ƒå’Œæ”¯æŒï¼Œå› æ­¤æˆ‘å¼·çƒˆæ¨è–¦äº”å€ç´…å¯¶çŸ³çš„èª²ç¨‹çµ¦æ‰€æœ‰å°å‰ç«¯é–‹ç™¼æœ‰èˆˆè¶£çš„äººã€‚å¦‚æœä½ å° React æœ‰èˆˆè¶£çš„è©±ï¼Œé‚£éº¼ React å…¨æ”»ç•¥æ˜¯ä¸€é–€ä¸å¯éŒ¯éçš„èª²ç¨‹ï¼Œä¸ç®¡æ˜¯å‰›å…¥é–€æˆ–æ˜¯è³‡æ·±çš„å·¥ç¨‹å¸«ï¼Œå®ƒéƒ½æœƒç‚ºä½ æä¾›æ›´å¤šæœ‰ç”¨çš„çŸ¥è­˜å’Œå¯¦è¸ç¶“é©—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/AFxtIV3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Wed, 15 Feb 2023 11:04:32 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/react-js.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 1 minutes</category>
    </item>
    <item>
      <title>ä½¿ç”¨ Jest å’Œ React Testing Library é€²è¡Œæ¸¬è©¦çš„æ–¹æ³• - æ¸¬è©¦åˆ—è¡¨</title>
      <link>https://railquill.vercel.app/jest-react-testing-library.html</link>
      <description>ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Jest å’Œ React Testing Library é€²è¡Œæ¸¬è©¦åˆ—è¡¨</description>
      <content:encoded><![CDATA[
        &lt;h2 id=&quot;part-654280cbc50&quot;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;æœ¬æ–‡å°‡æ¶µè“‹æ¸¬è©¦åˆ—è¡¨ã€æ¸¬è©¦åˆ—è¡¨å…§å®¹ã€ä»¥åŠæ¸¬è©¦ App å…ƒä»¶ã€‚æˆ‘å€‘ä¾ç„¶æœƒä½¿ç”¨ Jest + React Testing Library ä¾†å¯¦ç¾æ¸¬è©¦ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2d4bccd877a4e33b&quot;&gt;æ¸¬è©¦åˆ—è¡¨&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æ¥çºŒä¸Šä¸€ç¯‡æœªå®Œæˆçš„æ¸¬è©¦ï¼Œæˆ‘å€‘ä¾†æ¸¬è©¦ä¸€å€‹åˆ—è¡¨çš„å…ƒä»¶ï¼Œé€™å€‹å…ƒä»¶æœƒæ¥æ”¶ä¸€å€‹é™£åˆ—ï¼Œä¸¦ä¸”å°‡é™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ æ¸²æŸ“æˆä¸€å€‹åˆ—è¡¨é …ç›®ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸æƒ³ç¿»åˆ°ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥çœ‹é€™å€‹ Demoã€‚&lt;/p&gt;



&lt;p&gt;é‚£éº¼é¦–å…ˆåœ¨æ¸¬è©¦ä¹‹å‰ï¼Œè¦å…ˆä¾†çœ‹ä¸€ä¸‹é€™å€‹å…ƒä»¶é æœŸæœƒæ€éº¼å‘ˆç¾ã€‚&lt;/p&gt;

&lt;p&gt;é æœŸæœƒé€é props å‚³ä¾†ä¸€å€‹ &lt;code&gt;users&lt;/code&gt; é€™å€‹é™£åˆ—ï¼Œä¸¦ä¸”å°‡é™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ æ¸²æŸ“æˆä¸€å€‹åˆ—è¡¨é …ç›®ã€‚&lt;/p&gt;

&lt;p&gt;å¿…é ˆè¦ç¢ºä¿æ˜¯å¦æ­£ç¢ºå‘ˆç¾åˆ—è¡¨é …ç›®ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥é€™éº¼å¯«æ¸¬è©¦ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;import { render, screen, within } from &#39;@testing-library/react&#39;
import List from &quot;./List&quot;

test(&#39;it renders a list of users&#39;, () =&amp;gt; {
  const users = [
    { name: &#39;John Doe&#39; },
    { name: &#39;Jane Doe&#39; }
  ]

  render(&amp;lt;List users={users} /&amp;gt;)

  const list = within(screen.getByTestId(&#39;users&#39;)).getAllByRole(&#39;listitem&#39;)
  expect(list).toHaveLength(2)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é¦–å…ˆæˆ‘å€‘å…ˆæ¨¡æ“¬ä¸€å€‹ &lt;code&gt;users&lt;/code&gt; é™£åˆ—çš„è³‡æ–™ï¼Œä¸¦ä¸”å°‡è³‡æ–™å‚³å…¥åˆ° &lt;code&gt;List&lt;/code&gt; å…ƒä»¶ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—æˆ‘å€‘è¦çŸ¥é“ &lt;code&gt;List&lt;/code&gt; æ˜¯ä¸æ˜¯æ­£ç¢ºæ¸²æŸ“å‡ºä¾†ï¼Œæˆ‘å€‘åˆ°é€™å€‹æ­¥é©Ÿå¯ä»¥å…ˆåˆ° &lt;code&gt;List&lt;/code&gt; å…ƒä»¶çš„ &lt;code&gt;ul&lt;/code&gt; æ¨™ç±¤ä¸­åŠ ä¸Š &lt;code&gt;data-testid=&quot;users&quot;&lt;/code&gt; é€™å€‹å±¬æ€§ï¼Œé€™æ¨£æˆ‘å€‘å°±å¯ä»¥é€é &lt;code&gt;screen.getByTestId(&#39;users&#39;)&lt;/code&gt; ä¾†å–å¾—é€™å€‹å…ƒç´ ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œå°±å¯ä»¥é€é &lt;code&gt;within&lt;/code&gt; å‡½å¼ä¾†å–å¾— &lt;code&gt;ul&lt;/code&gt; æ¨™ç±¤ä¸­çš„æ‰€æœ‰ &lt;code&gt;li&lt;/code&gt; æ¨™ç±¤ï¼Œä¸¦ä¸”é€é &lt;code&gt;getAllByRole&lt;/code&gt; ä¾†å–å¾— &lt;code&gt;li&lt;/code&gt; æ¨™ç±¤ä¸­çš„æ‰€æœ‰ &lt;code&gt;listitem&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œå°±å¯ä»¥é€é &lt;code&gt;toHaveLength&lt;/code&gt; ä¾†ç¢ºèªé™£åˆ—çš„é•·åº¦æ˜¯å¦æ­£ç¢ºã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-3911f5ba6422af18&quot;&gt;æ¸¬è©¦åˆ—è¡¨å…§å®¹&lt;/h2&gt;

&lt;p&gt;é€™è£¡æˆ‘å€‘è¦ä¾†æ¸¬è©¦æ˜¯ä¸æ˜¯æœ‰æ­£ç¢ºé¡¯ç¤ºå…§å®¹ï¼Œé æœŸæ‡‰è©²æ˜¯è¦é¡¯ç¤ºåå­—å‡ºä¾†ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œå› ç‚ºæ‡‰è©²æœƒä½¿ç”¨åˆ°ä¸€æ¨£çš„æ¨¡æ“¬è³‡æ–™ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥å…ˆæŠŠä¸Šä¸€å€‹æ¸¬è©¦çš„ &lt;code&gt;users&lt;/code&gt; é™£åˆ—æŠ½å‡ºä¾†ï¼Œä¸¦ä¸”å°‡å®ƒæ”¾åœ¨ &lt;code&gt;renderComponent&lt;/code&gt; å‡½å¼ä¸­ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;const renderComponent = () =&amp;gt; {
  const users = [{ name: &#39;john doe&#39; }, { name: &#39;jane doe&#39; }]

  render(&amp;lt;List users={users} /&amp;gt;)

  return { users }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥è‘—æ”¾å…¥æ¸¬è©¦ä¸­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;test(&#39;it renders the user name&#39;, () =&amp;gt; {
  const { users } = renderComponent()
  users.forEach((user, index) =&amp;gt; {
    const name = screen.getByTestId(`name-${index}`)
    expect(name).toBeInTheDocument()
  })
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é¦–å…ˆé€šéå‘¼å« &lt;code&gt;renderComponent&lt;/code&gt; å‡½å¼å‘ˆç¾å…ƒä»¶ï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;forEach&lt;/code&gt; å‡½å¼è·‘ä¸€éç”¨æˆ¶åˆ—è¡¨ï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;screen.getByTestId&lt;/code&gt; å‡½å¼æŸ¥æ‰¾å…·æœ‰ &quot;data-testid&quot; å±¬æ€§ç‚º &quot;name-index&quot; çš„å…ƒç´ ï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;index&lt;/code&gt; ä¾†ç•¶ç”¨æˆ¶çš„ç´¢å¼•ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œï¼Œé€šéä½¿ç”¨ &lt;code&gt;toBeInTheDocument&lt;/code&gt; å‡½å¼é©—è­‰å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œç¢ºèªæ¯å€‹ç”¨æˆ¶çš„ &lt;code&gt;name&lt;/code&gt; æ˜¯ä¸æ˜¯æ­£ç¢ºåœ°å‘ˆç¾ã€‚&lt;/p&gt;

&lt;h2 id=&quot;app&quot;&gt;æ¸¬è©¦ App&lt;/h2&gt;

&lt;p&gt;æœ€å¾Œï¼Œä¸è¦å¿˜è¨˜é‚„æœ‰ &lt;code&gt;App.js&lt;/code&gt; é€™å€‹å…ƒä»¶ï¼Œå› ç‚ºè£¡é¢æœƒæ˜¯é è¨­çš„æ¸¬è©¦å…§å®¹ï¼Œä½†æˆ‘å€‘å·²ç¶“æœ‰åŠ å…¥äº†å…©å€‹å…ƒä»¶ï¼Œæ‰€ä»¥ç¾åœ¨è·‘æ¸¬è©¦çš„è©±ï¼Œæœƒç™¼ç¾ &lt;code&gt;App.js&lt;/code&gt; é€™å€‹å…ƒä»¶æœƒå¤±æ•—ã€‚&lt;/p&gt;

&lt;p&gt;é€™å€‹æ¸¬è©¦æ¯”è¼ƒåƒæ˜¯æ•´åˆæ¸¬è©¦ï¼Œå› ç‚ºæˆ‘å€‘è¦ç¢ºèª &lt;code&gt;App.js&lt;/code&gt; é€™å€‹å…ƒä»¶æ˜¯å¦æ­£ç¢ºåœ°å°‡ &lt;code&gt;List&lt;/code&gt; çš„å…§å®¹å’Œ &lt;code&gt;Form&lt;/code&gt; çš„å‹•ä½œå‘ˆç¾å‡ºä¾†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;import { render, screen } from &#39;@testing-library/react&#39;;
import user from &quot;@testing-library/user-event&quot;;
import App from &#39;./App&#39;;

test(&#39;can receive a new user and show it on a list&#39;, () =&amp;gt; {
  render(&amp;lt;App /&amp;gt;)

  const nameInput = screen.getByRole(&quot;textbox&quot;, { name: /name/i })
  const button = screen.getByRole(&quot;button&quot;);

  user.click(nameInput);
  user.keyboard(&quot;John Doe&quot;);
  user.click(button);


  const name = screen.getByTestId(&quot;name-0&quot;, { name: &quot;John Doe&quot; })
  expect(name).toBeInTheDocument()
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é¦–å…ˆä½¿ç”¨ &lt;code&gt;screen.getByRole&lt;/code&gt; å‡½å¼æŸ¥æ‰¾å…·æœ‰ &quot;role&quot; å±¬æ€§ &quot;textbox&quot; ä¸”åç¨±åŒ…å« &quot;name&quot; çš„å…ƒç´ ï¼Œä¸¦å°‡å…¶å„²å­˜åœ¨ &lt;code&gt;nameInput&lt;/code&gt; è®Šæ•¸ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ï¼Œä½¿ç”¨ &lt;code&gt;screen.getByRole&lt;/code&gt; å‡½å¼æŸ¥æ‰¾å…·æœ‰ &quot;role&quot; å±¬æ€§ &quot;button&quot; çš„å…ƒç´ ï¼Œä¸¦å°‡å…¶å„²å­˜åœ¨ &lt;code&gt;button&lt;/code&gt; è®Šæ•¸ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œï¼Œä½¿ç”¨ &lt;code&gt;user.click&lt;/code&gt; å‡½å¼æ¨¡æ“¬å° &lt;code&gt;nameInput&lt;/code&gt; å…ƒç´ çš„é»æ“Šï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;user.keyboard&lt;/code&gt; å‡½å¼å‘å…¶ä¸­éµå…¥ &quot;John Doe&quot;ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ï¼Œä½¿ç”¨ &lt;code&gt;user.click&lt;/code&gt; å‡½å¼æ¨¡æ“¬å° &lt;code&gt;button&lt;/code&gt; å…ƒç´ çš„é»æ“Šã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œï¼Œä½¿ç”¨ &lt;code&gt;screen.getByTestId&lt;/code&gt; å‡½å¼æŸ¥æ‰¾å…·æœ‰ &quot;data-testid&quot; å±¬æ€§ &quot;name-0&quot; ä¸”åç¨±ç‚º &quot;John Doe&quot; çš„å…ƒç´ ï¼Œä¸¦ä½¿ç”¨ &lt;code&gt;toBeInTheDocument&lt;/code&gt; å‡½å¼é©—è­‰å…¶æ˜¯å¦åœ¨æ–‡ä»¶ä¸­å­˜åœ¨ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ç°¡å–®çš„å±•ç¤ºä¸€ä¸‹å¦‚ä½•æ¸¬è©¦ React å…ƒä»¶ï¼Œæ„Ÿè¬é–±è®€ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sat, 11 Feb 2023 15:12:51 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/jest-react-testing-library.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 2 minutes</category>
    </item>
    <item>
      <title>Rust x React</title>
      <link>https://railquill.vercel.app/rust-x-react.html</link>
      <description>Rust x React å¤¢å¹»å…±æ¼”</description>
      <content:encoded><![CDATA[
        &lt;p&gt;çµ‚æ–¼åˆ°æœ€å¾Œä¸€å¤©äº†ï¼Œçœ‹åˆ°&lt;a href=&quot;https://www.cnblogs.com/yjmyzz/p/how-to-create-a-react-app-with-rust-and-wasm.html&quot;&gt;é€™ç¯‡æ–‡ç« &lt;/a&gt;è¦ºå¾—å¾ˆæœ‰è¶£ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘å€‘ä¾†ç©ä¸€ä¸‹ Rust è·Ÿ React çš„çµåˆå§ï¼&lt;/p&gt;

&lt;h2 id=&quot;part-2ea806877d406032&quot;&gt;é–‹å§‹å°ˆæ¡ˆ&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹æ–°çš„å°ˆæ¡ˆï¼Œé€™é‚Šæˆ‘å€‘ä½¿ç”¨ create-react-app ä¾†å»ºç«‹ä¸€å€‹æ–°çš„å°ˆæ¡ˆï¼Œä¸¦ä¸”ä½¿ç”¨ yarn ä¾†å®‰è£ç›¸ä¾å¥—ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ yarn create react-app rust-react
$ cd rust-react
$ yarn
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;rust&quot;&gt;å»ºç«‹ Rust&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘åœ¨å°ˆæ¡ˆä¸­å»ºç«‹ä¸€å€‹ Rust çš„ libraryï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ cargo new wasm-lib --lib
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œæœƒåœ¨å°ˆæ¡ˆä¸­çœ‹åˆ°ä¸€å€‹ wasm-lib çš„è³‡æ–™å¤¾ï¼Œè£¡é¢æœƒæœ‰ä¸€å€‹ &lt;code&gt;src&lt;/code&gt; è³‡æ–™å¤¾ï¼Œè£¡é¢æœƒæœ‰ä¸€å€‹ &lt;code&gt;lib.rs&lt;/code&gt; çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆå°±æ˜¯æˆ‘å€‘çš„ Rust libraryã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/AUNRQuP.png&quot; alt=&quot;CleanShot 2022-10-11 at 17.18.51&quot;&gt;&lt;/p&gt;

&lt;p&gt;å› ç‚ºæˆ‘å€‘é è¨ˆæƒ³è¦åšä¸€å€‹å¯ä»¥é»æ“ŠåŠ æ¸›çš„æŒ‰éˆ•ï¼Œç„¶å¾Œå›å‚³è¨ˆç®—çµæœï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥åœ¨ &lt;code&gt;lib.rs&lt;/code&gt; ä¸­åŠ å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;pub fn calculator(a: i32, b: i32) -&amp;gt; i32 {
    a + b
}

#[test]
fn cal_test() {
    assert_eq!(1 + 1, calculator(1, 1));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œ cd åˆ° &lt;code&gt;wasm-lib&lt;/code&gt; è³‡æ–™å¤¾ï¼Œä¸¦ä¸”æ¸¬è©¦ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ cd wasm-lib
$ cargo test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ²’ä»€éº¼å•é¡Œçš„è©±ï¼Œå°±æœƒå‡ºç¾ä»¥ä¸‹çš„çµæœï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/CdjJOch.png&quot; alt=&quot;CleanShot 2022-10-11 at 17.25.42&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†åˆ° &lt;code&gt;Cargo.toml&lt;/code&gt; ä¸­åŠ å…¥ä»¥ä¸‹çš„è¨­å®šï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml&quot;&gt;[lib]
crate-type = [&quot;cdylib&quot;]

[dependencies]
wasm-bindgen = &quot;0.2.78&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™ä¸€æ®µçš„æ„æ€æ˜¯ï¼Œæˆ‘å€‘è¦æŠŠé€™å€‹ library è½‰æ›æˆ WebAssembly çš„æ ¼å¼ï¼Œä¸¦ä¸”ä½¿ç”¨ wasm-bindgen ä¾†å¹«æˆ‘å€‘è½‰æ›ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œé‚„è¦åœ¨ &lt;code&gt;src/lib.rs&lt;/code&gt; ä¸­åŠ å…¥è¨­å®šï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use wasm_bindgen::prelude::*;

#[wasm_bindgen]
pub fn calculator(a: i32, b: i32) -&amp;gt; i32 {
    a + b
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ¨£å¯ä»¥è®“ &lt;code&gt;calculator&lt;/code&gt; é€™å€‹å‡½å¼å¯ä»¥åœ¨ wasm ä¸­è¢«ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘è¦å®‰è£ wasm-packï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ cargo install wasm-pack
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œæˆ‘å€‘é‚„éœ€è¦è®“ Rust å¯ä»¥åœ¨é€™å€‹å°ˆæ¡ˆä¸­å¯ä»¥é‹ä½œã€‚
æ‰€ä»¥åœ¨ &lt;code&gt;package.json&lt;/code&gt; ä¸­åŠ å…¥ script:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;&quot;scripts&quot;: {
  &quot;start&quot;: &quot;react-scripts start&quot;,
  &quot;build&quot;: &quot;react-scripts build&quot;,
  &quot;test&quot;: &quot;react-scripts test&quot;,
  &quot;eject&quot;: &quot;react-scripts eject&quot;,
  &quot;build:wasm&quot;: &quot;cd wasm-lib &amp;amp;&amp;amp; wasm-pack build --target web --out-dir pkg&quot;
},
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥è‘—åŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ yarn build:wasm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œå°±æœƒç”Ÿæˆä¸€å€‹ &lt;code&gt;pkg&lt;/code&gt; çš„è³‡æ–™å¤¾ï¼Œè£¡é¢æœƒæœ‰ä¸€å€‹ &lt;code&gt;wasm_lib_bg.wasm&lt;/code&gt; çš„æª”æ¡ˆï¼Œé€™å°±æ˜¯æˆ‘å€‘çš„ WebAssembly æª”æ¡ˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/O6rvmyB.png&quot; alt=&quot;CleanShot 2022-10-11 at 17.50.36@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;ä¸¦ä¸”æˆ‘å€‘å¯ä»¥çœ‹åˆ°æˆ‘å€‘å‰›å‰›å»ºç«‹çš„ &lt;code&gt;calculator&lt;/code&gt; å‡½å¼å·²ç¶“ç”Ÿæˆåœ¨ &lt;code&gt;wasm_lib.d.ts&lt;/code&gt; ä¸­äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/TbRxl8D.png&quot; alt=&quot;CleanShot 2022-10-11 at 18.00.17@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œæˆ‘å€‘é‚„éœ€è¦æŠŠä»–åŠ é€² &lt;code&gt;node_modules&lt;/code&gt; ä¸­ï¼Œæ‰€ä»¥æˆ‘å€‘è¦åœ¨çµ‚ç«¯æ©Ÿä¸­åŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ yarn add ./wasm-lib/pkg
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ¨£å°±å¯ä»¥åœ¨ &lt;code&gt;node_modules&lt;/code&gt; ä¸­çœ‹åˆ° &lt;code&gt;wasm-lib&lt;/code&gt; é€™å€‹è³‡æ–™å¤¾äº†ï¼Œä¸¦ä¸”æˆ‘å€‘å¯ä»¥å¼•å…¥ä¾†ä½¿ç”¨ä»–ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œæˆ‘å€‘ä¾† React ä¸­ä½¿ç”¨ä»–ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;jsx&quot;&gt;import { useState } from &#39;react&#39;
import init, { calculator } from &#39;wasm-lib&#39;
import logo from &#39;./logo.svg&#39;
import &#39;./App.css&#39;

function App() {
  const [num, setNum] = useState(0)

  const handlePlus = () =&amp;gt; {
    init().then(() =&amp;gt; {
      setNum(calculator(num, 1))
    })
  }

  const handleMinus = () =&amp;gt; {
    if (num &amp;gt; 0) {
      init().then(() =&amp;gt; {
        setNum(calculator(num, -1))
      })
    }
  }

  return (
    &amp;lt;div className=&#39;App&#39;&amp;gt;
      &amp;lt;header className=&#39;App-header&#39;&amp;gt;
        &amp;lt;img src={logo} className=&#39;App-logo&#39; alt=&#39;logo&#39; /&amp;gt;
        &amp;lt;p&amp;gt;{num}&amp;lt;/p&amp;gt;
        &amp;lt;div&amp;gt;
          &amp;lt;button onClick={handlePlus}&amp;gt;+&amp;lt;/button&amp;gt;
          &amp;lt;button onClick={handleMinus}&amp;gt;-&amp;lt;/button&amp;gt;
        &amp;lt;/div&amp;gt;
      &amp;lt;/header&amp;gt;
    &amp;lt;/div&amp;gt;
  )
}

export default App
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾ŒåŸ·è¡Œ &lt;code&gt;yarn start&lt;/code&gt;ï¼Œå°±å¯ä»¥åŸ·è¡Œæˆ‘å€‘çš„å°ˆæ¡ˆï¼Œä¸¦ä¸”è®“ Rust é‹è¡Œåœ¨ React ä¸­äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2bb94ba078f5a9ec&quot;&gt;åŒå ´åŠ æ˜ &lt;/h2&gt;

&lt;p&gt;å‰é¢åªæ˜¯å–®ç´”çš„ä½¿ç”¨ Rust ä¾†åšåŠ æ¸›çš„å‹•ä½œï¼Œä½†æ˜¯é€™æ¨£çœ‹ä¸å‡º Rust çš„æ•ˆèƒ½å„ªå‹¢ï¼Œæ‰€ä»¥æˆ‘å€‘ä¾†åšä¸€äº›ç¨å¾®è¤‡é›œçš„é‹ç®—ç©ç©çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å€‘ä¾†åšä¸€å€‹è²»æ°æ•¸åˆ—çš„å‡½å¼ï¼Œä¸¦ä¸”ä½¿ç”¨ Rust ä¾†åšé‹ç®—ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆåœ¨ &lt;code&gt;wasm-lib/src/lib.rs&lt;/code&gt; ä¸­åŠ å…¥æ–°çš„æ–¹æ³•ï¼Œä¸¦ä¸”å¯«ä¸€ä¸‹æ¸¬è©¦ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[wasm_bindgen]
pub fn fibonacci(n: i32) -&amp;gt; i32 {
    if n &amp;lt;= 1 {
        return n;
    } else {
        return fibonacci(n - 1) + fibonacci(n - 2);
    }
}

#[test]
fn fib_test() {
    assert_eq!(1, fibonacci(1));
    assert_eq!(1, fibonacci(2));
    assert_eq!(2, fibonacci(3));
    assert_eq!(3, fibonacci(4));
    assert_eq!(5, fibonacci(5));
    assert_eq!(8, fibonacci(6));
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è·‘ä¸€ä¸‹æ¸¬è©¦ï¼ŒåŸ·è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;// åœ¨ wasm-lib è³‡æ–™å¤¾ä¸­
$ cargo test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/E6huTQ5.png&quot; alt=&quot;CleanShot 2022-10-14 at 17.50.57@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œè¨˜å¾—è¦é‡æ–° buildï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;// è¦åœ¨æ ¹ç›®éŒ„ä¸­åŸ·è¡Œ
$ yarn build:wasm
$ yarn add ./wasm-lib/pkg
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œåœ¨ &lt;code&gt;App.js&lt;/code&gt; åŠ é€²æˆ‘å€‘çš„ &lt;code&gt;fibonacci&lt;/code&gt; å‡½å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;import init, { calculator, fibonacci } from &#39;wasm-lib&#39;

function App() {
  // çœç•¥...
  const handleFibonacci = () =&amp;gt; {
    let start = new Date().getTime()
    init().then(() =&amp;gt; {
      setFibonacciNum(fibonacci(inputNum))
    })
    let end = new Date().getTime()
    console.log(`Rust: æ™‚é–“ï¼š ${end - start} ms`)
  }
  // çœç•¥...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œå¦å¤–å¯«ä¸€å€‹ JS çš„è²»æ°æ•¸åˆ—å‡½å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;const calFibonacci = (n) =&amp;gt; {
  if (n &amp;lt;= 1) {
    return n
  } else {
    return calFibonacci(n - 1) + calFibonacci(n - 2)
  }
}

function App() {
  // çœç•¥...
  const handleFibonacciJS = () =&amp;gt; {
    let start = new Date().getTime()
    let result = calFibonacci(inputNum)
    setFibonacciNumJS(result)
    let end = new Date().getTime()
    console.log(`JS: æ™‚é–“ï¼š ${end - start} ms`)
  }
  // çœç•¥...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€å¾ŒåŸ·è¡Œä¸€ä¸‹çµæœï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/gFcFkIx.gif&quot; alt=&quot;CleanShot 2022-10-15 at 01.02.46&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç›¸ä¿¡çœ‹åˆ°ç•«é¢ï¼Œä¸ç”¨å¤šèªªä½ æ‡‰è©²ä¹Ÿèƒ½æ„Ÿå—åˆ° Rust çš„æ•ˆèƒ½å„ªå‹¢äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæœ‰èˆˆè¶£çš„è©±ï¼Œå¯ä»¥ç›´æ¥åƒè€ƒæˆ‘çš„ &lt;a href=&quot;https://github.com/bucky0112/rust_x_react&quot;&gt;GitHub Repo&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-6542bd861e6&quot;&gt;å¿ƒå¾—&lt;/h2&gt;

&lt;p&gt;é€™ 30 å¤©çœŸçš„æ»¿è¾›è‹¦çš„ï¼Œæ¯å¤©éƒ½è¦ç¡¬æ“ å‡ºæ™‚é–“ä¾†å¯«æ–‡ç« ï¼Œæœ¬ä¾†æœ‰è·Ÿæœ‹å‹ä¸€èµ·å¯« side project çš„è¡Œç¨‹ï¼Œä½†å› ç‚ºæ™‚é–“ä¸å¤ çš„é—œä¿‚ï¼Œåªå¥½å…ˆè·Ÿæœ‹å‹æš«ç·©ï¼ŒçœŸçš„æ˜¯å°ä»–å€‘éå¸¸æŠ±æ­‰ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è‡ªå·±ä¹Ÿè¦ºå¾—é€™ 30 å¤©çœŸçš„å­¸åˆ°å¾ˆå¤šæ±è¥¿ï¼Œé›–ç„¶å¯«åˆ°ä¸€åŠçš„æ™‚å€™ï¼Œæœ‰é»æƒ³è¦æ”¾æ£„ï¼Œä½†æ˜¯æƒ³åˆ°è‡ªå·±å·²ç¶“é–‹å§‹äº†ï¼Œå°±ä¸æƒ³è¦æ”¾æ£„ï¼Œæ‰€ä»¥å°±ç¹¼çºŒå¯«ä¸‹å»ï¼Œæœ€å¾Œä¹Ÿå®Œæˆäº†ã€‚å®Œè³½çš„æˆå°±æ„ŸçœŸçš„æ˜¯å¾ˆæ£’ï¼Œä¹Ÿè®“æˆ‘å°è‡ªå·±çš„ä¿¡å¿ƒæœ‰äº†ä¸€é»é»çš„æå‡ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œ Rust çœŸçš„æ˜¯ä¸€å€‹å¾ˆæ£’çš„èªè¨€ï¼Œé›–ç„¶æˆ‘é‚„æ²’æœ‰å¯«åˆ°å¾ˆè¤‡é›œçš„æ±è¥¿ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡æœªä¾†æœƒæœ‰æ›´å¤šçš„æ©Ÿæœƒå¯ä»¥ä½¿ç”¨ Rustï¼Œä¹Ÿå¸Œæœ›è‡ªå·±èƒ½å¤ ç¹¼çºŒå­¸ç¿’ä¸‹å»ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/gCQstja.gif&quot; alt=&quot;ferris&quot;&gt;&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sat, 15 Oct 2022 01:50:59 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-x-react.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 3 minutes</category>
    </item>
    <item>
      <title>ç”¨ Rust ä¾†å¯«å‰ç«¯ - Yew</title>
      <link>https://railquill.vercel.app/rust-yew.html</link>
      <description>Rust çš„æ¡†æ¶ Rocket</description>
      <content:encoded><![CDATA[
        &lt;p&gt;ä»Šå¤©æ˜¯æˆ‘å€‘ä¸€èµ·å­¸ç¿’ Rust çš„ç¬¬ 29 å¤©äº†ï¼Œå‰é¢æˆ‘å€‘ç©äº†å¾ˆå¤šå¾Œç«¯çš„æ±è¥¿ï¼Œä»Šå¤©æˆ‘å€‘ä¾†ç©ä¸€ä¸‹å‰ç«¯çš„æ±è¥¿å§ï¼&lt;/p&gt;

&lt;h2 id=&quot;webassembly&quot;&gt;WebAssembly&lt;/h2&gt;

&lt;p&gt;åœ¨é–‹å§‹ä¹‹å‰ï¼Œæƒ³å…ˆä»‹ç´¹ä¸€ä¸‹ WebAssemblyï¼Œå®ƒæ˜¯ä¸€ç¨®å¯ä»¥åœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œçš„ç¨‹å¼èªè¨€ï¼Œå®ƒå¯ä»¥è®“æˆ‘å€‘åœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œéå¸¸è¤‡é›œçš„ç¨‹å¼ï¼Œè€Œä¸”å®ƒçš„åŸ·è¡Œé€Ÿåº¦ä¹Ÿéå¸¸å¿«ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥åœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œä¸€äº›æ¯”è¼ƒè¤‡é›œçš„é‹ç®—ï¼Œè€Œä¸æœƒå½±éŸ¿åˆ°ç€è¦½å™¨çš„é«”é©—ã€‚&lt;/p&gt;

&lt;h2 id=&quot;yew&quot;&gt;Yew&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://yew.rs/&quot;&gt;Yew&lt;/a&gt; æ˜¯ä¸€å€‹å¯ä»¥è®“æˆ‘å€‘åœ¨ Rust ä¸­ä½¿ç”¨ WebAssembly çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥è®“æˆ‘å€‘åœ¨ Rust ä¸­æ’°å¯«å‰ç«¯çš„ç¨‹å¼ï¼Œä¸¦ä¸”å¯ä»¥ç·¨è­¯æˆ WebAssemblyï¼Œè®“æˆ‘å€‘åœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œã€‚&lt;/p&gt;

&lt;h2 id=&quot;yew&quot;&gt;å®‰è£ Yew&lt;/h2&gt;

&lt;p&gt;é‚£éº¼æˆ‘å€‘è¦å¦‚ä½•ä½¿ç”¨ Yew ä¾†é–‹ç™¼å‰ç«¯çš„ç¨‹å¼å‘¢ï¼ŸæŒ‰ç…§å®˜ç¶²çš„æŒ‡ç¤ºï¼Œæˆ‘å€‘è¦å…ˆå®‰è£ä»¥ä¸‹çš„æ±è¥¿ï¼š&lt;/p&gt;

&lt;h3 id=&quot;webassembly&quot;&gt;WebAssembly&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ rustup target add wasm32-unknown-unknown
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;trunk&quot;&gt;Trunk&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ cargo install trunk
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;part-2ea8073161887627&quot;&gt;é–‹æ–°å°ˆæ¡ˆ&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ cargo new yew-demo
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œåœ¨ &lt;code&gt;Cargo.toml&lt;/code&gt; ä¸­åŠ å…¥ä»¥ä¸‹çš„å…§å®¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml&quot;&gt;[dependencies]
yew = &quot;0.19&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ°é€™é‚Šæˆ‘å€‘å°±å¯ä»¥é–‹å§‹æ’°å¯«ç¨‹å¼äº†ï¼&lt;/p&gt;

&lt;p&gt;å…ˆåœ¨ &lt;code&gt;src/main.rs&lt;/code&gt; ä¸­åŠ å…¥ä»¥ä¸‹çš„å…§å®¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use yew::prelude::*;

enum Msg {
    AddOne,
}

struct Model {
    value: i64,
}

impl Component for Model {
    type Message = Msg;
    type Properties = ();

    fn create(_ctx: &amp;amp;Context&amp;lt;Self&amp;gt;) -&amp;gt; Self {
        Self {
            value: 0,
        }
    }

    fn update(&amp;amp;mut self, _ctx: &amp;amp;Context&amp;lt;Self&amp;gt;, msg: Self::Message) -&amp;gt; bool {
        match msg {
            Msg::AddOne =&amp;gt; {
                self.value += 1;
                // the value has changed so we need to
                // re-render for it to appear on the page
                true
            }
        }
    }

    fn view(&amp;amp;self, ctx: &amp;amp;Context&amp;lt;Self&amp;gt;) -&amp;gt; Html {
        // This gives us a component&#39;s &quot;`Scope`&quot; which allows us to send messages, etc to the component.
        let link = ctx.link();
        html! {
            &amp;lt;div&amp;gt;
                &amp;lt;button onclick={link.callback(|_| Msg::AddOne)}&amp;gt;{ &quot;+1&quot; }&amp;lt;/button&amp;gt;
                &amp;lt;p&amp;gt;{ self.value }&amp;lt;/p&amp;gt;
            &amp;lt;/div&amp;gt;
        }
    }
}

fn main() {
    yew::start_app::&amp;lt;Model&amp;gt;();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œåœ¨æ ¹ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ &lt;code&gt;index.html&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
  &amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;utf-8&quot; /&amp;gt;
    &amp;lt;title&amp;gt;Yew App&amp;lt;/title&amp;gt;
  &amp;lt;/head&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾ŒåŸ·è¡Œ &lt;code&gt;trunk serve&lt;/code&gt;ï¼Œå°±å¯ä»¥åœ¨ç€è¦½å™¨ä¸­çœ‹åˆ°æˆ‘å€‘çš„ç¶²é äº†ï¼&lt;/p&gt;

&lt;p&gt;ä¸éç›®å‰åªèƒ½è®“æ•¸å­—åŠ  1ï¼Œé‚£æˆ‘å€‘å†åŠ å¦ä¸€å€‹æŒ‰éˆ•å¯ä»¥ - 1 çœ‹èµ·ä¾†æ¯”è¼ƒå®Œæ•´ä¸€é»ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;enum Msg {
    AddOne,
    MinusOne,
}

impl Component for Model {
    // çœç•¥..
        fn update(&amp;amp;mut self, _ctx: &amp;amp;Context&amp;lt;Self&amp;gt;, msg: Self::Message) -&amp;gt; bool {
        match msg {
            Msg::AddOne =&amp;gt; {
                self.value += 1;
                true
            }

            Msg::MinusOne =&amp;gt; {
                if (self.value &amp;gt; 0) {
                    self.value -= 1;
                }
                true
            }
        }
    }

    fn view(&amp;amp;self, ctx: &amp;amp;Context&amp;lt;Self&amp;gt;) -&amp;gt; Html {
        let link = ctx.link();
        html! {
            &amp;lt;div class=&quot;content&quot;&amp;gt;
                &amp;lt;button onclick={link.callback(|_| Msg::AddOne)} class=&quot;btn&quot;&amp;gt;{ &quot;+1&quot; }&amp;lt;/button&amp;gt;
                &amp;lt;p class=&quot;result&quot;&amp;gt;{ self.value }&amp;lt;/p&amp;gt;
                &amp;lt;button onclick={link.callback(|_| Msg::MinusOne)} class=&quot;btn&quot;&amp;gt;{ &quot;-1&quot; }&amp;lt;/button&amp;gt;
            &amp;lt;/div&amp;gt;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚æœè¦é †ä¾¿åŠ ä¸Šä¸€äº› CSS çš„è©±ï¼Œå¯ä»¥åœ¨åœ¨æ ¹ç›®éŒ„æ–°å¢ä¸€å€‹ &lt;code&gt;style.css&lt;/code&gt;ï¼Œç„¶å¾Œåœ¨ &lt;code&gt;index.html&lt;/code&gt; ä¸­åŠ å…¥ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;&amp;lt;link data-trunk href=&quot;style.css&quot; rel=&quot;css&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ¨£å°±å®Œæˆä¸€å€‹ç”¨ Yew å¯«çš„ App äº†ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/ibz0XCZ.gif&quot; alt=&quot;CleanShot 2022-10-14 at 00.21.36&quot;&gt;&lt;/p&gt;

&lt;p&gt;å¤§å®¶å¦‚æœæœ‰èˆˆè¶£çš„è©±ï¼Œå¯ä»¥åƒè€ƒæˆ‘çš„ &lt;a href=&quot;https://github.com/bucky0112/yew_calculator&quot;&gt;GitHub repo&lt;/a&gt; ä¾†ç©ç©çœ‹ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Fri, 14 Oct 2022 00:31:42 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-yew.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 2 minutes</category>
    </item>
    <item>
      <title>ä¾†ç© Rust çš„æ¡†æ¶å§ï¼ - Rocket - Part III</title>
      <link>https://railquill.vercel.app/rust-rocket-part-iii.html</link>
      <description>Rust çš„æ¡†æ¶ Rocket</description>
      <content:encoded><![CDATA[
        &lt;p&gt;æˆ‘å€‘ä»Šå¤©è¦ä¾†åš Authï¼Œä¸€å€‹åŸºæœ¬çš„èº«åˆ†é©—è­‰åŠŸèƒ½ï¼Œä¸æƒ³è¦è®“ä»»ä½•äººéƒ½å¯ä»¥éš¨ä¾¿ä½¿ç”¨æˆ‘å€‘çš„ APIã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-2c5c0dcf475632bf&quot;&gt;å®‰è£å¥—ä»¶&lt;/h2&gt;

&lt;p&gt;å› ç‚ºæˆ‘å€‘é©—è­‰çš„è™•ç†æœƒä½¿ç”¨åˆ° base64 ç·¨ç¢¼ï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘å€‘å…ˆåœ¨ &lt;code&gt;Cargo.toml&lt;/code&gt; åŠ å…¥ &lt;code&gt;base64&lt;/code&gt; é€™å€‹ crateã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml&quot;&gt;[dependencies]
base64 = &quot;0.13&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”±æ–¼ç›®å‰ &lt;code&gt;main.rs&lt;/code&gt; ä¸­çš„ code æœ‰é»å¤šï¼Œæ‰€ä»¥æˆ‘å€‘å¦å¤–é–‹ä¸€å€‹æª”æ¡ˆä¾†è™•ç†ã€‚
ç›´æ¥åœ¨ &lt;code&gt;src&lt;/code&gt; è³‡æ–™å¤¾ä¸‹æ–°å¢ä¸€å€‹ &lt;code&gt;auth.rs&lt;/code&gt; æª”æ¡ˆï¼Œä¸¦ä¸”åœ¨ &lt;code&gt;main.rs&lt;/code&gt; ä¸­åŠ å…¥ &lt;code&gt;mod auth;&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;code&gt;auth.rs&lt;/code&gt; ä¸­æˆ‘å€‘å…ˆä¾†å®šç¾©ä¸€å€‹ &lt;code&gt;BasicAuth&lt;/code&gt; çš„ structï¼Œä¸¦ä¸”åœ¨è£¡é¢å®šç¾©ä¸€å€‹ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼çš„æ¬„ä½ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;pub struct BasicAuth {
    username: String,
    password: String,
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use rocket::http::Status;
use rocket::request::{Request, FromRequest, Outcome};

pub struct BasicAuth {
    pub username: String,
    pub password: String,
}
impl BasicAuth {
    fn from_authorization_header(header: &amp;amp;str) -&amp;gt; Option&amp;lt;BasicAuth&amp;gt; {
        let split = header.split_whitespace().collect::&amp;lt;Vec&amp;lt;_&amp;gt;&amp;gt;();
        if split.len() != 2 {
            return None;
        }

        if split[0] != &quot;Basic&quot; {
            return None;
        }

        Self::from_base64_encoded(split[1])
    }

    fn from_base64_encoded(base64_string: &amp;amp;str) -&amp;gt; Option&amp;lt;BasicAuth&amp;gt; {
        let decoded = base64::decode(base64_string).ok()?;
        let decoded_str = String::from_utf8(decoded).ok()?;
        let split = decoded_str.split(&quot;:&quot;).collect::&amp;lt;Vec&amp;lt;_&amp;gt;&amp;gt;();

        // If exactly username &amp;amp; password pair are present
        if split.len() != 2 {
            return None;
        }

        let (username, password) = (split[0].to_string(), split[1].to_string());

        Some(BasicAuth {
            username,
            password
        })
    }
}

#[rocket::async_trait]
impl&amp;lt;&#39;r&amp;gt; FromRequest&amp;lt;&#39;r&amp;gt; for BasicAuth {
    type Error = ();

    async fn from_request(request: &amp;amp;&#39;r Request&amp;lt;&#39;_&amp;gt;) -&amp;gt; Outcome&amp;lt;Self, Self::Error&amp;gt; {
        let auth_header = request.headers().get_one(&quot;Authorization&quot;);
        if let Some(auth_header) = auth_header {
            if let Some(auth) = Self::from_authorization_header(auth_header) {
                return Outcome::Success(auth)
            }
        }

        Outcome::Failure((Status::Unauthorized, ()))
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥è‘—æˆ‘å€‘å®šç¾©äº†ä¸€å€‹ &lt;code&gt;from_authorization_header&lt;/code&gt; çš„ functionï¼Œé€™å€‹ function æœƒæ¥æ”¶ä¸€å€‹ &lt;code&gt;header&lt;/code&gt; çš„åƒæ•¸ï¼Œä¸¦ä¸”å›å‚³ä¸€å€‹ &lt;code&gt;Option&amp;lt;BasicAuth&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸»è¦æ˜¯åœ¨è™•ç† &lt;code&gt;Authorization&lt;/code&gt; çš„ headerï¼Œå¦‚æœ header çš„é•·åº¦ä¸æ˜¯ 2ï¼Œæˆ–æ˜¯ header çš„ç¬¬ä¸€å€‹å€¼ä¸æ˜¯ &lt;code&gt;Basic&lt;/code&gt;ï¼Œå°±æœƒå›å‚³ &lt;code&gt;None&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœ header çš„é•·åº¦æ˜¯ 2ï¼Œä¸”ç¬¬ä¸€å€‹å€¼æ˜¯ &lt;code&gt;Basic&lt;/code&gt;ï¼Œå°±æœƒå‘¼å« &lt;code&gt;from_base64_encoded&lt;/code&gt; é€™å€‹ functionï¼Œä¸¦ä¸”å°‡ header çš„ç¬¬äºŒå€‹å€¼å‚³å…¥ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œ &lt;code&gt;from_base64_encoded&lt;/code&gt; ä¸»è¦æ˜¯å°‡å‚³å…¥çš„å€¼é€²è¡Œ base64 è§£ç¢¼ï¼Œä¸¦ä¸”è½‰æˆ &lt;code&gt;String&lt;/code&gt;ï¼Œæ¥è‘—å†å°‡é€™å€‹ &lt;code&gt;String&lt;/code&gt; ä»¥ &lt;code&gt;:&lt;/code&gt; é€²è¡Œåˆ†å‰²ï¼Œä¸¦ä¸”å°‡åˆ†å‰²å¾Œçš„å€¼å‚³å…¥ &lt;code&gt;BasicAuth&lt;/code&gt; çš„ struct ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œæˆ‘å€‘å®šç¾©äº†ä¸€å€‹ &lt;code&gt;FromRequest&lt;/code&gt; çš„ traitï¼Œé€™å€‹ trait æœƒåœ¨æˆ‘å€‘çš„ API è¢«å‘¼å«æ™‚ï¼Œæœƒå…ˆé€²è¡Œé©—è­‰ï¼Œå¦‚æœé©—è­‰æˆåŠŸï¼Œå°±æœƒå°‡é©—è­‰çš„çµæœå‚³å…¥ API ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;code&gt;from_request&lt;/code&gt; ä¸­ï¼Œæˆ‘å€‘å…ˆå–å¾— &lt;code&gt;Authorization&lt;/code&gt; çš„ headerï¼Œå¦‚æœæœ‰çš„è©±ï¼Œå°±æœƒå‘¼å« &lt;code&gt;from_authorization_header&lt;/code&gt; é€™å€‹ functionï¼Œä¸¦ä¸”å°‡ header å‚³å…¥ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœé©—è­‰æˆåŠŸï¼Œå°±æœƒå›å‚³ &lt;code&gt;Outcome::Success(auth)&lt;/code&gt;ï¼Œå¦‚æœé©—è­‰å¤±æ•—ï¼Œå°±æœƒå›å‚³ &lt;code&gt;Outcome::Failure((Status::Unauthorized, ()))&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;api&quot;&gt;è™•ç† API&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘åœ¨ &lt;code&gt;main.rs&lt;/code&gt; ä¸­åŠ å…¥æˆ‘å€‘å‰›å‰›æ‰€å®šç¾©çš„ &lt;code&gt;BasicAuth&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;mod auth;

use auth::BasicAuth;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œå…ˆåœ¨ &lt;code&gt;get_demo&lt;/code&gt; é€™å€‹ API ä¸­åŠ å…¥ &lt;code&gt;BasicAuth&lt;/code&gt; çš„åƒæ•¸é‹ä½œçœ‹çœ‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[get(&quot;/demo&quot;)]
fn get_demo(_auth: BasicAuth) -&amp;gt; Value {
    json!([{ &quot;id&quot;: 1, &quot;name&quot;: &quot;Bucky&quot; }, { &quot;id&quot;: 2, &quot;name&quot;: &quot;Tom&quot; }])
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŸ·è¡Œå®Œæ‰“é–‹ç€è¦½å™¨æœƒç™¼ç¾é é¢é¡¯ç¤º 401 çš„éŒ¯èª¤ï¼Œä»£è¡¨æˆ‘å€‘å‰›å‰›æ‰€åšçš„é©—è­‰æœ‰é–‹å§‹é‹ä½œï¼Œæ‰€ä»¥æˆ‘å€‘æ¥è‘—å˜—è©¦åœ¨ Postman çš„ header ä¸­åŠ å…¥ &lt;code&gt;Authorization&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/y36n1kN.png&quot; alt=&quot;CleanShot 2022-10-09 at 23.01.51@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘å€‘å°‡ &lt;code&gt;Authorization&lt;/code&gt; çš„å€¼æ”¹æˆ &lt;code&gt;Basic YnVja3k6YnVja3k=&lt;/code&gt;ï¼Œé€™å€‹å€¼æ˜¯ &lt;code&gt;bucky:bucky&lt;/code&gt; é€™å€‹å­—ä¸²é€²è¡Œ base64 ç·¨ç¢¼å¾Œçš„çµæœï¼Œæˆ‘å€‘æŠŠé€™å€‹å€¼ç•¶æˆ token ä¾†é©—è­‰ä¹‹å¾Œå°±å¯ä»¥æˆåŠŸå–å¾—è³‡æ–™äº†ã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—å°±å¯ä»¥åœ¨æ‰€æœ‰çš„ methods éƒ½åŠ ä¸Š &lt;code&gt;BasicAuth&lt;/code&gt;ï¼Œé€™æ¨£æˆ‘å€‘æ‰€æœ‰çš„ methods éƒ½æœƒé€²è¡Œé©—è­‰äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-6542fd4e95a&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;ç›®å‰æˆ‘å€‘å·²ç¶“çŸ¥é“æ€éº¼åšå‡ºä¸€å€‹ç°¡å–® CRUD çš„ APIï¼Œç„¶å¾Œä¹ŸçŸ¥é“æ€éº¼åšå‡ºä¸€å€‹ç°¡å–®çš„é©—è­‰ã€‚è€Œåœ¨å‰©ä¸‹çš„åƒè³½å¤©æ•¸å…§ï¼Œæˆ‘å€‘è¦ä¾†ç©ä¸€ä¸‹å…¶ä»–çš„éƒ¨åˆ†ï¼Œæ˜å¤©æˆ‘å€‘è¦ä¾†ç©ä¸€ä¸‹ Yew é€™å€‹ Rust çš„å‰ç«¯æ¡†æ¶ã€‚&lt;/p&gt;

&lt;p&gt;è€Œ Rocket å»ºç«‹çš„ API éƒ¨åˆ†ï¼Œæˆ‘å€‘æœƒåœ¨ä¹‹å¾Œçš„æ–‡ç« ç¹¼çºŒå®Œæˆï¼Œæœƒåšåˆ°è·Ÿè³‡æ–™åº«çš„é€£ç·šï¼Œé‚„æœ‰éƒ¨ç½²çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥å¦‚æœæœ‰èˆˆè¶£çš„è©±ï¼Œå†è«‹å¤§å®¶æ‹­ç›®ä»¥å¾…ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Thu, 13 Oct 2022 01:31:13 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-rocket-part-iii.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 2 minutes</category>
    </item>
    <item>
      <title>ä¾†ç© Rust çš„æ¡†æ¶å§ï¼ - Rocket - Part II</title>
      <link>https://railquill.vercel.app/rust-rocket-part-ii.html</link>
      <description>Rust çš„æ¡†æ¶ Rocket</description>
      <content:encoded><![CDATA[
        &lt;p&gt;æ˜¨å¤©æˆ‘å€‘ç”¨å·²ç¶“ç”¨ Rocket å»ºç«‹äº†ä¸€å€‹ serverï¼Œä¸¦ä¸”å¯ä»¥æ¥æ”¶å›å‚³ JSONï¼Œä»Šå¤©å°±ä¾†äº†è§£ä¸€ä¸‹æ€éº¼ä½¿ç”¨ Rocket å»ºç«‹ä¸€å€‹ RESTful APIã€‚&lt;/p&gt;

&lt;h2 id=&quot;restful-api&quot;&gt;RESTful API&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘æœƒå»ºç«‹ä¸€å€‹ç°¡å–®çš„ Restful API çš„ç¯„ä¾‹ï¼Œåˆ†åˆ¥æœƒç”¨åˆ° &lt;code&gt;GET&lt;/code&gt;ã€&lt;code&gt;POST&lt;/code&gt;ã€&lt;code&gt;PUT&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt; é€™å››å€‹ HTTP methodï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†çœ‹çœ‹æ€éº¼å¯¦ä½œã€‚&lt;/p&gt;

&lt;p&gt;åˆ†åˆ¥å»ºç«‹ä»¥ä¸‹çš„å‡½å¼ï¼Œé€™é‚Šä½¿ç”¨ &lt;code&gt;#[get]&lt;/code&gt;ã€&lt;code&gt;#[post]&lt;/code&gt;ã€&lt;code&gt;#[put]&lt;/code&gt;ã€&lt;code&gt;#[delete]&lt;/code&gt; ä¾†æŒ‡å®š HTTP methodï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[get(&quot;/demo&quot;)]
fn get_demo() -&amp;gt; Value {
    json!([{ &quot;id&quot;: 1, &quot;name&quot;: &quot;Bucky&quot; }, { &quot;id&quot;: 2, &quot;name&quot;: &quot;Tom&quot; }])
}

#[get(&quot;/demo/&amp;lt;id&amp;gt;&quot;)]
fn view_demo(id: i32) -&amp;gt; Value {
    json!({ &quot;id&quot;: id, &quot;name&quot;: &quot;Some one&quot; })
}

#[post(&quot;/demo&quot;, format = &quot;json&quot;)]
fn create_demo() -&amp;gt; Value {
    json!({ &quot;id&quot;: 3, &quot;name&quot;: &quot;Patty&quot; })
}

#[put(&quot;/demo/&amp;lt;id&amp;gt;&quot;, format = &quot;json&quot;)]
fn update_demo(id: i32) -&amp;gt; Value {
    json!({ &quot;id&quot;: id, &quot;name&quot;: &quot;Bucky&quot; })
}

#[delete(&quot;/demo/&amp;lt;id&amp;gt;&quot;)]
fn delete_demo(id: i32) -&amp;gt; status::NoContent {
    status::NoContent
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ€å¾Œçš„ &lt;code&gt;delete_demo&lt;/code&gt; æ‡‰è©²æœƒé‡åˆ°ç·¨è­¯éŒ¯èª¤ï¼Œå› ç‚ºæˆ‘å€‘æ²’æœ‰å¼•å…¥ &lt;code&gt;status&lt;/code&gt;ï¼Œæ‰€ä»¥æˆ‘å€‘è¦åŠ å…¥ &lt;code&gt;use rocket::response::status;&lt;/code&gt;ï¼Œé€™æ¨£å°±å¯ä»¥æ­£å¸¸ç·¨è­¯äº†ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘é‚„éœ€è¦ä¿®æ”¹ä¸€ä¸‹é‹ä½œ &lt;code&gt;rocket&lt;/code&gt;ï¼Œä¸»è¦æŠŠæˆ‘å€‘å»ºç«‹çš„å¹¾å€‹ method åŠ é€² &lt;code&gt;routes&lt;/code&gt; ä¸­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;fn rocket() -&amp;gt; _ {
    let routes = routes![get_demo, view_demo, create_demo, update_demo, delete_demo];
    rocket::build().mount(&quot;/&quot;, routes)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ¨£å°±å¯ä»¥æ­£å¸¸é‹ä½œäº†ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†çœ‹çœ‹æ€éº¼æ¸¬è©¦é€™å€‹ APIã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-6542dc564a6&quot;&gt;æ¸¬è©¦&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘å¯ä»¥åœ¨çµ‚ç«¯æ©Ÿä½¿ç”¨ &lt;code&gt;curl&lt;/code&gt; ä¾†æ¸¬è©¦ï¼Œæˆ–è€…æˆ‘å€‘å¯ä»¥ç›´æ¥ç”¨ Postman ä¾†æ¸¬è©¦ï¼Œé€™é‚Šæˆ‘å€‘å°±ç”¨ Postman ä¾†æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæˆ‘å€‘å…ˆå•Ÿå‹• serverï¼Œç„¶å¾Œæœƒé¡¯ç¤ºä»¥ä¸‹çš„ç•«é¢ï¼Œä»£è¡¨æˆ‘å€‘å‰›å‰›å»ºç«‹çš„ methods å·²ç¶“åœ¨ routes ä¸­é‹ä½œäº†ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/EqeW1mr.png&quot; alt=&quot;CleanShot 2022-10-09 at 02.43.05@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†æ¸¬è©¦ä¸€ä¸‹ï¼Œé¦–å…ˆæˆ‘å€‘å…ˆç”¨ &lt;code&gt;GET&lt;/code&gt; çš„æ–¹å¼ä¾†å–å¾—æ‰€æœ‰çš„è³‡æ–™ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/qvpEJBI.png&quot; alt=&quot;CleanShot 2022-10-09 at 02.55.53@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘ç”¨ &lt;code&gt;GET&lt;/code&gt; çš„æ–¹å¼ä¾†å–å¾— id ç‚º 1 çš„è³‡æ–™ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/yZqOOp1.png&quot; alt=&quot;CleanShot 2022-10-09 at 02.58.43@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;ç›®å‰æˆ‘å€‘ä½¿ç”¨ &lt;code&gt;GET&lt;/code&gt; çš„æ–¹å¼éƒ½èƒ½æˆåŠŸå–åˆ°è³‡æ–™ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°±ä¾†æ¸¬è©¦ &lt;code&gt;POST&lt;/code&gt; çš„æ–¹å¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/SQvTpPN.png&quot; alt=&quot;CleanShot 2022-10-09 at 03.46.38@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;è¨˜å¾—é€™è£¡çš„ key è¦ä½¿ç”¨ Content-Typeï¼Œvalue è¦ä½¿ç”¨ application/jsonï¼Œé€™æ¨£æ‰èƒ½æ­£å¸¸é‹ä½œã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ç¹¼çºŒæ¥è‘—æ¸¬è©¦ &lt;code&gt;PUT&lt;/code&gt; çš„æ–¹å¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/FO7VQBG.png&quot; alt=&quot;CleanShot 2022-10-09 at 03.53.26@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;æ¥è‘—æˆ‘å€‘ä¾†æ¸¬è©¦ &lt;code&gt;DELETE&lt;/code&gt; çš„æ–¹å¼ï¼š&lt;/p&gt;

&lt;p&gt;é€™è£¡æˆ‘ç”¨ Postman åœ¨æ¸¬è©¦çš„æ™‚å€™ï¼Œç”±æ–¼æ˜¯å‡è³‡æ–™ï¼Œæ‰€ä»¥æ²’è¾¦æ³•å¾—çŸ¥æ˜¯å¦æˆåŠŸï¼Œæ‰€ä»¥æˆ‘å€‘é€™è£¡æ”¹ç”¨ &lt;code&gt;curl&lt;/code&gt; ä¾†æ¸¬è©¦ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ curl 127.0.0.1:8000/demo/1 -X DELETE -I
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆåŠŸçš„è©±æœƒå›å‚³ä»¥ä¸‹çµæœï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/ghnNHkF.png&quot; alt=&quot;CleanShot 2022-10-09 at 04.20.04@2x&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;catch-error&quot;&gt;catch error&lt;/h2&gt;

&lt;p&gt;æœ€å¾Œæˆ‘å€‘å†åšå€‹å¦‚æœé–‹ç™¼è€…åœ¨æ‰“ API æ™‚ï¼Œè¼¸å…¥éŒ¯èª¤è·¯å¾‘çš„è‡ªå®šç¾©éŒ¯èª¤è¨Šæ¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[catch(404)]
fn not_found() -&amp;gt; Value {
    json!({ &quot;status&quot;: &quot;error&quot;, &quot;reason&quot;: &quot;Resource was not found.&quot; })
}

#[launch]
fn rocket() -&amp;gt; _ {
    let routes = routes![get_demo, view_demo, create_demo, update_demo, delete_demo];
    rocket::build().mount(&quot;/&quot;, routes).register(&quot;/&quot;, catchers![not_found])
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™æ¨£å¦‚æœæ‰“éŒ¯ API çš„è©±ï¼Œå°±æœƒå‡ºç¾æˆ‘å€‘å‰›å‰›å®šç¾©çš„éŒ¯èª¤ JSON è¨Šæ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/5IWXuYb.png&quot; alt=&quot;CleanShot 2022-10-09 at 19.01.11@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æ”¾ä¸Šä»Šå¤©å®Œæ•´çš„ç¨‹å¼ç¢¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[macro_use]
extern crate rocket;

use rocket::response::status;
use rocket::serde::json::{json, Json, Value};

#[get(&quot;/demo&quot;)]
fn get_demo() -&amp;gt; Value {
    json!([{ &quot;id&quot;: 1, &quot;name&quot;: &quot;Bucky&quot; }, { &quot;id&quot;: 2, &quot;name&quot;: &quot;Tom&quot; }])
}

#[get(&quot;/demo/&amp;lt;id&amp;gt;&quot;)]
fn view_demo(id: i32) -&amp;gt; Value {
    json!({ &quot;id&quot;: id, &quot;name&quot;: &quot;Some one&quot; })
}

#[post(&quot;/demo&quot;, format = &quot;json&quot;)]
fn create_demo() -&amp;gt; Value {
    json!({ &quot;id&quot;: 3, &quot;name&quot;: &quot;Patty&quot; })
}

#[put(&quot;/demo/&amp;lt;id&amp;gt;&quot;, format = &quot;json&quot;)]
fn update_demo(id: i32) -&amp;gt; Value {
    json!({ &quot;id&quot;: id, &quot;name&quot;: &quot;Bucky&quot; })
}

#[delete(&quot;/demo/&amp;lt;id&amp;gt;&quot;)]
fn delete_demo(id: i32) -&amp;gt; status::NoContent {
    status::NoContent
}

#[catch(404)]
fn not_found() -&amp;gt; Value {
    json!({ &quot;status&quot;: &quot;error&quot;, &quot;reason&quot;: &quot;Resource was not found.&quot; })
}

#[launch]
fn rocket() -&amp;gt; _ {
    let routes = routes![get_demo, view_demo, create_demo, update_demo, delete_demo];
    rocket::build().mount(&quot;/&quot;, routes).register(&quot;/&quot;, catchers![not_found])
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»Šå¤©å°±å…ˆåˆ°é€™é‚Šï¼Œæ˜å¤©ä¾†åš token é©—è­‰çš„åŠŸèƒ½ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Wed, 12 Oct 2022 00:39:16 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-rocket-part-ii.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 2 minutes</category>
    </item>
    <item>
      <title>ä¾†ç© Rust çš„æ¡†æ¶å§ï¼ - Rocket - Part I</title>
      <link>https://railquill.vercel.app/rust-rocket-part-i.html</link>
      <description>Rust çš„æ¡†æ¶ Rocket</description>
      <content:encoded><![CDATA[
        &lt;p&gt;ä»Šå¤©é–‹å§‹æˆ‘å€‘å°‡æœƒé–‹å§‹ä½¿ç”¨ Rust çš„ Web æ¡†æ¶ -- &lt;a href=&quot;https://rocket.rs/&quot;&gt;Rocket&lt;/a&gt;ï¼Œä¾†å»ºç«‹ä¸€å€‹ç°¡å–®çš„ Web Serverã€‚&lt;/p&gt;

&lt;h2 id=&quot;rocket&quot;&gt;Rocket æ˜¯ä»€éº¼ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;ç°¡å–®ä»‹ç´¹ä¸€ä¸‹ Rocketï¼ŒRocket æ˜¯ä¸€å€‹åŸºæ–¼ Rust èªè¨€çš„ä¸€å€‹ Web æ¡†æ¶ï¼Œæˆªæ­¢ç›®å‰ç‚ºæ­¢åœ¨ GitHub ä¸Šä¸€å…±æœ‰ 18.6k çš„æ˜Ÿæ˜Ÿæ•¸ã€‚&lt;/p&gt;

&lt;p&gt;Rocket çš„è¨­è¨ˆéˆæ„Ÿä¾†è‡ªæ–¼ Ruby on Railsã€Flaskç­‰çŸ¥åçš„ Web æ¡†æ¶ï¼Œä¸¦ä¸”åœ¨è¨­è¨ˆä¸Šæœ‰è‘—é¡ä¼¼çš„ç‰¹æ€§ï¼Œä¸¦ä»¥ 3 å€‹æ ¸å¿ƒæ¦‚å¿µä¾†è¨­è¨ˆï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å®‰å…¨ã€æ­£ç¢ºï¼Œé‚„æœ‰é‡è¦–é–‹ç™¼è€…é«”é©—ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„è«‹æ±‚éƒ½æœƒç”± Rocket ä¾†è™•ç†å‹åˆ¥ã€‚&lt;/li&gt;
&lt;li&gt;ä¸å¼·åˆ¶ä½¿ç”¨ Rocket çš„å‡½å¼åº«ï¼Œå¯ä»¥è®“é–‹ç™¼è€…è‡ªç”±é¸æ“‡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç„¶å¾Œå€‹äººè¦ºå¾— Rocket çš„æ–‡ä»¶å¯«çš„éå¸¸çš„å®Œæ•´ï¼Œç®—æ˜¯è »é©åˆæ–°æ‰‹å…¥é–€çš„ä¸€å€‹æ¡†æ¶ã€‚&lt;/p&gt;

&lt;h2 id=&quot;hello-world&quot;&gt;å¾ Hello World é–‹å§‹&lt;/h2&gt;

&lt;p&gt;é‚£éº¼æˆ‘å€‘å°±å¾ä¸€å€‹ç°¡å–®çš„ Hello World é–‹å§‹ï¼Œé¦–å…ˆæˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹ binary-based çš„æ–°å°ˆæ¡ˆï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;$ cargo new --bin rocket-server
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;rocket&quot;&gt;å®‰è£ Rocket&lt;/h3&gt;

&lt;p&gt;åœ¨ Rust å®‰è£å¥—ä»¶éå¸¸å®¹æ˜“ï¼Œåªè¦åœ¨ &lt;code&gt;Cargo.toml&lt;/code&gt; è£¡é¢ &lt;code&gt;[dependencies]&lt;/code&gt; çš„ä¸‹æ–¹åŠ å…¥æˆ‘å€‘è¦å®‰è£çš„å¥—ä»¶å°±å¯ä»¥äº†ï¼Œåœ¨é€™è£¡åƒé€™æ¨£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml&quot;&gt;[dependencies]
rocket = &quot;0.5.0-rc.2&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œåœ¨ &lt;code&gt;main.rs&lt;/code&gt; ä¿®æ”¹ä¸€ä¸‹ codeï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[macro_use] extern crate rocket;

#[get(&quot;/&quot;)]
fn index() -&amp;gt; &amp;amp;&#39;static str {
    &quot;Hello, world!&quot;
}

#[launch]
fn rocket() -&amp;gt; _ {
    rocket::build().mount(&quot;/&quot;, routes![index])
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥è‘—åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ &lt;code&gt;cargo run&lt;/code&gt;ï¼Œä¸€é–‹å§‹æœƒå…ˆä¸‹è¼‰ Rocket çš„å¥—ä»¶ï¼Œç„¶å¾Œæœƒæ¥è‘—åŸ·è¡Œç¨‹å¼ï¼Œçµ‚ç«¯æ©Ÿçš„ç•«é¢æœƒæ˜¯é€™æ¨£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/tfrH2pz.png&quot; alt=&quot;CleanShot 2022-10-08 at 15.44.16@2x&quot;&gt;&lt;/p&gt;

&lt;p&gt;éƒ½æ²’å•é¡Œçš„è©±ï¼Œå¯ä»¥æŒ‰ç…§æç¤ºé€£å»ç¶²å€ï¼Œæˆ–æ˜¯å» &lt;code&gt;http://localhost:8000&lt;/code&gt;ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘çš„ç€è¦½å™¨é¡¯ç¤ºå‡º Hello World äº†ã€‚ï¼ˆé›–ç„¶ç•«é¢æœ‰é»é™½æ˜¥â”(Â´Ğ´`)â”Œï¼‰&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ Rocket å»ºç«‹ä¸€å€‹ç°¡å–®çš„ Hello Worldï¼Œè·Ÿä¹‹å‰ç”¨ç´” Rust ç›¸æ¯”æ˜¯ä¸æ˜¯æ„Ÿå—åˆ°ä»–çš„æ–¹ä¾¿å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ç¨å¾®è¬›è§£ä¸€ä¸‹å‰›å‰›é‹ä½œçš„ codeï¼Œé¦–å…ˆæˆ‘å€‘å…ˆå¼•å…¥ Rocket çš„å¥—ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[macro_use] extern crate rocket;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œæˆ‘å€‘å®šç¾©ä¸€å€‹ &lt;code&gt;index&lt;/code&gt; çš„å‡½å¼ï¼Œä¸¦ä¸”å›å‚³ä¸€å€‹ &lt;code&gt;&amp;amp;&#39;static str&lt;/code&gt;ï¼Œé€™å€‹ &lt;code&gt;&amp;amp;&#39;static str&lt;/code&gt; ä»£è¡¨çš„æ˜¯ä¸€å€‹å­—ä¸²çš„ referenceï¼Œè€Œä¸”é€™å€‹ reference çš„ç”Ÿå‘½é€±æœŸæ˜¯ &lt;code&gt;&#39;static&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯æ•´å€‹ç¨‹å¼çš„ç”Ÿå‘½é€±æœŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[get(&quot;/&quot;)]
fn index() -&amp;gt; &amp;amp;&#39;static str {
    &quot;Hello, world!&quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶å¾Œåœ¨ &lt;code&gt;#[launch]&lt;/code&gt; çš„å‡½å¼è£¡é¢ï¼Œæˆ‘å€‘ä½¿ç”¨ &lt;code&gt;rocket::build()&lt;/code&gt; ä¾†å»ºç«‹ä¸€å€‹ Rocket çš„å¯¦ä¾‹ï¼Œç„¶å¾Œä½¿ç”¨ &lt;code&gt;mount&lt;/code&gt; ä¾†å°‡æˆ‘å€‘çš„ &lt;code&gt;index&lt;/code&gt; å‡½å¼ mount åˆ° &lt;code&gt;/&lt;/code&gt; çš„è·¯å¾‘ä¸Šï¼Œæœ€å¾Œå›å‚³é€™å€‹ Rocket å¯¦ä¾‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[launch]
fn rocket() -&amp;gt; _ {
    rocket::build().mount(&quot;/&quot;, routes![index])
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Rocket åœ¨é€™è£¡ä¹Ÿæä¾›äº†å¦ä¸€ç¨®å•Ÿå‹• server çš„å¯«æ³•ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[rocket::main]
async fn main() -&amp;gt; Result&amp;lt;(), rocket::Error&amp;gt; {
    let _rocket = rocket::build()
        .mount(&quot;/&quot;, routes![index])
        .launch()
        .await?;

    Ok(())
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…©è€…éƒ½å¯ä»¥é‹è¡Œï¼Œä½†æ˜¯æˆ‘è¦ºå¾— &lt;code&gt;#[launch]&lt;/code&gt; çš„å¯«æ³•æ¯”è¼ƒç°¡æ½”ï¼Œä¸éé‚„æ˜¯æœ‰äº›è¨±çš„å·®ç•°ï¼Œä¾‹å¦‚ &lt;code&gt;#[launch]&lt;/code&gt; æœƒè‡ªå‹•å¹«ä½ å»ºç«‹ä¸€å€‹ &lt;code&gt;main&lt;/code&gt; å‡½å¼ï¼Œè€Œå¦‚æœä½¿ç”¨ &lt;code&gt;#[rocket::main]&lt;/code&gt; çš„è©±ï¼Œé–‹ç™¼è€…è‡ªå·±è™•ç†çš„éƒ¨åˆ†å¯èƒ½å°±æ¯”è¼ƒå¤šï¼Œç«¯çœ‹å€‹äººå–œå¥½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;json-response&quot;&gt;JSON response&lt;/h2&gt;

&lt;p&gt;å‰é¢æˆ‘å€‘éƒ½åªæ˜¯å›å‚³ä¸€å€‹å­—ä¸²ï¼Œä½†æ˜¯å¦‚æœæˆ‘å€‘è¦å›å‚³ä¸€å€‹ JSON çš„è©±ï¼Œè©²æ€éº¼åšå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;é€™è£¡æˆ‘å€‘å¯ä»¥ä½¿ç”¨ &lt;a href=&quot;https://github.com/serde-rs/serde&quot;&gt;Serde&lt;/a&gt; é€™å€‹æ¡†æ¶ä¾†å¹«å¿™è™•ç† JSONï¼Œé¦–å…ˆæˆ‘å€‘è¦å…ˆåœ¨ &lt;code&gt;Cargo.toml&lt;/code&gt; è£¡é¢åŠ å…¥ï¼Œä¸¦ä¸”ä¿®æ”¹ä¸€ä¸‹ï¼Œé€™è£¡å¹«å¤§å®¶æ•´ç†å¥½äº†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;toml&quot;&gt;[dependencies]
rocket = { version = &quot;0.5.0-rc.2&quot;, features = [&quot;json&quot;] }
serde = { version = &quot;1.0&quot;, features = [&quot;derive&quot;] }
serde_json = &quot;1.0&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥è‘—åœ¨ &lt;code&gt;main.rs&lt;/code&gt; è£¡é¢ä¿®æ”¹ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;#[macro_use]
extern crate rocket;

use rocket::serde::json::{json, Json, Value};

#[get(&quot;/&quot;)]
fn index() -&amp;gt; Value {
    json!({ &quot;name&quot;: &quot;Bucky&quot;, &quot;age&quot;: 18, &quot;favorite_games&quot;: [&quot;splatoon 3&quot;, &quot;zelda&quot;] })
}

#[launch]
fn rocket() -&amp;gt; _ {
    let routes = routes![index];
    rocket::build().mount(&quot;/&quot;, routes)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥è‘—ä¸€æ¨£é‡æ–°åŸ·è¡Œï¼Œç„¶å¾Œç€è¦½å™¨é‡æ–°æ•´ç†ï¼Œå°±å¯ä»¥çœ‹åˆ°å›å‚³çš„ JSON äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå¤©å°±å…ˆåˆ°é€™é‚Šï¼Œæ˜å¤©å†ç¹¼çºŒå»ºç«‹ä¸€å€‹ç°¡å–® CRUD çš„ APIã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Tue, 11 Oct 2022 01:10:50 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-rocket-part-i.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 2 minutes</category>
    </item>
    <item>
      <title>ä¾†ç”¨ Rust å»ºç«‹ä¸€å€‹ä¼ºæœå™¨å§ï¼Part IV</title>
      <link>https://railquill.vercel.app/rust-part-iv.html</link>
      <description>ç”¨ Rust å»ºç«‹ä¸€å€‹ä¼ºæœå™¨</description>
      <content:encoded><![CDATA[
        &lt;p&gt;æ˜¨å¤©æˆ‘å€‘æ–°å¢äº†ä¸€å€‹æª”æ¡ˆï¼Œå°ˆé–€ä¾†åšåŸ·è¡Œç·’æ± çš„éƒ¨åˆ†ï¼Œä½†é‚„æ²’å®Œæˆï¼Œæ‰€ä»¥ä»Šå¤©å°±æ¥è‘—ç¹¼çºŒå®Œæˆã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-101b2b48a8b529f9&quot;&gt;å»ºç«‹åŸ·è¡Œç·’æ± çš„å„²å­˜ç©ºé–“&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæˆ‘å€‘è¦å»ºç«‹ä¸€å€‹å„²å­˜åŸ·è¡Œç·’çš„ç©ºé–“ï¼Œé€™å€‹ç©ºé–“æœƒå„²å­˜æ‰€æœ‰çš„åŸ·è¡Œç·’ï¼Œç„¶å¾Œæˆ‘å€‘å¯ä»¥å¾é€™å€‹ç©ºé–“å–å‡ºåŸ·è¡Œç·’ä¾†ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use std::thread::JoinHandle;

pub struct ThreadPool {
    threads: Vec&amp;lt;JoinHandle&amp;lt;()&amp;gt;&amp;gt;,
}

impl ThreadPool {
    pub fn new(size: usize) -&amp;gt; ThreadPool {
        assert!(size &amp;gt; 0);
        let mut threads = Vec::with_capacity(size);
        for _ in 0..size {
            // ç”¢ç”ŸåŸ·è¡Œç·’ä¸¦å„²å­˜è‡³å‘é‡
        }
        ThreadPool { threads }
    }

    pub fn execute&amp;lt;F&amp;gt;(&amp;amp;self, f: F)
    where
        F: FnOnce() + Send + &#39;static,
    {
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™é‚Šæˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹ &lt;code&gt;ThreadPool&lt;/code&gt; çš„çµæ§‹ï¼Œç„¶å¾Œåœ¨è£¡é¢å»ºç«‹ä¸€å€‹ &lt;code&gt;threads&lt;/code&gt; çš„å‘é‡ï¼Œé€™å€‹å‘é‡æœƒå„²å­˜æ‰€æœ‰çš„åŸ·è¡Œç·’ï¼Œç„¶å¾Œæˆ‘å€‘æœƒåœ¨ &lt;code&gt;new&lt;/code&gt; æ–¹æ³•ä¸­ç”¢ç”ŸåŸ·è¡Œç·’ä¸¦å„²å­˜è‡³å‘é‡ä¸­ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-ef217caaef37de35&quot;&gt;å®ŒæˆåŸ·è¡Œç·’æ± çš„å»ºç«‹&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†å°±ç›´æ¥å…ˆä¸Šå®Œæˆçš„ codeï¼Œç„¶å¾Œå†ä¾†è§£é‡‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use std::sync::{
    mpsc::{self, Receiver, Sender},
    Arc, Mutex,
};
use std::thread::{self, JoinHandle};

type Job = Box&amp;lt;dyn FnOnce() + Send + &#39;static&amp;gt;;

pub struct ThreadPool {
    workers: Vec&amp;lt;Worker&amp;gt;,
    sender: Sender&amp;lt;Job&amp;gt;,
}

impl ThreadPool {
    pub fn new(size: usize) -&amp;gt; ThreadPool {
        assert!(size &amp;gt; 0);

        let (sender, receiver) = mpsc::channel();

        let receiver = Arc::new(Mutex::new(receiver));

        let mut workers = Vec::with_capacity(size);

        for id in 0..size {
            workers.push(Worker::new(id, receiver.clone()));
        }

        ThreadPool { workers, sender }
    }

    pub fn execute&amp;lt;F: FnOnce() + Send + &#39;static&amp;gt;(&amp;amp;self, f: F) {
        let job = Box::new(f);

        self.sender.send(job).unwrap();
    }
}

struct Worker {
    id: usize,
    thread: JoinHandle&amp;lt;()&amp;gt;,
}

impl Worker {
    fn new(id: usize, receiver: Arc&amp;lt;Mutex&amp;lt;Receiver&amp;lt;Job&amp;gt;&amp;gt;&amp;gt;) -&amp;gt; Worker {
        let thread = thread::spawn(move || loop {
            let job = receiver.lock().unwrap().recv().unwrap();

            println!(&quot;Worker {} got a job; executing.&quot;, id);

            job();
        });

        Worker { id, thread }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é¦–å…ˆï¼Œå¾ &lt;code&gt;use&lt;/code&gt; å¼•å…¥çš„éƒ¨åˆ†ï¼Œæˆ‘å€‘å¼•å…¥äº† &lt;code&gt;mpsc&lt;/code&gt; çš„ channelï¼Œé€™å€‹ channel æœƒç”¨ä¾†å‚³éåŸ·è¡Œç·’çš„å·¥ä½œï¼Œç„¶å¾Œæˆ‘å€‘ä¹Ÿå¼•å…¥äº† &lt;code&gt;Arc&lt;/code&gt; å’Œ &lt;code&gt;Mutex&lt;/code&gt;ï¼Œé€™å…©å€‹æ˜¯ç”¨ä¾†åšå¤šåŸ·è¡Œç·’çš„å…±äº«è³‡æºçš„ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å®šç¾©äº†ä¸€å€‹ &lt;code&gt;Job&lt;/code&gt; çš„å‹åˆ¥ï¼Œé€™å€‹å‹åˆ¥æ˜¯ä¸€å€‹ &lt;code&gt;Box&lt;/code&gt;ï¼Œè£¡é¢æ”¾çš„æ˜¯ä¸€å€‹ &lt;code&gt;FnOnce&lt;/code&gt; çš„ traitï¼Œé€™å€‹ trait æœƒç”¨ä¾†å®šç¾©åŸ·è¡Œç·’çš„å·¥ä½œï¼Œç„¶å¾Œæˆ‘å€‘æœƒåœ¨ &lt;code&gt;execute&lt;/code&gt; æ–¹æ³•ä¸­å°‡é€™å€‹ trait å‚³éçµ¦ channelã€‚&lt;/p&gt;

&lt;p&gt;å†ä¾†ï¼Œæˆ‘å€‘åœ¨ &lt;code&gt;ThreadPool&lt;/code&gt; çš„çµæ§‹ä¸­ï¼Œæ–°å¢äº†ä¸€å€‹ &lt;code&gt;workers&lt;/code&gt; çš„å‘é‡ï¼Œé€™å€‹å‘é‡æœƒå„²å­˜æ‰€æœ‰çš„åŸ·è¡Œç·’ï¼Œç„¶å¾Œæˆ‘å€‘æœƒåœ¨ &lt;code&gt;new&lt;/code&gt; æ–¹æ³•ä¸­ç”¢ç”ŸåŸ·è¡Œç·’ä¸¦å„²å­˜è‡³å‘é‡ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—ï¼Œæˆ‘å€‘åœ¨ &lt;code&gt;new&lt;/code&gt; æ–¹æ³•ä¸­ï¼Œå…ˆå»ºç«‹ä¸€å€‹ channelï¼Œç„¶å¾Œæˆ‘å€‘æœƒå°‡ channel çš„æ¥æ”¶ç«¯å‚³å…¥åŸ·è¡Œç·’ä¸­ï¼Œé€™æ¨£åŸ·è¡Œç·’å°±å¯ä»¥å¾ channel ä¸­å–å¾—å·¥ä½œäº†ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œï¼Œæˆ‘å€‘åœ¨ &lt;code&gt;execute&lt;/code&gt; æ–¹æ³•ä¸­ï¼Œå°‡å·¥ä½œå‚³éçµ¦ channelã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-f6316b6da270bb02&quot;&gt;åŸ·è¡Œç·’æ± çš„æ¸¬è©¦&lt;/h2&gt;

&lt;p&gt;æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘ä¾†æ¸¬è©¦ä¸€ä¸‹æˆ‘å€‘çš„åŸ·è¡Œç·’æ± ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;// src/main.rs
extern crate server;
use std::io::prelude::*;
use std::net::{TcpListener, TcpStream};
use std::{fs, path::Path, thread, time::Duration};
use server::ThreadPool;

const PORT: i32 = 3000;
const WORKER_SIZE: usize = 4; // é€™è£¡è¨­å®šåŸ·è¡Œç·’æ•¸é‡

fn main() {
    let listener = TcpListener::bind(format!(&quot;127.0.0.1:{}&quot;, PORT)).unwrap();
    let pool = ThreadPool::new(WORKER_SIZE);

    for stream in listener.incoming() {
        let stream = stream.unwrap();
        pool.execute(|| { handle_connection(stream); });
    }
}

// çœç•¥...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¾åœ¨ç•¶æˆ‘å€‘åŸ·è¡Œç¨‹å¼ï¼Œä¸¦ä¸”åœ¨ç€è¦½å™¨é–‹å•Ÿå¤šå€‹åˆ†é ï¼Œæˆ‘å€‘å¯ä»¥é€éçµ‚ç«¯æ©Ÿä¾†è§€å¯ŸåŸ·è¡Œç·’æ± çš„åŸ·è¡Œæƒ…æ³ï¼Œä¸¦ä¸”å¯ä»¥ç™¼ç¾ï¼Œç¾åœ¨å¯ä»¥éåŒæ­¥è™•ç†å¤šå€‹é€£ç·šï¼Œè€Œä¸”æ”¶åˆ°å¤§é‡è«‹æ±‚æ™‚ï¼Œä¹Ÿä¸æœƒå› ç‚ºåŸ·è¡Œç·’ä¸å¤ è€Œå°è‡´ç„¡æ³•å›æ‡‰ã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Mon, 10 Oct 2022 01:03:43 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-part-iv.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 2 minutes</category>
    </item>
    <item>
      <title>ä¾†ç”¨ Rust å»ºç«‹ä¸€å€‹ä¼ºæœå™¨å§ï¼Part III</title>
      <link>https://railquill.vercel.app/rust-part-iii.html</link>
      <description>ç”¨ Rust å»ºç«‹ä¸€å€‹ä¼ºæœå™¨</description>
      <content:encoded><![CDATA[
        &lt;p&gt;åœ¨é–‹å§‹å»ºç«‹å¤šåŸ·è¡Œç·’ä¼ºæœå™¨ä¹‹å‰ï¼Œæˆ‘å€‘å…ˆä¾†æ¨¡æ“¬ä¸€ä¸‹å–®ä¸€åŸ·è¡Œç·’ä¼ºæœå™¨æœƒé‡åˆ°çš„å•é¡Œã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-42c56d393b7e400f&quot;&gt;æ¨¡æ“¬è«‹æ±‚å•é¡Œ&lt;/h2&gt;

&lt;p&gt;ç›´æ¥ä¸Š code å§ï¼&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;use std::thread; // å¼•å…¥ thread æ¨¡çµ„
use std::time::Duration; // å¼•å…¥ Duration æ¨¡çµ„

// çœç•¥...
fn handle_connection(mut stream: TcpStream) {
    // çœç•¥...
    let delay = b&quot;GET /delay HTTP/1.1\r\n&quot;;

    let (status_line, path) = if buffer.starts_with(get) {
        (&quot;HTTP/1.1 200 OK&quot;, Path::new(&quot;./src/HTML/hello.html&quot;))
    } else if buffer.starts_with(delay) {
        thread::sleep(Duration::from_secs(10)); // é€™è£¡è®“åŸ·è¡Œç·’ç¡ 10 ç§’
        (&quot;HTTP/1.1 200 OK&quot;, Path::new(&quot;./src/HTML/delay.html&quot;)) // é€™è£¡æˆ‘å€‘è¦æ–°å¢ä¸€å€‹ HTML æª”æ¡ˆä¾†é¡¯ç¤ºå»¶é²çš„å…§å®¹
    } else {
        (&quot;HTTP/1.1 404 NOT FOUND&quot;, Path::new(&quot;./src/HTML/404.html&quot;))
    };
    // çœç•¥...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™é‚Šæˆ‘å€‘æ–°å¢äº†ä¸€å€‹ &lt;code&gt;/delay&lt;/code&gt; çš„è·¯å¾‘ï¼Œç•¶æˆ‘å€‘è¼¸å…¥ &lt;code&gt;http://127.0.0.1:3000/delay&lt;/code&gt; æ™‚ï¼Œæœƒå»¶é²å€‹ 10 ç§’ï¼Œç„¶å¾Œå›å‚³å»¶é²çš„å…§å®¹ã€‚
è€Œåœ¨é€™ä¸€é é‡æ•´çš„è©±ï¼Œä¹Ÿä¸€æ¨£æœƒç™¼ç¾æˆ‘å€‘çš„ç¶²é æœƒä¸€ç›´åœ¨ç­‰å¾…ï¼Œç›´åˆ° 10 ç§’å¾Œæ‰æœƒå›å‚³å…§å®¹ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œæˆ‘å€‘å¦å¤–é–‹ä¸€å€‹åˆ†é ï¼Œé€™è£¡æˆ‘å€‘è¼¸å…¥ &lt;code&gt;http://127.0.0.1:3000/&lt;/code&gt;ï¼Œç„¶å¾Œæœƒæ­£å¸¸ç„¡å»¶é²é¡¯ç¤º &lt;code&gt;hello.html&lt;/code&gt; çš„å…§å®¹ã€‚
é€™æ™‚å€™æˆ‘å€‘ä¾†åšä¸€å€‹æœ‰è¶£çš„äº‹æƒ…ï¼Œæˆ‘å€‘åœ¨ &lt;code&gt;/delay&lt;/code&gt; çš„åˆ†é é‡æ•´ï¼Œç„¶å¾Œåœ¨ &lt;code&gt;/&lt;/code&gt; çš„åˆ†é é‡æ•´ï¼Œæˆ‘å€‘æœƒç™¼ç¾ &lt;code&gt;/&lt;/code&gt; çš„åˆ†é ä¹Ÿæœƒç­‰å¾… 10 ç§’ï¼Œç„¶å¾Œæ‰æœƒå›å‚³å…§å®¹ã€‚&lt;/p&gt;

&lt;p&gt;é€™å°±æ˜¯æˆ‘å€‘è¦è§£æ±ºçš„å•é¡Œï¼Œæˆ‘å€‘çš„ä¼ºæœå™¨åªæœ‰ä¸€å€‹åŸ·è¡Œç·’ï¼Œæ‰€ä»¥ç•¶æœ‰ä¸€å€‹è«‹æ±‚é€²ä¾†æ™‚ï¼Œå…¶ä»–çš„è«‹æ±‚éƒ½æœƒç­‰å¾…ï¼Œç›´åˆ°é€™å€‹è«‹æ±‚è™•ç†å®Œç•¢ã€‚&lt;/p&gt;

&lt;h2 id=&quot;part-4f4c94244a6946ee&quot;&gt;å»ºç«‹å¤šåŸ·è¡Œç·’ä¼ºæœå™¨&lt;/h2&gt;

&lt;h3 id=&quot;thread-spawn&quot;&gt;ä½¿ç”¨ thread::spawn&lt;/h3&gt;

&lt;p&gt;é€™é‚Šæˆ‘å€‘å¯ä»¥å…ˆä½¿ç”¨ &lt;code&gt;thread::spawn&lt;/code&gt; ä¾†å»ºç«‹å¤šåŸ·è¡Œç·’ï¼Œè®“æˆ‘å€‘çš„ä¼ºæœå™¨å¯ä»¥åŒæ™‚è™•ç†å¤šå€‹è«‹æ±‚ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;// çœç•¥...
use std::thread; // å¼•å…¥ thread æ¨¡çµ„

fn main() {
    let listener = TcpListener::bind(format!(&quot;127.0.0.1:{}&quot;, PORT)).unwrap();

    for stream in listener.incoming() {
        let stream = stream.unwrap();

        thread::spawn(|| handle_connection(stream)); // é€™é‚Šæˆ‘å€‘ä½¿ç”¨ thread::spawn ä¾†å»ºç«‹å¤šåŸ·è¡Œç·’
    }
}

// çœç•¥...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™è£¡çš„ä½œæ³•æ˜¯ï¼Œå› ç‚ºæˆ‘å€‘çš„ HTTP è«‹æ±‚éƒ½å¯«åœ¨ &lt;code&gt;handle_connection&lt;/code&gt; é€™å€‹å‡½å¼è£¡é¢ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ç›´æ¥å°‡ &lt;code&gt;handle_connection&lt;/code&gt; é€™å€‹å‡½å¼å‚³å…¥ &lt;code&gt;thread::spawn&lt;/code&gt; ä¾†å»ºç«‹å¤šåŸ·è¡Œç·’ã€‚é€™æ¨£æ¯æ¬¡å»ºç«‹ä¸€å€‹æ–°çš„ TCP é€£ç·šæ™‚ï¼Œæˆ‘å€‘å°±æœƒå»ºç«‹ä¸€å€‹æ–°çš„åŸ·è¡Œç·’ä¾†è™•ç†é€™å€‹è«‹æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶å¾Œæˆ‘å€‘ä¾†æ¸¬è©¦ä¸€ä¸‹å‰›å‰›çš„æƒ…æ³ï¼Œç¾åœ¨ä¸€æ¨£é–‹å…©å€‹åˆ†é ï¼Œé€™æ™‚å€™ç­‰å¾… 10 ç§’çµæŸ &lt;code&gt;/delay&lt;/code&gt; çš„åˆ†é ä¸€æ¨£æœƒç­‰å¾… 10 ç§’æ‰ loading å®Œç•¢ï¼Œä½†æ˜¯ &lt;code&gt;/&lt;/code&gt; çš„åˆ†é ä¸æœƒç­‰å¾…ï¼Œå› ç‚ºæˆ‘å€‘çš„ä¼ºæœå™¨å·²ç¶“å¯ä»¥åŒæ™‚è™•ç†å¤šå€‹è«‹æ±‚äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸éé›–ç„¶ç¾åœ¨çš„ä½œæ³•å¯è¡Œï¼Œä½†æ˜¯ç”±æ–¼æ¯æ¬¡å»ºç«‹ä¸€å€‹æ–°çš„ TCP é€£ç·šæ™‚ï¼Œæˆ‘å€‘å°±æœƒå»ºç«‹ä¸€å€‹æ–°çš„åŸ·è¡Œç·’ä¾†è™•ç†é€™å€‹è«‹æ±‚ï¼Œæ‰€ä»¥å¦‚æœæœ‰å¤§é‡çš„è«‹æ±‚é€²ä¾†ï¼Œä¾‹å¦‚ DDOS æ”»æ“Šæˆ‘å€‘çš„ä¼ºæœå™¨ï¼Œé€™æ¨£å°±æœƒç¬é–“å»ºç«‹å¤§é‡çš„åŸ·è¡Œç·’ï¼Œæœƒé€ æˆæ•ˆèƒ½ä¸Šçš„å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;è€Œè§£æ±ºçš„æ–¹æ³•æœ‰å¾ˆå¤šç¨®ï¼Œé€™é‚Šæˆ‘å€‘é¸æ“‡ä½¿ç”¨åŸ·è¡Œç·’æ± ï¼ˆthread poolï¼‰çš„æ–¹å¼ä¾†è§£æ±ºã€‚&lt;/p&gt;

&lt;p&gt;ä½†åœ¨é–‹å§‹ä¹‹å‰ï¼Œæˆ‘å€‘å…ˆä¾†çœ‹ä¸€ä¸‹åŸ·è¡Œç·’æ± çš„æ¦‚å¿µã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-530d088b9932f11&quot;&gt;ä»€éº¼æ˜¯åŸ·è¡Œç·’æ± ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;ç°¡å–®èªªæ˜ä¸€ä¸‹ï¼ŒåŸ·è¡Œç·’æ± æ˜¯åŸ·è¡Œç·’çš„ä¸€ç¨®åŸ·è¡Œæ¨¡å¼ï¼ŒåŸ·è¡Œç·’æ± çš„æ¦‚å¿µå°±æ˜¯æˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹åŸ·è¡Œç·’æ± ï¼Œç„¶å¾ŒæŠŠå›ºå®šæ•¸é‡çš„åŸ·è¡Œç·’æ”¾é€²å»ã€‚ç•¶æœ‰è«‹æ±‚é€²ä¾†æ™‚ï¼Œæˆ‘å€‘å°±å¾åŸ·è¡Œç·’æ± ä¸­å–å‡ºä¸€å€‹åŸ·è¡Œç·’ä¾†è™•ç†è«‹æ±‚ï¼Œé€™æ™‚å€™å…¶ä»–çš„åŸ·è¡Œç·’ä¹Ÿå¯ä»¥è™•ç†å…¶ä»–çš„è«‹æ±‚ï¼Œè€Œç•¶åŸ·è¡Œç·’è«‹æ±‚è™•ç†å®Œç•¢å¾Œï¼ŒåŸ·è¡Œç·’æœƒå›åˆ°åŸ·è¡Œç·’æ± ä¸­ç­‰å¾…æ–°çš„è«‹æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;åŸ·è¡Œç·’æ± çš„å¥½è™•å°±æ˜¯æˆ‘å€‘å¯ä»¥è®“å¤šå€‹åŸ·è¡Œç·’åŒæ™‚è™•ç†è«‹æ±‚ï¼Œè€Œä¸æœƒå› ç‚ºå–®ä¸€åŸ·è¡Œç·’çš„å•é¡Œè€Œé€ æˆç­‰å¾…ï¼Œä¸¦ä¸”å¯ä»¥æ§åˆ¶åŸ·è¡Œç·’çš„æ•¸é‡ï¼Œé¿å…å¤§é‡çš„åŸ·è¡Œç·’é€ æˆæ•ˆèƒ½ä¸Šçš„å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;é‚£éº¼äº†è§£äº†åŸ·è¡Œç·’æ± çš„æ¦‚å¿µå¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥ä¾†å¯¦éš›æ“ä½œè—‰ç”±åŸ·è¡Œç·’æ± ä¾†å»ºç«‹å¤šåŸ·è¡Œç·’çš„ä¼ºæœå™¨äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;part-6542aca06bc&quot;&gt;å¯¦ä½œ&lt;/h3&gt;



&lt;p&gt;é¦–å…ˆæˆ‘å€‘å¯ä»¥å…ˆåœ¨ &lt;code&gt;src&lt;/code&gt; çš„ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ &lt;code&gt;lib.rs&lt;/code&gt; çš„æª”æ¡ˆï¼Œæ¥è‘—ä¾†å¯«åŸ·è¡Œç·’æ± çš„ç¨‹å¼ç¢¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;// src/lib.rs
pub struct ThreadPool;

impl ThreadPool {
    pub fn new(size: usize) -&amp;gt; ThreadPool {
        assert!(size &amp;gt; 0);

        ThreadPool
    }

    pub fn execute&amp;lt;F&amp;gt;(&amp;amp;self, f: F)
    where
        F: FnOnce() + Send + &#39;static,
    {
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€™é‚Šæˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹ &lt;code&gt;ThreadPool&lt;/code&gt; çš„çµæ§‹ï¼Œç„¶å¾Œåœ¨ &lt;code&gt;ThreadPool&lt;/code&gt; çš„çµæ§‹ä¸­å¯¦ä½œä¸€å€‹ &lt;code&gt;new&lt;/code&gt; æ–¹æ³•ï¼Œé€™å€‹æ–¹æ³•æœƒæ¥æ”¶ä¸€å€‹ &lt;code&gt;usize&lt;/code&gt; çš„åƒæ•¸ï¼Œä»£è¡¨æˆ‘å€‘è¦å»ºç«‹å¹¾å€‹åŸ·è¡Œç·’ï¼Œç„¶å¾Œåœ¨ &lt;code&gt;new&lt;/code&gt; æ–¹æ³•ä¸­æˆ‘å€‘æœƒå…ˆä½¿ç”¨ &lt;code&gt;assert!&lt;/code&gt; ä¾†ç¢ºèªæˆ‘å€‘å‚³å…¥çš„åƒæ•¸æ˜¯å¦å¤§æ–¼ 0ï¼Œå¦‚æœä¸æ˜¯çš„è©±å°±æœƒ panic æ‰ï¼Œç„¶å¾Œæˆ‘å€‘æœƒå›å‚³ä¸€å€‹ &lt;code&gt;ThreadPool&lt;/code&gt; çš„çµæ§‹ã€‚&lt;/p&gt;

&lt;p&gt;æ¥è‘—æˆ‘å€‘æƒ³è¦åœ¨ &lt;code&gt;ThreadPool&lt;/code&gt; çš„çµæ§‹ä¸­è¦æœ‰ä¸€å€‹é¡ä¼¼ &lt;code&gt;thread::spawn&lt;/code&gt; çš„æ–¹æ³•ï¼Œå¯ä»¥å¾åƒæ•¸å‚³å…¥è¦åœ¨æ–°åŸ·è¡Œç·’é–‹å•Ÿçš„é–‰åŒ…ï¼Œä»–çš„æ–‡ä»¶æ˜¯é€™æ¨£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;rust&quot;&gt;pub fn spawn&amp;lt;F, T&amp;gt;(f: F) -&amp;gt; JoinHandle&amp;lt;T&amp;gt;
    where
        F: FnOnce() -&amp;gt; T,
        F: Send + &#39;static,
        T: Send + &#39;static,
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘å€‘åœ¨ &lt;code&gt;ThreadPool&lt;/code&gt; çš„çµæ§‹ä¸­å¯¦ä½œä¸€å€‹ &lt;code&gt;execute&lt;/code&gt; æ–¹æ³•ï¼Œé€™å€‹æ–¹æ³•æœƒæ¥æ”¶ä¸€å€‹æ³›å‹ &lt;code&gt;F&lt;/code&gt;ï¼Œé€™å€‹æ³›å‹ &lt;code&gt;F&lt;/code&gt; æœƒæ˜¯ä¸€å€‹é–‰åŒ…ï¼Œè€Œé€™å€‹é–‰åŒ…çš„å‹åˆ¥æœƒæ˜¯ &lt;code&gt;FnOnce()&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯èªªé€™å€‹é–‰åŒ…ä¸æœƒæ¥æ”¶ä»»ä½•åƒæ•¸ï¼Œä¹Ÿä¸æœƒå›å‚³ä»»ä½•å€¼ï¼Œè€Œä¸”é€™å€‹é–‰åŒ…åªæœƒåŸ·è¡Œä¸€æ¬¡ã€‚è€Œé€™å€‹é–‰åŒ…çš„å‹åˆ¥ä¹Ÿæœƒæ˜¯ &lt;code&gt;Send&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯èªªé€™å€‹é–‰åŒ…å¯ä»¥åœ¨å¤šåŸ·è¡Œç·’ä¸­å®‰å…¨çš„å‚³éï¼Œè€Œä¸”é€™å€‹é–‰åŒ…çš„å‹åˆ¥ä¹Ÿæœƒæ˜¯ &lt;code&gt;&#39;static&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯èªªé€™å€‹é–‰åŒ…çš„ç”Ÿå‘½é€±æœŸæœƒæ˜¯æ•´å€‹ç¨‹å¼çš„ç”Ÿå‘½é€±æœŸã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå¤©å…ˆåšåˆ°é€™é‚Šï¼Œæˆ‘å€‘æ˜å¤©å†ç¹¼çºŒæ¥è‘—åšã€‚&lt;/p&gt;

      ]]></content:encoded>
      <pubDate>Sun, 09 Oct 2022 04:41:24 +0000</pubDate>
      <guid isPermaLink="true">https://railquill.vercel.app/rust-part-iii.html</guid>
      <author>bucky0112@gmail.com (Bucky Chu)</author>
      <category>Reading Time: 2 minutes</category>
    </item>
  </channel>
</rss>